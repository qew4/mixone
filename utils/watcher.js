const _0x312370=_0x15a2;(function(_0x167162,_0x54be60){const _0x2e9fa5=_0x15a2,_0x9cffd3=_0x167162();while(!![]){try{const _0x1f468c=parseInt(_0x2e9fa5(0x170))/0x1+-parseInt(_0x2e9fa5(0x188))/0x2*(-parseInt(_0x2e9fa5(0x191))/0x3)+parseInt(_0x2e9fa5(0x180))/0x4+-parseInt(_0x2e9fa5(0x1ae))/0x5*(-parseInt(_0x2e9fa5(0x19f))/0x6)+-parseInt(_0x2e9fa5(0x189))/0x7+-parseInt(_0x2e9fa5(0x19c))/0x8*(-parseInt(_0x2e9fa5(0x19d))/0x9)+-parseInt(_0x2e9fa5(0x1a3))/0xa;if(_0x1f468c===_0x54be60)break;else _0x9cffd3['push'](_0x9cffd3['shift']());}catch(_0x30dfde){_0x9cffd3['push'](_0x9cffd3['shift']());}}}(_0x3cbc,0x4469c));const chokidar=require('chokidar'),path=require('path'),{spawnSync}=require(_0x312370(0x1af)),watchManager=require('../shared/watch-manager'),fs=require('fs');function _0x3cbc(){const _0x154500=['37915vfcsSa','child_process','resolve','exports','➕\x20新增文件:\x20','👋\x20关闭文件监听','inherit','138909IhLxHF','unlink','error','existsSync','SIGINT','message','**/*.css','readdirSync','change','split','delete','**/*.vue','❌\x20删除输出目录失败:\x20','👀\x20开始监听文件变化(编译模式)...','node','rmSync','1067600NoALup','join','unlinkSync','preload.js','log','--generate-preload','rmdirSync','cwd','82542qLVhkD','3240797CpaFKT','exit','includes','🗑️\x20检测到文件删除:\x20','**/package.json','relative','✅\x20已删除空的输出目录:\x20','out','15fDevhw','windows/','watch','--file','👀\x20开始监听文件变化(服务器模式)...','windows','setWatchingStatus','length','🗑️\x20检测到目录删除:\x20','**/*.html','✅\x20已删除对应的输出文件:\x20','3928arAZcy','9729pvBJfi','unlinkDir','30RILNkc','**/vite.config.js','🔄\x20重新编译\x20preload.js:\x20','📝\x20文件变化:\x20','4376590QeUQho','**/*.js','add','dirname','close','**/out/**','✅\x20已删除对应的输出目录:\x20','🔄\x20处理窗口\x20preload.js:\x20','basename','❌\x20删除输出文件失败:\x20','scripts/compile.js'];_0x3cbc=function(){return _0x154500;};return _0x3cbc();}function _0x15a2(_0xfdf2e0,_0x47187e){const _0x3cbcfc=_0x3cbc();return _0x15a2=function(_0x15a2e9,_0x8ec00){_0x15a2e9=_0x15a2e9-0x16f;let _0x55dfa8=_0x3cbcfc[_0x15a2e9];return _0x55dfa8;},_0x15a2(_0xfdf2e0,_0x47187e);}function createWatchConfig(){const _0x3fd833=_0x312370;return{'ignored':['**/node_modules/**',_0x3fd833(0x1a8),'**/scripts/**',_0x3fd833(0x1a0),_0x3fd833(0x18d),'**/package-lock.json','**/.git/**'],'persistent':!![],'ignoreInitial':!![]};}function setupCompileWatcher(_0x1d26be,_0x217931){const _0x4c483a=_0x312370;console[_0x4c483a(0x184)](_0x4c483a(0x17d));const _0x333fe2=process['cwd'](),_0x595ba4=path['resolve'](_0x333fe2,_0x4c483a(0x190));function _0x42c9a4(_0x2d89fb,_0x2629d4){const _0x3daa67=_0x4c483a,_0x35dde2=path[_0x3daa67(0x18e)](_0x333fe2,_0x2d89fb);if(_0x35dde2[_0x3daa67(0x18b)]('windows/')&&path[_0x3daa67(0x1ab)](_0x2d89fb)===_0x3daa67(0x183)){const _0x4560af=path[_0x3daa67(0x1a6)](_0x35dde2)[_0x3daa67(0x179)](_0x3daa67(0x192))[0x1],_0x168e84=path[_0x3daa67(0x181)](_0x595ba4,_0x3daa67(0x196),_0x4560af);if(_0x2629d4===_0x3daa67(0x17a))return console['log']('🔄\x20重新生成默认\x20preload.js:\x20'+_0x35dde2),_0x217931(_0x2d89fb),!![];else{if(_0x2629d4===_0x3daa67(0x178)||_0x2629d4===_0x3daa67(0x1a5))return console[_0x3daa67(0x184)](_0x3daa67(0x1a1)+_0x35dde2),_0x1d26be(_0x2d89fb),!![];}}return![];}watchManager['setWatchingStatus'](!![]);const _0x6f4565=chokidar['watch']([path[_0x4c483a(0x181)](_0x333fe2,'**/*.js'),path[_0x4c483a(0x181)](_0x333fe2,_0x4c483a(0x17b)),path['join'](_0x333fe2,_0x4c483a(0x19a)),path[_0x4c483a(0x181)](_0x333fe2,_0x4c483a(0x176))],createWatchConfig());return _0x6f4565['on'](_0x4c483a(0x178),_0x187c66=>{console['log']('📝\x20文件变化:\x20'+_0x187c66),!_0x42c9a4(_0x187c66,'change')&&(_0x1d26be(_0x187c66),_0x217931(_0x187c66));}),_0x6f4565['on'](_0x4c483a(0x1a5),_0x4df1de=>{const _0xcdd541=_0x4c483a;console['log'](_0xcdd541(0x1b2)+_0x4df1de),!_0x42c9a4(_0x4df1de,_0xcdd541(0x1a5))&&(_0x1d26be(_0x4df1de),_0x217931(_0x4df1de));}),_0x6f4565['on']('unlink',_0x16b9a2=>{const _0x1a3d16=_0x4c483a;try{console['log'](_0x1a3d16(0x18c)+_0x16b9a2);if(!_0x42c9a4(_0x16b9a2,_0x1a3d16(0x17a))){const _0x518c03=path[_0x1a3d16(0x18e)](_0x333fe2,_0x16b9a2),_0x4219b6=path[_0x1a3d16(0x181)](_0x595ba4,_0x518c03);fs[_0x1a3d16(0x173)](_0x4219b6)&&(fs[_0x1a3d16(0x182)](_0x4219b6),console[_0x1a3d16(0x184)](_0x1a3d16(0x19b)+_0x518c03));const _0x1754b7=path[_0x1a3d16(0x1a6)](_0x4219b6);fs[_0x1a3d16(0x173)](_0x1754b7)&&fs['readdirSync'](_0x1754b7)[_0x1a3d16(0x198)]===0x0&&(fs[_0x1a3d16(0x186)](_0x1754b7),console[_0x1a3d16(0x184)](_0x1a3d16(0x18f)+path[_0x1a3d16(0x18e)](_0x333fe2,_0x1754b7)));}}catch(_0xdbb22){console[_0x1a3d16(0x172)](_0x1a3d16(0x1ac)+_0xdbb22[_0x1a3d16(0x175)]);}}),_0x6f4565['on'](_0x4c483a(0x19e),_0x5b4830=>{const _0x343868=_0x4c483a;try{console[_0x343868(0x184)]('🗑️\x20检测到目录删除:\x20'+_0x5b4830);const _0x4c69a1=path[_0x343868(0x18e)](_0x333fe2,_0x5b4830),_0x1b4a70=path['join'](_0x595ba4,_0x4c69a1);fs[_0x343868(0x173)](_0x1b4a70)&&(fs['rmSync'](_0x1b4a70,{'recursive':!![]}),console[_0x343868(0x184)](_0x343868(0x1a9)+_0x4c69a1));}catch(_0x29bc7d){console[_0x343868(0x172)](_0x343868(0x17c)+_0x29bc7d[_0x343868(0x175)]);}}),process['on'](_0x4c483a(0x174),()=>{const _0x12ed9f=_0x4c483a;console[_0x12ed9f(0x184)](_0x12ed9f(0x1b3)),_0x6f4565[_0x12ed9f(0x1a7)](),watchManager[_0x12ed9f(0x197)](![]),process[_0x12ed9f(0x18a)](0x0);}),_0x6f4565;}function setupServerWatcher(_0x104466){const _0x43c2ac=_0x312370;console[_0x43c2ac(0x184)](_0x43c2ac(0x195));const _0x1f036a=process[_0x43c2ac(0x187)](),_0x5dd428=path[_0x43c2ac(0x1b0)](_0x1f036a,_0x43c2ac(0x190));function _0x3d0b5c(_0x4452aa,_0x3f284f){const _0x22ce7c=_0x43c2ac,_0x2f0e42=path[_0x22ce7c(0x18e)](_0x1f036a,_0x4452aa);if(_0x2f0e42['includes']('windows'+path['sep'])&&path[_0x22ce7c(0x1ab)](_0x4452aa)==='preload.js'){console[_0x22ce7c(0x184)](_0x22ce7c(0x1aa)+_0x2f0e42);if(_0x3f284f===_0x22ce7c(0x17a))return spawnSync(_0x22ce7c(0x17e),[_0x22ce7c(0x1ad),'--file',_0x4452aa,_0x22ce7c(0x185)],{'stdio':_0x22ce7c(0x16f)}),!![];else{if(_0x3f284f===_0x22ce7c(0x178)||_0x3f284f===_0x22ce7c(0x1a5))return spawnSync(_0x22ce7c(0x17e),[_0x22ce7c(0x1ad),_0x22ce7c(0x194),_0x4452aa],{'stdio':_0x22ce7c(0x16f)}),!![];}}return![];}const _0x5ad7ac=chokidar[_0x43c2ac(0x193)]([path[_0x43c2ac(0x1b0)](_0x1f036a,_0x43c2ac(0x1a4)),path[_0x43c2ac(0x1b0)](_0x1f036a,_0x43c2ac(0x17b)),path[_0x43c2ac(0x1b0)](_0x1f036a,_0x43c2ac(0x19a)),path[_0x43c2ac(0x1b0)](_0x1f036a,'**/*.css')],createWatchConfig()),_0x3c43fc=_0x392ac0=>{const _0x1dcab1=_0x43c2ac;spawnSync(_0x1dcab1(0x17e),['scripts/compile.js',_0x1dcab1(0x194),_0x392ac0],{'stdio':'inherit'});};return _0x5ad7ac['on'](_0x43c2ac(0x178),_0x4b6be8=>{const _0x71afe9=_0x43c2ac;console[_0x71afe9(0x184)](_0x71afe9(0x1a2)+_0x4b6be8),!_0x3d0b5c(_0x4b6be8,'change')&&_0x3c43fc(_0x4b6be8);}),_0x5ad7ac['on'](_0x43c2ac(0x1a5),_0x52689b=>{const _0x3a81db=_0x43c2ac;console[_0x3a81db(0x184)]('➕\x20新增文件:\x20'+_0x52689b),!_0x3d0b5c(_0x52689b,'add')&&_0x3c43fc(_0x52689b);}),_0x5ad7ac['on'](_0x43c2ac(0x171),_0x2e00f1=>{const _0xfd071=_0x43c2ac;try{console[_0xfd071(0x184)]('🗑️\x20检测到文件删除:\x20'+_0x2e00f1);if(!_0x3d0b5c(_0x2e00f1,'delete')){const _0x46d450=path[_0xfd071(0x18e)](_0x1f036a,_0x2e00f1),_0x33309a=path[_0xfd071(0x181)](_0x5dd428,_0x46d450);fs[_0xfd071(0x173)](_0x33309a)&&(fs[_0xfd071(0x182)](_0x33309a),console[_0xfd071(0x184)]('✅\x20已删除对应的输出文件:\x20'+_0x46d450));const _0x322dce=path[_0xfd071(0x1a6)](_0x33309a);fs[_0xfd071(0x173)](_0x322dce)&&fs[_0xfd071(0x177)](_0x322dce)[_0xfd071(0x198)]===0x0&&(fs[_0xfd071(0x186)](_0x322dce),console[_0xfd071(0x184)](_0xfd071(0x18f)+path[_0xfd071(0x18e)](_0x1f036a,_0x322dce)));}}catch(_0x357191){console[_0xfd071(0x172)]('❌\x20删除输出文件失败:\x20'+_0x357191['message']);}}),_0x5ad7ac['on'](_0x43c2ac(0x19e),_0x546520=>{const _0x381668=_0x43c2ac;try{console[_0x381668(0x184)](_0x381668(0x199)+_0x546520);const _0xc80948=path[_0x381668(0x18e)](_0x1f036a,_0x546520),_0x41d518=path[_0x381668(0x181)](_0x5dd428,_0xc80948);fs['existsSync'](_0x41d518)&&(fs[_0x381668(0x17f)](_0x41d518,{'recursive':!![]}),console['log']('✅\x20已删除对应的输出目录:\x20'+_0xc80948));}catch(_0x531ea1){console[_0x381668(0x172)]('❌\x20删除输出目录失败:\x20'+_0x531ea1[_0x381668(0x175)]);}}),_0x104466['httpServer']['on'](_0x43c2ac(0x1a7),()=>{const _0x58d7aa=_0x43c2ac;console[_0x58d7aa(0x184)](_0x58d7aa(0x1b3)),_0x5ad7ac['close']();}),_0x5ad7ac;}module[_0x312370(0x1b1)]={'setupCompileWatcher':setupCompileWatcher,'setupServerWatcher':setupServerWatcher};