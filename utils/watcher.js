const _0x2a6714=_0x4984;function _0x372f(){const _0x712de8=['rmdirSync','1043792cazZHC','add','basename','out','cwd','24cDnJxc','❌\x20删除输出目录失败:\x20','unlink','**/*.html','split','9850FDuung','../shared/watch-manager','2169JsJVzj','✅\x20已删除对应的输出文件:\x20','windows','readdirSync','**/out/**','🗑️\x20检测到目录删除:\x20','inherit','resolve','join','📝\x20文件变化:\x20','**/.git/**','👋\x20关闭文件监听','sep','scripts/compile.js','**/vite.config.js','path','httpServer','windows/','➕\x20新增文件:\x20','🔄\x20重新生成默认\x20preload.js:\x20','🗑️\x20检测到文件删除:\x20','387304HNseNg','280vHuVuL','existsSync','watch','✅\x20已删除空的输出目录:\x20','**/*.vue','**/*.css','173548ruRcRV','**/package.json','✅\x20已删除对应的输出目录:\x20','setWatchingStatus','rmSync','❌\x20删除输出文件失败:\x20','error','**/node_modules/**','unlinkSync','delete','71952haOpqt','**/package-lock.json','relative','child_process','close','SIGINT','node','14828803fenvvc','--file','unlinkDir','44295TFUcvL','--generate-preload','**/*.js','dirname','message','10IdACei','👀\x20开始监听文件变化(编译模式)...','log','preload.js','change'];_0x372f=function(){return _0x712de8;};return _0x372f();}(function(_0x4ad1d0,_0x3a968b){const _0x17e37b=_0x4984,_0x2c8c14=_0x4ad1d0();while(!![]){try{const _0x46940b=parseInt(_0x17e37b(0x183))/0x1+-parseInt(_0x17e37b(0x160))/0x2*(-parseInt(_0x17e37b(0x150))/0x3)+parseInt(_0x17e37b(0x15b))/0x4*(parseInt(_0x17e37b(0x155))/0x5)+-parseInt(_0x17e37b(0x18d))/0x6*(-parseInt(_0x17e37b(0x17d))/0x7)+parseInt(_0x17e37b(0x17c))/0x8+-parseInt(_0x17e37b(0x167))/0x9*(-parseInt(_0x17e37b(0x165))/0xa)+-parseInt(_0x17e37b(0x14d))/0xb;if(_0x46940b===_0x3a968b)break;else _0x2c8c14['push'](_0x2c8c14['shift']());}catch(_0x59e58d){_0x2c8c14['push'](_0x2c8c14['shift']());}}}(_0x372f,0x46ced));function _0x4984(_0x46d206,_0x42d0eb){const _0x372f5f=_0x372f();return _0x4984=function(_0x498441,_0x2364f4){_0x498441=_0x498441-0x14c;let _0x2b81c7=_0x372f5f[_0x498441];return _0x2b81c7;},_0x4984(_0x46d206,_0x42d0eb);}const chokidar=require('chokidar'),path=require(_0x2a6714(0x176)),{spawnSync}=require(_0x2a6714(0x190)),watchManager=require(_0x2a6714(0x166)),fs=require('fs');function createWatchConfig(){const _0x568f9f=_0x2a6714;return{'ignored':[_0x568f9f(0x18a),_0x568f9f(0x16b),'**/scripts/**',_0x568f9f(0x175),_0x568f9f(0x184),_0x568f9f(0x18e),_0x568f9f(0x171)],'persistent':!![],'ignoreInitial':!![]};}function setupCompileWatcher(_0x5653be,_0x349009){const _0x1f4dca=_0x2a6714;console[_0x1f4dca(0x157)](_0x1f4dca(0x156));const _0x546d4b=process[_0x1f4dca(0x15f)](),_0x76ad70=path[_0x1f4dca(0x16e)](_0x546d4b,_0x1f4dca(0x15e));function _0x35da65(_0x1edd8f,_0x14c600){const _0x35bac6=_0x1f4dca,_0xaab5b1=path[_0x35bac6(0x18f)](_0x546d4b,_0x1edd8f);if(_0xaab5b1['includes'](_0x35bac6(0x178))&&path[_0x35bac6(0x15d)](_0x1edd8f)===_0x35bac6(0x158)){const _0x46370c=path[_0x35bac6(0x153)](_0xaab5b1)[_0x35bac6(0x164)](_0x35bac6(0x178))[0x1],_0x41733b=path['join'](_0x76ad70,_0x35bac6(0x169),_0x46370c);if(_0x14c600===_0x35bac6(0x18c))return console[_0x35bac6(0x157)](_0x35bac6(0x17a)+_0xaab5b1),_0x349009(_0x1edd8f),!![];else{if(_0x14c600===_0x35bac6(0x159)||_0x14c600===_0x35bac6(0x15c))return console[_0x35bac6(0x157)]('🔄\x20重新编译\x20preload.js:\x20'+_0xaab5b1),_0x5653be(_0x1edd8f),!![];}}return![];}watchManager[_0x1f4dca(0x186)](!![]);const _0x5bd479=chokidar[_0x1f4dca(0x17f)]([path[_0x1f4dca(0x16f)](_0x546d4b,_0x1f4dca(0x152)),path[_0x1f4dca(0x16f)](_0x546d4b,'**/*.vue'),path[_0x1f4dca(0x16f)](_0x546d4b,'**/*.html'),path[_0x1f4dca(0x16f)](_0x546d4b,'**/*.css')],createWatchConfig());return _0x5bd479['on'](_0x1f4dca(0x159),_0x717774=>{const _0x85d312=_0x1f4dca;console[_0x85d312(0x157)](_0x85d312(0x170)+_0x717774),!_0x35da65(_0x717774,'change')&&(_0x5653be(_0x717774),_0x349009(_0x717774));}),_0x5bd479['on'](_0x1f4dca(0x15c),_0x52568e=>{const _0x21a3d8=_0x1f4dca;console[_0x21a3d8(0x157)]('➕\x20新增文件:\x20'+_0x52568e),!_0x35da65(_0x52568e,_0x21a3d8(0x15c))&&(_0x5653be(_0x52568e),_0x349009(_0x52568e));}),_0x5bd479['on'](_0x1f4dca(0x162),_0x5a22cc=>{const _0x1619d4=_0x1f4dca;try{console[_0x1619d4(0x157)](_0x1619d4(0x17b)+_0x5a22cc);if(!_0x35da65(_0x5a22cc,_0x1619d4(0x18c))){const _0x3ecfad=path[_0x1619d4(0x18f)](_0x546d4b,_0x5a22cc),_0x2a034c=path[_0x1619d4(0x16f)](_0x76ad70,_0x3ecfad);fs[_0x1619d4(0x17e)](_0x2a034c)&&(fs[_0x1619d4(0x18b)](_0x2a034c),console[_0x1619d4(0x157)]('✅\x20已删除对应的输出文件:\x20'+_0x3ecfad));const _0x5d7275=path[_0x1619d4(0x153)](_0x2a034c);fs[_0x1619d4(0x17e)](_0x5d7275)&&fs[_0x1619d4(0x16a)](_0x5d7275)['length']===0x0&&(fs[_0x1619d4(0x15a)](_0x5d7275),console[_0x1619d4(0x157)](_0x1619d4(0x180)+path['relative'](_0x546d4b,_0x5d7275)));}}catch(_0x254bb5){console['error'](_0x1619d4(0x188)+_0x254bb5[_0x1619d4(0x154)]);}}),_0x5bd479['on']('unlinkDir',_0x102d64=>{const _0x49a366=_0x1f4dca;try{console['log'](_0x49a366(0x16c)+_0x102d64);const _0x32a0d0=path[_0x49a366(0x18f)](_0x546d4b,_0x102d64),_0x1ba8b9=path['join'](_0x76ad70,_0x32a0d0);fs[_0x49a366(0x17e)](_0x1ba8b9)&&(fs[_0x49a366(0x187)](_0x1ba8b9,{'recursive':!![]}),console[_0x49a366(0x157)](_0x49a366(0x185)+_0x32a0d0));}catch(_0xf434f0){console[_0x49a366(0x189)](_0x49a366(0x161)+_0xf434f0[_0x49a366(0x154)]);}}),process['on'](_0x1f4dca(0x192),()=>{const _0x5b8634=_0x1f4dca;console[_0x5b8634(0x157)](_0x5b8634(0x172)),_0x5bd479[_0x5b8634(0x191)](),watchManager['setWatchingStatus'](![]),process['exit'](0x0);}),_0x5bd479;}function setupServerWatcher(_0x422b1a){const _0x38a72c=_0x2a6714;console['log']('👀\x20开始监听文件变化(服务器模式)...');const _0x1c926a=process[_0x38a72c(0x15f)](),_0x2e36e1=path[_0x38a72c(0x16e)](_0x1c926a,_0x38a72c(0x15e));function _0x4e4a18(_0x3c708e,_0x51065e){const _0x1dddc5=_0x38a72c,_0x1f2780=path[_0x1dddc5(0x18f)](_0x1c926a,_0x3c708e);if(_0x1f2780['includes'](_0x1dddc5(0x169)+path[_0x1dddc5(0x173)])&&path[_0x1dddc5(0x15d)](_0x3c708e)===_0x1dddc5(0x158)){console[_0x1dddc5(0x157)]('🔄\x20处理窗口\x20preload.js:\x20'+_0x1f2780);if(_0x51065e==='delete')return spawnSync(_0x1dddc5(0x14c),['scripts/compile.js',_0x1dddc5(0x14e),_0x3c708e,_0x1dddc5(0x151)],{'stdio':'inherit'}),!![];else{if(_0x51065e===_0x1dddc5(0x159)||_0x51065e===_0x1dddc5(0x15c))return spawnSync(_0x1dddc5(0x14c),['scripts/compile.js','--file',_0x3c708e],{'stdio':'inherit'}),!![];}}return![];}const _0x2d11f8=chokidar[_0x38a72c(0x17f)]([path[_0x38a72c(0x16e)](_0x1c926a,_0x38a72c(0x152)),path[_0x38a72c(0x16e)](_0x1c926a,_0x38a72c(0x181)),path['resolve'](_0x1c926a,_0x38a72c(0x163)),path['resolve'](_0x1c926a,_0x38a72c(0x182))],createWatchConfig()),_0x2bfda7=_0x33b3f8=>{const _0x3b5c72=_0x38a72c;spawnSync(_0x3b5c72(0x14c),[_0x3b5c72(0x174),'--file',_0x33b3f8],{'stdio':_0x3b5c72(0x16d)});};return _0x2d11f8['on']('change',_0x1edb25=>{const _0x57f6ff=_0x38a72c;console[_0x57f6ff(0x157)](_0x57f6ff(0x170)+_0x1edb25),!_0x4e4a18(_0x1edb25,_0x57f6ff(0x159))&&_0x2bfda7(_0x1edb25);}),_0x2d11f8['on'](_0x38a72c(0x15c),_0x48c317=>{const _0x12d301=_0x38a72c;console['log'](_0x12d301(0x179)+_0x48c317),!_0x4e4a18(_0x48c317,_0x12d301(0x15c))&&_0x2bfda7(_0x48c317);}),_0x2d11f8['on'](_0x38a72c(0x162),_0x426b14=>{const _0x3664d3=_0x38a72c;try{console[_0x3664d3(0x157)]('🗑️\x20检测到文件删除:\x20'+_0x426b14);if(!_0x4e4a18(_0x426b14,_0x3664d3(0x18c))){const _0x3d7570=path[_0x3664d3(0x18f)](_0x1c926a,_0x426b14),_0x5d0209=path[_0x3664d3(0x16f)](_0x2e36e1,_0x3d7570);fs[_0x3664d3(0x17e)](_0x5d0209)&&(fs[_0x3664d3(0x18b)](_0x5d0209),console[_0x3664d3(0x157)](_0x3664d3(0x168)+_0x3d7570));const _0x1f47f1=path[_0x3664d3(0x153)](_0x5d0209);fs[_0x3664d3(0x17e)](_0x1f47f1)&&fs['readdirSync'](_0x1f47f1)['length']===0x0&&(fs[_0x3664d3(0x15a)](_0x1f47f1),console[_0x3664d3(0x157)](_0x3664d3(0x180)+path['relative'](_0x1c926a,_0x1f47f1)));}}catch(_0x2a9e6a){console['error']('❌\x20删除输出文件失败:\x20'+_0x2a9e6a[_0x3664d3(0x154)]);}}),_0x2d11f8['on'](_0x38a72c(0x14f),_0x122fa8=>{const _0x369581=_0x38a72c;try{console[_0x369581(0x157)](_0x369581(0x16c)+_0x122fa8);const _0x53b7f4=path[_0x369581(0x18f)](_0x1c926a,_0x122fa8),_0x3af9b8=path[_0x369581(0x16f)](_0x2e36e1,_0x53b7f4);fs[_0x369581(0x17e)](_0x3af9b8)&&(fs[_0x369581(0x187)](_0x3af9b8,{'recursive':!![]}),console[_0x369581(0x157)](_0x369581(0x185)+_0x53b7f4));}catch(_0x263518){console[_0x369581(0x189)](_0x369581(0x161)+_0x263518[_0x369581(0x154)]);}}),_0x422b1a[_0x38a72c(0x177)]['on'](_0x38a72c(0x191),()=>{const _0x1b1afb=_0x38a72c;console[_0x1b1afb(0x157)]('👋\x20关闭文件监听'),_0x2d11f8[_0x1b1afb(0x191)]();}),_0x2d11f8;}module['exports']={'setupCompileWatcher':setupCompileWatcher,'setupServerWatcher':setupServerWatcher};