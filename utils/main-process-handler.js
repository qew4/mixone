const _0x2c838a=_0x459f;(function(_0x2ed732,_0x4327ae){const _0x4d5665=_0x459f,_0x17ee5e=_0x2ed732();while(!![]){try{const _0x1d6b4f=parseInt(_0x4d5665(0x12a))/0x1*(-parseInt(_0x4d5665(0x128))/0x2)+-parseInt(_0x4d5665(0x116))/0x3*(parseInt(_0x4d5665(0x100))/0x4)+-parseInt(_0x4d5665(0x129))/0x5+-parseInt(_0x4d5665(0x10c))/0x6+-parseInt(_0x4d5665(0x11a))/0x7+-parseInt(_0x4d5665(0x11e))/0x8+-parseInt(_0x4d5665(0xf8))/0x9*(-parseInt(_0x4d5665(0x101))/0xa);if(_0x1d6b4f===_0x4327ae)break;else _0x17ee5e['push'](_0x17ee5e['shift']());}catch(_0x25fda1){_0x17ee5e['push'](_0x17ee5e['shift']());}}}(_0x2623,0xe5889));const parser=require('@babel/parser'),traverse=require(_0x2c838a(0x107))[_0x2c838a(0x115)],generate=require('@babel/generator')[_0x2c838a(0x115)],t=require(_0x2c838a(0x11b));function _0x2623(){const _0x5852fe=['133304YYqIKj','10LxCXbg','indexOf','jsx','\x0a\x20\x20setupConsoleRedirect(isDevelopmentMode());\x0a\x20\x20//\x20检查是否有窗口状态需要恢复\x0a\x20\x20const\x20statesArg\x20=\x20process.argv.find(arg\x20=>\x20arg.startsWith(\x27--window-states=\x27));\x0a\x20\x20if\x20(statesArg)\x20{\x0a\x20\x20\x20\x20try\x20{\x0a\x20\x20\x20\x20\x20\x20const\x20statesPath\x20=\x20statesArg.split(\x27=\x27)[1];\x0a\x20\x20\x20\x20\x20\x20let\x20content\x20=\x20fs.readFileSync(statesPath,\x20\x27utf-8\x27);\x0a\x20\x20\x20\x20\x20\x20console.log(\x27content:\x27,\x20content);\x0a\x20\x20\x20\x20\x20\x20const\x20states\x20=\x20content.split(\x22------\x22).map(item\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20let\x20_item\x20=\x20item.trim();\x0a\x20\x20\x20\x20\x20\x20\x20\x20if(!_item){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return\x20{}\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20JSON.parse(_item)\x0a\x20\x20\x20\x20\x20\x20}).reverse();\x0a\x20\x20\x20\x20\x20\x20//\x20恢复所有窗口\x0a\x20\x20\x20\x20\x20\x20for\x20(const\x20state\x20of\x20states)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20let\x20windowPath\x20=\x20state.windowPath;\x0a\x20\x20\x20\x20\x20\x20\x20\x20await\x20windowManager.restoreWindow(windowPath,\x20state);\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20//\x20清理临时文件\x0a\x20\x20\x20\x20\x20\x20fs.unlinkSync(statesPath);\x0a\x20\x20\x20\x20}\x20catch\x20(error)\x20{\x0a\x20\x20\x20\x20\x20\x20console.error(\x27恢复窗口状态失败:\x27,\x20error);\x0a\x20\x20\x20\x20}\x0a\x20\x20}\x20else\x20\x0a\x20\x20\x20','const\x20windowManager\x20=\x20require(\x27./window-manager\x27);\x0a','stringLiteral','@babel/traverse','const\x20fs\x20=\x20require(\x27fs\x27);\x0a','module','then','const\x20{\x20ipcMain\x20}\x20=\x20require(\x27electron\x27);\x0a','3953976ejclXz','callee','splice','filter','code','length','const\x20iconv\x20=\x20require(\x27iconv-lite\x27);\x0a\x0a//\x20过滤特殊字符，只保留中文和普通字符\x0afunction\x20filterString(str)\x20{\x0a\x20\x20return\x20str.replace(/[\x5cuD800-\x5cuDBFF][\x5cuDC00-\x5cuDFFF]|[^\x5cx00-\x5cx7F\x5cu4E00-\x5cu9FFF]/g,\x20\x27\x27);\x0a}\x0a\x0a//\x20重写控制台输出方法\x0aconsole.log\x20=\x20(...args)\x20=>\x20{\x0a\x20\x20const\x20message\x20=\x20args.map(arg\x20=>\x20{\x0a\x20\x20\x20\x20if\x20(typeof\x20arg\x20===\x20\x27string\x27)\x20{\x0a\x20\x20\x20\x20\x20\x20return\x20filterString(arg);\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20return\x20arg;\x0a\x20\x20}).join(\x27\x20\x27);\x0a\x20\x20process.stdout.write(iconv.encode(message\x20+\x20\x27\x5cn\x27,\x20\x27gb2312\x27));\x0a}\x0a\x0aconsole.error\x20=\x20(...args)\x20=>\x20{\x0a\x20\x20const\x20message\x20=\x20args.map(arg\x20=>\x20{\x0a\x20\x20\x20\x20if\x20(typeof\x20arg\x20===\x20\x27string\x27)\x20{\x0a\x20\x20\x20\x20\x20\x20return\x20filterString(arg);\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20return\x20arg;\x0a\x20\x20}).join(\x27\x20\x27);\x0a\x20\x20process.stderr.write(iconv.encode(message\x20+\x20\x27\x5cn\x27,\x20\x27gb2312\x27));\x0a}','\x27____replace_handle_open_window____\x27','exports','default','123vavNrY','FunctionExpression','typescript','body','5736661GlieTr','@babel/types','require','type','150856XZjyvI','init','\x0aregisterMainFunctions();\x0a','property','____replace_app_ready_code____','ArrowFunctionExpression','replace','____replace_handle_open_window____','const\x20{\x20registerMainFunctions\x20}\x20=\x20require(\x27./fn\x27);\x0a','declarations','11272KFEpUr','6670755AXGBNV','256CAhqaF','object','single','some','isIdentifier','expressionStatement','59227902zpSgfl','MemberExpression','name','const\x20{\x20setupConsoleRedirect\x20}\x20=\x20require(\x27./reset_console\x27);\x0a','whenReady','arguments','isCallExpression','node'];_0x2623=function(){return _0x5852fe;};return _0x2623();}function processMainProcessFile(_0x4fa626,_0xd2c4f2){const _0x46816b=_0x2c838a,_0x51f340=parser['parse'](_0x4fa626,{'sourceType':_0x46816b(0x109),'plugins':[_0x46816b(0x103),_0x46816b(0x118)]});let _0x599adc='';traverse(_0x51f340,{'Program'(_0x52d6f7){const _0x51c7af=_0x46816b,_0x54efe9=_0x52d6f7[_0x51c7af(0xff)]['body'][_0x51c7af(0x10f)](_0x3b70a7=>t['isVariableDeclaration'](_0x3b70a7)&&_0x3b70a7[_0x51c7af(0x127)][_0x51c7af(0xf5)](_0x1f3f96=>t[_0x51c7af(0xfe)](_0x1f3f96['init'])&&t[_0x51c7af(0xf6)](_0x1f3f96[_0x51c7af(0x11f)][_0x51c7af(0x10d)])&&_0x1f3f96['init']['callee'][_0x51c7af(0xfa)]===_0x51c7af(0x11c)));_0x52d6f7['traverse']({'CallExpression'(_0x4e396b){const _0x5d4cfe=_0x51c7af;if(_0x4e396b['node'][_0x5d4cfe(0x10d)]&&_0x4e396b[_0x5d4cfe(0xff)][_0x5d4cfe(0x10d)][_0x5d4cfe(0x11d)]===_0x5d4cfe(0xf9)&&_0x4e396b['node'][_0x5d4cfe(0x10d)][_0x5d4cfe(0x121)][_0x5d4cfe(0xfa)]===_0x5d4cfe(0x10a)&&_0x4e396b[_0x5d4cfe(0xff)][_0x5d4cfe(0x10d)][_0x5d4cfe(0xf3)][_0x5d4cfe(0x11d)]==='CallExpression'&&_0x4e396b[_0x5d4cfe(0xff)][_0x5d4cfe(0x10d)]['object']['callee'][_0x5d4cfe(0x121)][_0x5d4cfe(0xfa)]===_0x5d4cfe(0xfc)){const _0x3a959a=_0x4e396b['node'][_0x5d4cfe(0xfd)][0x0];if(_0x3a959a[_0x5d4cfe(0x11d)]===_0x5d4cfe(0x123)||_0x3a959a[_0x5d4cfe(0x11d)]===_0x5d4cfe(0x117)){const _0x5a854e=generate(_0x3a959a[_0x5d4cfe(0x119)],{'retainLines':!![],'compact':![],'quotes':'single'});_0x599adc=_0x5a854e[_0x5d4cfe(0x110)],_0x3a959a[_0x5d4cfe(0x119)]=t['blockStatement']([t['expressionStatement'](t[_0x5d4cfe(0x106)](_0x5d4cfe(0x122)))]);}}}});if(_0x54efe9[_0x51c7af(0x111)]>0x0){const _0x3fb6f4=_0x54efe9[_0x54efe9['length']-0x1],_0x384e30=_0x52d6f7[_0x51c7af(0xff)][_0x51c7af(0x119)][_0x51c7af(0x102)](_0x3fb6f4);_0x52d6f7[_0x51c7af(0xff)]['body'][_0x51c7af(0x10e)](_0x384e30+0x1,0x0,t[_0x51c7af(0xf7)](t[_0x51c7af(0x106)](_0x51c7af(0x125))),t[_0x51c7af(0xf7)](t['stringLiteral']('____replace_iconv_lite____')));}}});const _0x379cea=generate(_0x51f340,{'retainLines':!![],'compact':![],'quotes':_0x46816b(0xf4),'concise':![],'jsescOption':{'quotes':'single'}}),_0x120e42=_0x379cea['code']['replace']('\x27____replace_iconv_lite____\x27',getIconvLiteCode())[_0x46816b(0x124)](_0x46816b(0x113),getHandleOpenWindowCode())[_0x46816b(0x124)]('\x27____replace_app_ready_code____\x27',getHotReloadHandleCode(_0x599adc)),_0x248445=getHotReloadSetup(),_0x32e2ea=_0x46816b(0x126),_0x2c1ecc=_0x46816b(0xfb),_0x4a2f37=_0x46816b(0x105),_0x16853c=_0x46816b(0x108),_0x364810=_0x46816b(0x10b);return _0x32e2ea+_0x16853c+_0x364810+_0x4a2f37+_0x2c1ecc+_0x120e42+_0x46816b(0x120)+_0x248445;}function getHandleOpenWindowCode(){return'\x0a//\x20注册\x20WindowManager\x20方法调用的\x20IPC\x20处理器\x0aipcMain.handle(\x27window-manager-action\x27,\x20async\x20(event,\x20{\x20method,\x20args\x20})\x20=>\x20{\x0a\x20\x20try\x20{\x0a\x20\x20\x20\x20if\x20(typeof\x20windowManager[method]\x20===\x20\x27function\x27)\x20{\x0a\x20\x20\x20\x20\x20\x20const\x20result\x20=\x20await\x20windowManager[method].apply(windowManager,\x20args);\x0a\x20\x20\x20\x20\x20\x20return\x20{\x20success:\x20true,\x20result\x20};\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20throw\x20new\x20Error(\x22方法\x20\x22+method+\x22\x20不存在\x22);\x0a\x20\x20\x20\x20}\x0a\x20\x20}\x20catch\x20(error)\x20{\x0a\x20\x20\x20\x20return\x20{\x20success:\x20false,\x20error:\x20error.message\x20};\x0a\x20\x20}\x0a})\x0a';}function getIconvLiteCode(){const _0x5bf0de=_0x2c838a;return _0x5bf0de(0x112);}function getHotReloadHandleCode(_0x274b23){const _0x4b1c6d=_0x2c838a;return _0x4b1c6d(0x104)+_0x274b23+'\x0a';}function getHotReloadSetup(){return'\x0a//\x20判断是否为开发模式\x0afunction\x20isDevelopmentMode()\x20{\x0a\x20\x20//\x20检查命令行参数是否有\x20--dev\x20标志\x0a\x20\x20const\x20isDev\x20=\x20process.argv.includes(\x27--dev\x27);\x0a\x20\x20\x0a\x20\x20//\x20检查环境变量\x0a\x20\x20const\x20nodeEnv\x20=\x20process.env.NODE_ENV;\x0a\x20\x20const\x20isDevEnv\x20=\x20nodeEnv\x20===\x20\x27development\x27\x20||\x20nodeEnv\x20===\x20\x27dev\x27;\x0a\x20\x20\x0a\x20\x20return\x20isDev\x20||\x20isDevEnv;\x0a}\x0a//\x20设置主进程热重载\x0aif\x20(isDevelopmentMode())\x20{\x0a\x20\x20const\x20{\x20setupMainProcessHotReload\x20}\x20=\x20require(\x27./hot-reload\x27);\x0a\x20\x20console.log(\x27setupMainProcessHotReload\x27,__dirname);\x0a\x20\x20setupMainProcessHotReload(__dirname);\x0a}';}function _0x459f(_0x3325f5,_0x4b1c34){const _0x2623f0=_0x2623();return _0x459f=function(_0x459f59,_0x50e35e){_0x459f59=_0x459f59-0xf3;let _0x390a4c=_0x2623f0[_0x459f59];return _0x390a4c;},_0x459f(_0x3325f5,_0x4b1c34);}module[_0x2c838a(0x114)]={'processMainProcessFile':processMainProcessFile};