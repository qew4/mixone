const _0x30664f=_0x23f8;(function(_0xd59496,_0x55b862){const _0xdd502c=_0x23f8,_0x544ceb=_0xd59496();while(!![]){try{const _0x17e5de=parseInt(_0xdd502c(0x1d8))/0x1*(-parseInt(_0xdd502c(0x1e8))/0x2)+-parseInt(_0xdd502c(0x1cc))/0x3+parseInt(_0xdd502c(0x1bd))/0x4*(parseInt(_0xdd502c(0x1be))/0x5)+-parseInt(_0xdd502c(0x1ca))/0x6*(-parseInt(_0xdd502c(0x1f0))/0x7)+parseInt(_0xdd502c(0x1de))/0x8+-parseInt(_0xdd502c(0x1df))/0x9*(parseInt(_0xdd502c(0x1ea))/0xa)+-parseInt(_0xdd502c(0x1ce))/0xb*(-parseInt(_0xdd502c(0x1e6))/0xc);if(_0x17e5de===_0x55b862)break;else _0x544ceb['push'](_0x544ceb['shift']());}catch(_0x14506f){_0x544ceb['push'](_0x544ceb['shift']());}}}(_0x3d34,0xdb46e));const parser=require('@babel/parser'),traverse=require('@babel/traverse')[_0x30664f(0x1d2)],generate=require('@babel/generator')[_0x30664f(0x1d2)],t=require(_0x30664f(0x1bb));function _0x23f8(_0x18dd7d,_0x29cde9){const _0x3d346=_0x3d34();return _0x23f8=function(_0x23f870,_0x2166f7){_0x23f870=_0x23f870-0x1b9;let _0xf497be=_0x3d346[_0x23f870];return _0xf497be;},_0x23f8(_0x18dd7d,_0x29cde9);}function _0x3d34(){const _0x4743fd=['\x27____replace_app_ready_code____\x27','____replace_iconv_lite____','34673KKQWkI','splice','property','const\x20{\x20setupConsoleRedirect\x20}\x20=\x20require(\x27./reset_console\x27);\x0a','const\x20fs\x20=\x20require(\x27fs\x27);\x0a','length','2683504JWGUCV','34389lBujdj','const\x20{\x20ipcMain\x20}\x20=\x20require(\x27electron\x27);\x0a','indexOf','isCallExpression','require','parse','code','53400ILkdvT','CallExpression','54ywnrva','MemberExpression','670HOlYiq','isIdentifier','stringLiteral','const\x20windowManager\x20=\x20require(\x27./window-manager\x27);\x0a','node','ArrowFunctionExpression','956081XzFqwV','____replace_app_ready_code____','____replace_handle_open_window____','@babel/types','expressionStatement','4ZiNhsL','6921335oJipmy','\x0aregisterMainFunctions();\x0a','blockStatement','typescript','\x27____replace_iconv_lite____\x27','traverse','callee','jsx','type','const\x20iconv\x20=\x20require(\x27iconv-lite\x27);\x0a\x0a//\x20过滤特殊字符，只保留中文和普通字符\x0afunction\x20filterString(str)\x20{\x0a\x20\x20return\x20str.replace(/[\x5cuD800-\x5cuDBFF][\x5cuDC00-\x5cuDFFF]|[^\x5cx00-\x5cx7F\x5cu4E00-\x5cu9FFF]/g,\x20\x27\x27);\x0a}\x0a\x0a//\x20重写控制台输出方法\x0aconsole.log\x20=\x20(...args)\x20=>\x20{\x0a\x20\x20const\x20message\x20=\x20args.map(arg\x20=>\x20{\x0a\x20\x20\x20\x20if\x20(typeof\x20arg\x20===\x20\x27string\x27)\x20{\x0a\x20\x20\x20\x20\x20\x20return\x20filterString(arg);\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20return\x20arg;\x0a\x20\x20}).join(\x27\x20\x27);\x0a\x20\x20process.stdout.write(iconv.encode(message\x20+\x20\x27\x5cn\x27,\x20\x27gb2312\x27));\x0a}\x0a\x0aconsole.error\x20=\x20(...args)\x20=>\x20{\x0a\x20\x20const\x20message\x20=\x20args.map(arg\x20=>\x20{\x0a\x20\x20\x20\x20if\x20(typeof\x20arg\x20===\x20\x27string\x27)\x20{\x0a\x20\x20\x20\x20\x20\x20return\x20filterString(arg);\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20return\x20arg;\x0a\x20\x20}).join(\x27\x20\x27);\x0a\x20\x20process.stderr.write(iconv.encode(message\x20+\x20\x27\x5cn\x27,\x20\x27gb2312\x27));\x0a}','then','const\x20{\x20registerMainFunctions\x20}\x20=\x20require(\x27./fn\x27);\x0a','36ekHEoZ','declarations','1680351YmFbPr','FunctionExpression','275pButJr','\x0a\x20\x20setupConsoleRedirect(isDevelopmentMode());\x0a\x20\x20//\x20检查是否有窗口状态需要恢复\x0a\x20\x20const\x20statesArg\x20=\x20process.argv.find(arg\x20=>\x20arg.startsWith(\x27--window-states=\x27));\x0a\x20\x20if\x20(statesArg)\x20{\x0a\x20\x20\x20\x20try\x20{\x0a\x20\x20\x20\x20\x20\x20const\x20statesPath\x20=\x20statesArg.split(\x27=\x27)[1];\x0a\x20\x20\x20\x20\x20\x20let\x20content\x20=\x20fs.readFileSync(statesPath,\x20\x27utf-8\x27);\x0a\x20\x20\x20\x20\x20\x20console.log(\x27content:\x27,\x20content);\x0a\x20\x20\x20\x20\x20\x20const\x20states\x20=\x20content.split(\x22------\x22).map(item\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20let\x20_item\x20=\x20item.trim();\x0a\x20\x20\x20\x20\x20\x20\x20\x20if(!_item){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return\x20{}\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20JSON.parse(_item)\x0a\x20\x20\x20\x20\x20\x20}).reverse();\x0a\x20\x20\x20\x20\x20\x20//\x20恢复所有窗口\x0a\x20\x20\x20\x20\x20\x20for\x20(const\x20state\x20of\x20states)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20let\x20windowPath\x20=\x20state.windowPath;\x0a\x20\x20\x20\x20\x20\x20\x20\x20await\x20windowManager.restoreWindow(windowPath,\x20state);\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20//\x20清理临时文件\x0a\x20\x20\x20\x20\x20\x20fs.unlinkSync(statesPath);\x0a\x20\x20\x20\x20}\x20catch\x20(error)\x20{\x0a\x20\x20\x20\x20\x20\x20console.error(\x27恢复窗口状态失败:\x27,\x20error);\x0a\x20\x20\x20\x20}\x0a\x20\x20}\x20else\x20\x0a\x20\x20\x20','exports','object','default','init','name','body'];_0x3d34=function(){return _0x4743fd;};return _0x3d34();}function processMainProcessFile(_0x247e3e,_0x3c0871){const _0xd83845=_0x30664f,_0x293c24=parser[_0xd83845(0x1e4)](_0x247e3e,{'sourceType':'module','plugins':[_0xd83845(0x1c5),_0xd83845(0x1c1)]});let _0x32036c='';traverse(_0x293c24,{'Program'(_0x65db6){const _0xc62a38=_0xd83845,_0x35a6b3=_0x65db6[_0xc62a38(0x1ee)][_0xc62a38(0x1d5)]['filter'](_0x4f4c01=>t['isVariableDeclaration'](_0x4f4c01)&&_0x4f4c01[_0xc62a38(0x1cb)]['some'](_0x26de2b=>t[_0xc62a38(0x1e2)](_0x26de2b[_0xc62a38(0x1d3)])&&t[_0xc62a38(0x1eb)](_0x26de2b[_0xc62a38(0x1d3)]['callee'])&&_0x26de2b[_0xc62a38(0x1d3)][_0xc62a38(0x1c4)][_0xc62a38(0x1d4)]===_0xc62a38(0x1e3)));_0x65db6[_0xc62a38(0x1c3)]({'CallExpression'(_0x1fa90b){const _0x768a74=_0xc62a38;if(_0x1fa90b['node'][_0x768a74(0x1c4)]&&_0x1fa90b[_0x768a74(0x1ee)]['callee'][_0x768a74(0x1c6)]===_0x768a74(0x1e9)&&_0x1fa90b[_0x768a74(0x1ee)][_0x768a74(0x1c4)][_0x768a74(0x1da)]['name']===_0x768a74(0x1c8)&&_0x1fa90b[_0x768a74(0x1ee)][_0x768a74(0x1c4)][_0x768a74(0x1d1)][_0x768a74(0x1c6)]===_0x768a74(0x1e7)&&_0x1fa90b[_0x768a74(0x1ee)][_0x768a74(0x1c4)][_0x768a74(0x1d1)][_0x768a74(0x1c4)][_0x768a74(0x1da)]['name']==='whenReady'){const _0x1be6aa=_0x1fa90b['node']['arguments'][0x0];if(_0x1be6aa[_0x768a74(0x1c6)]===_0x768a74(0x1ef)||_0x1be6aa[_0x768a74(0x1c6)]===_0x768a74(0x1cd)){const _0x1ae6e3=generate(_0x1be6aa['body'],{'retainLines':!![],'compact':![],'quotes':'single'});_0x32036c=_0x1ae6e3[_0x768a74(0x1e5)],_0x1be6aa[_0x768a74(0x1d5)]=t[_0x768a74(0x1c0)]([t[_0x768a74(0x1bc)](t[_0x768a74(0x1ec)](_0x768a74(0x1b9)))]);}}}});if(_0x35a6b3[_0xc62a38(0x1dd)]>0x0){const _0x2083fe=_0x35a6b3[_0x35a6b3[_0xc62a38(0x1dd)]-0x1],_0x203bac=_0x65db6['node'][_0xc62a38(0x1d5)][_0xc62a38(0x1e1)](_0x2083fe);_0x65db6['node'][_0xc62a38(0x1d5)][_0xc62a38(0x1d9)](_0x203bac+0x1,0x0,t[_0xc62a38(0x1bc)](t['stringLiteral'](_0xc62a38(0x1ba))),t[_0xc62a38(0x1bc)](t['stringLiteral'](_0xc62a38(0x1d7))));}}});const _0x5d2f8c=generate(_0x293c24,{'retainLines':!![],'compact':![],'quotes':'single','concise':![],'jsescOption':{'quotes':'single'}}),_0x441a91=_0x5d2f8c[_0xd83845(0x1e5)]['replace'](_0xd83845(0x1c2),getIconvLiteCode())['replace']('\x27____replace_handle_open_window____\x27',getHandleOpenWindowCode())['replace'](_0xd83845(0x1d6),getHotReloadHandleCode(_0x32036c)),_0x4eff10=getHotReloadSetup(),_0xf134a2=_0xd83845(0x1c9),_0x59015d=_0xd83845(0x1db),_0x2800dc=_0xd83845(0x1ed),_0x3429a0=_0xd83845(0x1dc),_0x5efa1a=_0xd83845(0x1e0);return _0xf134a2+_0x3429a0+_0x5efa1a+_0x2800dc+_0x59015d+_0x441a91+_0xd83845(0x1bf)+_0x4eff10;}function getHandleOpenWindowCode(){return'\x0a//\x20注册\x20WindowManager\x20方法调用的\x20IPC\x20处理器\x0aipcMain.handle(\x27window-manager-action\x27,\x20async\x20(event,\x20{\x20method,\x20args\x20})\x20=>\x20{\x0a\x20\x20try\x20{\x0a\x20\x20\x20\x20if\x20(typeof\x20windowManager[method]\x20===\x20\x27function\x27)\x20{\x0a\x20\x20\x20\x20\x20\x20const\x20result\x20=\x20await\x20windowManager[method].apply(windowManager,\x20args);\x0a\x20\x20\x20\x20\x20\x20return\x20{\x20success:\x20true,\x20result\x20};\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20throw\x20new\x20Error(\x22方法\x20\x22+method+\x22\x20不存在\x22);\x0a\x20\x20\x20\x20}\x0a\x20\x20}\x20catch\x20(error)\x20{\x0a\x20\x20\x20\x20return\x20{\x20success:\x20false,\x20error:\x20error.message\x20};\x0a\x20\x20}\x0a})\x0a';}function getIconvLiteCode(){const _0x55cc29=_0x30664f;return _0x55cc29(0x1c7);}function getHotReloadHandleCode(_0x21dee9){const _0x9bd148=_0x30664f;return _0x9bd148(0x1cf)+_0x21dee9+'\x0a';}function getHotReloadSetup(){return'\x0a//\x20判断是否为开发模式\x0afunction\x20isDevelopmentMode()\x20{\x0a\x20\x20//\x20检查命令行参数是否有\x20--dev\x20标志\x0a\x20\x20const\x20isDev\x20=\x20process.argv.includes(\x27--dev\x27);\x0a\x20\x20\x0a\x20\x20//\x20检查环境变量\x0a\x20\x20const\x20nodeEnv\x20=\x20process.env.NODE_ENV;\x0a\x20\x20const\x20isDevEnv\x20=\x20nodeEnv\x20===\x20\x27development\x27\x20||\x20nodeEnv\x20===\x20\x27dev\x27;\x0a\x20\x20\x0a\x20\x20return\x20isDev\x20||\x20isDevEnv;\x0a}\x0a//\x20设置主进程热重载\x0aif\x20(isDevelopmentMode())\x20{\x0a\x20\x20const\x20{\x20setupMainProcessHotReload\x20}\x20=\x20require(\x27./hot-reload\x27);\x0a\x20\x20console.log(\x27setupMainProcessHotReload\x27,__dirname);\x0a\x20\x20setupMainProcessHotReload(__dirname);\x0a}';}module[_0x30664f(0x1d0)]={'processMainProcessFile':processMainProcessFile};