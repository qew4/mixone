const _0x276045=_0x52c9;(function(_0x451617,_0x12860b){const _0x509a5f=_0x52c9,_0x58bac5=_0x451617();while(!![]){try{const _0x16d396=-parseInt(_0x509a5f(0xf4))/0x1*(parseInt(_0x509a5f(0xe9))/0x2)+-parseInt(_0x509a5f(0xfb))/0x3+-parseInt(_0x509a5f(0xf8))/0x4+parseInt(_0x509a5f(0xff))/0x5*(parseInt(_0x509a5f(0xdc))/0x6)+-parseInt(_0x509a5f(0x100))/0x7*(-parseInt(_0x509a5f(0xdf))/0x8)+parseInt(_0x509a5f(0xf5))/0x9*(-parseInt(_0x509a5f(0xe0))/0xa)+parseInt(_0x509a5f(0xde))/0xb;if(_0x16d396===_0x12860b)break;else _0x58bac5['push'](_0x58bac5['shift']());}catch(_0x2b81ed){_0x58bac5['push'](_0x58bac5['shift']());}}}(_0x36c2,0xc16d7));const parser=require(_0x276045(0x106)),traverse=require('@babel/traverse')[_0x276045(0xf6)],generate=require('@babel/generator')[_0x276045(0xf6)],t=require('@babel/types');function processMainProcessFile(_0x4f5116,_0x3cb994){const _0x294aaa=_0x276045,_0x529bbd=parser[_0x294aaa(0xfc)](_0x4f5116,{'sourceType':_0x294aaa(0xeb),'plugins':[_0x294aaa(0x10d),_0x294aaa(0xf1)]});let _0x5b9406='';traverse(_0x529bbd,{'Program'(_0x106949){const _0x3a4fe6=_0x294aaa,_0x499553=_0x106949[_0x3a4fe6(0x109)][_0x3a4fe6(0xfa)]['filter'](_0x5bc03a=>t[_0x3a4fe6(0xef)](_0x5bc03a)&&_0x5bc03a[_0x3a4fe6(0x107)]['some'](_0x42fc95=>t['isCallExpression'](_0x42fc95[_0x3a4fe6(0x101)])&&t[_0x3a4fe6(0xea)](_0x42fc95[_0x3a4fe6(0x101)][_0x3a4fe6(0x10a)])&&_0x42fc95[_0x3a4fe6(0x101)][_0x3a4fe6(0x10a)][_0x3a4fe6(0x10c)]===_0x3a4fe6(0x105)));_0x106949[_0x3a4fe6(0xe1)]({'CallExpression'(_0xb08128){const _0xab2347=_0x3a4fe6;if(_0xb08128[_0xab2347(0x109)][_0xab2347(0x10a)]&&_0xb08128[_0xab2347(0x109)]['callee'][_0xab2347(0xf3)]===_0xab2347(0x102)&&_0xb08128[_0xab2347(0x109)][_0xab2347(0x10a)][_0xab2347(0xf9)]['name']===_0xab2347(0xf7)&&_0xb08128[_0xab2347(0x109)][_0xab2347(0x10a)][_0xab2347(0xe3)]['type']==='CallExpression'&&_0xb08128[_0xab2347(0x109)]['callee']['object']['callee'][_0xab2347(0xf9)]['name']===_0xab2347(0xee)){const _0x17039a=_0xb08128['node'][_0xab2347(0x10f)][0x0];if(_0x17039a[_0xab2347(0xf3)]===_0xab2347(0x103)||_0x17039a[_0xab2347(0xf3)]===_0xab2347(0x104)){const _0x4bc8c7=generate(_0x17039a[_0xab2347(0xfa)],{'retainLines':!![],'compact':![],'quotes':'single'});_0x5b9406=_0x4bc8c7[_0xab2347(0xf2)],_0x17039a['body']=t[_0xab2347(0xe8)]([t[_0xab2347(0xe4)](t[_0xab2347(0x110)]('____replace_app_ready_code____'))]);}}}});if(_0x499553['length']>0x0){const _0x5be97f=_0x499553[_0x499553[_0x3a4fe6(0xf0)]-0x1],_0x4e7b5f=_0x106949['node'][_0x3a4fe6(0xfa)][_0x3a4fe6(0xec)](_0x5be97f);_0x106949['node']['body']['splice'](_0x4e7b5f+0x1,0x0,t['expressionStatement'](t[_0x3a4fe6(0x110)](_0x3a4fe6(0x10b))),t[_0x3a4fe6(0xe4)](t[_0x3a4fe6(0x110)](_0x3a4fe6(0x10e))));}}});const _0x21a0a2=generate(_0x529bbd,{'retainLines':!![],'compact':![],'quotes':'single','concise':![],'jsescOption':{'quotes':_0x294aaa(0xfd)}}),_0x41ceaa=_0x21a0a2[_0x294aaa(0xf2)][_0x294aaa(0xdd)]('\x27____replace_iconv_lite____\x27',getIconvLiteCode())[_0x294aaa(0xdd)](_0x294aaa(0xfe),getHandleOpenWindowCode())[_0x294aaa(0xdd)](_0x294aaa(0xe2),getHotReloadHandleCode(_0x5b9406)),_0x600d40=getHotReloadSetup(),_0x2ff946=_0x294aaa(0xed),_0x28f724=_0x294aaa(0xe6),_0x1d5243=_0x294aaa(0xe7),_0x3e243d='const\x20fs\x20=\x20require(\x27fs\x27);\x0a',_0x4b8889='const\x20{\x20ipcMain\x20}\x20=\x20require(\x27electron\x27);\x0a';return _0x2ff946+_0x3e243d+_0x4b8889+_0x1d5243+_0x28f724+_0x41ceaa+'\x0aregisterMainFunctions();\x0a'+_0x600d40;}function getHandleOpenWindowCode(){return'\x0a//\x20注册\x20WindowManager\x20方法调用的\x20IPC\x20处理器\x0aipcMain.handle(\x27window-manager-action\x27,\x20async\x20(event,\x20{\x20method,\x20args\x20})\x20=>\x20{\x0a\x20\x20try\x20{\x0a\x20\x20\x20\x20if\x20(typeof\x20windowManager[method]\x20===\x20\x27function\x27)\x20{\x0a\x20\x20\x20\x20\x20\x20const\x20result\x20=\x20await\x20windowManager[method].apply(windowManager,\x20args);\x0a\x20\x20\x20\x20\x20\x20return\x20{\x20success:\x20true,\x20result\x20};\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20throw\x20new\x20Error(\x22方法\x20\x22+method+\x22\x20不存在\x22);\x0a\x20\x20\x20\x20}\x0a\x20\x20}\x20catch\x20(error)\x20{\x0a\x20\x20\x20\x20return\x20{\x20success:\x20false,\x20error:\x20error.message\x20};\x0a\x20\x20}\x0a})\x0a';}function getIconvLiteCode(){const _0x40aa6f=_0x276045;return _0x40aa6f(0xe5);}function getHotReloadHandleCode(_0x21165f){return'\x0a\x20\x20setupConsoleRedirect(isDevelopmentMode());\x0a\x20\x20//\x20检查是否有窗口状态需要恢复\x0a\x20\x20const\x20statesArg\x20=\x20process.argv.find(arg\x20=>\x20arg.startsWith(\x27--window-states=\x27));\x0a\x20\x20if\x20(statesArg)\x20{\x0a\x20\x20\x20\x20try\x20{\x0a\x20\x20\x20\x20\x20\x20const\x20statesPath\x20=\x20statesArg.split(\x27=\x27)[1];\x0a\x20\x20\x20\x20\x20\x20let\x20content\x20=\x20fs.readFileSync(statesPath,\x20\x27utf-8\x27);\x0a\x20\x20\x20\x20\x20\x20console.log(\x27content:\x27,\x20content);\x0a\x20\x20\x20\x20\x20\x20const\x20states\x20=\x20content.split(\x22------\x22).map(item\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20let\x20_item\x20=\x20item.trim();\x0a\x20\x20\x20\x20\x20\x20\x20\x20if(!_item){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return\x20{}\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20JSON.parse(_item)\x0a\x20\x20\x20\x20\x20\x20}).reverse();\x0a\x20\x20\x20\x20\x20\x20//\x20恢复所有窗口\x0a\x20\x20\x20\x20\x20\x20for\x20(const\x20state\x20of\x20states)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20let\x20windowPath\x20=\x20state.windowPath;\x0a\x20\x20\x20\x20\x20\x20\x20\x20await\x20windowManager.restoreWindow(windowPath,\x20state);\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20//\x20清理临时文件\x0a\x20\x20\x20\x20\x20\x20fs.unlinkSync(statesPath);\x0a\x20\x20\x20\x20}\x20catch\x20(error)\x20{\x0a\x20\x20\x20\x20\x20\x20console.error(\x27恢复窗口状态失败:\x27,\x20error);\x0a\x20\x20\x20\x20}\x0a\x20\x20}\x20else\x20\x0a\x20\x20\x20'+_0x21165f+'\x0a';}function _0x36c2(){const _0xa82677=['typescript','code','type','1682oOYfXg','210510faiwua','default','then','5153792zRQFtx','property','body','2866707KLSXyL','parse','single','\x27____replace_handle_open_window____\x27','18815vdknzY','21IteSJv','init','MemberExpression','ArrowFunctionExpression','FunctionExpression','require','@babel/parser','declarations','\x0a//\x20判断是否为开发模式\x0afunction\x20isDevelopmentMode()\x20{\x0a\x20\x20//\x20检查命令行参数是否有\x20--dev\x20标志\x0a\x20\x20const\x20isDev\x20=\x20process.argv.includes(\x27--dev\x27);\x0a\x20\x20\x0a\x20\x20//\x20检查环境变量\x0a\x20\x20const\x20nodeEnv\x20=\x20process.env.NODE_ENV;\x0a\x20\x20const\x20isDevEnv\x20=\x20nodeEnv\x20===\x20\x27development\x27\x20||\x20nodeEnv\x20===\x20\x27dev\x27;\x0a\x20\x20\x0a\x20\x20return\x20isDev\x20||\x20isDevEnv;\x0a}\x0a//\x20设置主进程热重载\x0aif\x20(isDevelopmentMode())\x20{\x0a\x20\x20const\x20{\x20setupMainProcessHotReload\x20}\x20=\x20require(\x27./hot-reload\x27);\x0a\x20\x20//\x20console.log(\x27setupMainProcessHotReload\x27,__dirname);\x0a\x20\x20setupMainProcessHotReload(__dirname);\x0a}','node','callee','____replace_handle_open_window____','name','jsx','____replace_iconv_lite____','arguments','stringLiteral','138wrsodI','replace','29131542hHZTQu','2609976UllmAC','140utkeXK','traverse','\x27____replace_app_ready_code____\x27','object','expressionStatement','const\x20iconv\x20=\x20require(\x27iconv-lite\x27);\x0a\x0a//\x20过滤特殊字符，只保留中文和普通字符\x0afunction\x20filterString(str)\x20{\x0a\x20\x20return\x20str.replace(/[\x5cuD800-\x5cuDBFF][\x5cuDC00-\x5cuDFFF]|[^\x5cx00-\x5cx7F\x5cu4E00-\x5cu9FFF]/g,\x20\x27\x27);\x0a}\x0a\x0a//\x20重写控制台输出方法\x0aconsole.log\x20=\x20(...args)\x20=>\x20{\x0a\x20\x20const\x20message\x20=\x20args.map(arg\x20=>\x20{\x0a\x20\x20\x20\x20if\x20(typeof\x20arg\x20===\x20\x27string\x27)\x20{\x0a\x20\x20\x20\x20\x20\x20return\x20filterString(arg);\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20return\x20arg;\x0a\x20\x20}).join(\x27\x20\x27);\x0a\x20\x20process.stdout.write(iconv.encode(message\x20+\x20\x27\x5cn\x27,\x20\x27gb2312\x27));\x0a}\x0a\x0aconsole.error\x20=\x20(...args)\x20=>\x20{\x0a\x20\x20const\x20message\x20=\x20args.map(arg\x20=>\x20{\x0a\x20\x20\x20\x20if\x20(typeof\x20arg\x20===\x20\x27string\x27)\x20{\x0a\x20\x20\x20\x20\x20\x20return\x20filterString(arg);\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20return\x20arg;\x0a\x20\x20}).join(\x27\x20\x27);\x0a\x20\x20process.stderr.write(iconv.encode(message\x20+\x20\x27\x5cn\x27,\x20\x27gb2312\x27));\x0a}','const\x20{\x20setupConsoleRedirect\x20}\x20=\x20require(\x27./reset_console\x27);\x0a','const\x20windowManager\x20=\x20require(\x27./window-manager\x27);\x0a','blockStatement','416MrUyav','isIdentifier','module','indexOf','const\x20{\x20registerMainFunctions\x20}\x20=\x20require(\x27./fn\x27);\x0a','whenReady','isVariableDeclaration','length'];_0x36c2=function(){return _0xa82677;};return _0x36c2();}function getHotReloadSetup(){const _0x145881=_0x276045;return _0x145881(0x108);}function _0x52c9(_0x5bfc33,_0x2e330e){const _0x36c273=_0x36c2();return _0x52c9=function(_0x52c9ab,_0xd7f3dd){_0x52c9ab=_0x52c9ab-0xdc;let _0x187c50=_0x36c273[_0x52c9ab];return _0x187c50;},_0x52c9(_0x5bfc33,_0x2e330e);}module['exports']={'processMainProcessFile':processMainProcessFile};