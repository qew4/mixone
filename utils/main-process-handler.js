const _0x3777ef=_0x3d77;function _0x19e1(){const _0x4f6e36=['8625aXajRL','expressionStatement','2687130awbHVf','require','name','101360EXpTdq','typescript','then','6082464bRyTFz','1361310vFbFfX','239985bKptMp','\x0a//\x20判断是否为开发模式\x0afunction\x20isDevelopmentMode()\x20{\x0a\x20\x20//\x20检查命令行参数是否有\x20--dev\x20标志\x0a\x20\x20const\x20isDev\x20=\x20process.argv.includes(\x27--dev\x27);\x0a\x20\x20\x0a\x20\x20//\x20检查环境变量\x0a\x20\x20const\x20nodeEnv\x20=\x20process.env.NODE_ENV;\x0a\x20\x20const\x20isDevEnv\x20=\x20nodeEnv\x20===\x20\x27development\x27\x20||\x20nodeEnv\x20===\x20\x27dev\x27;\x0a\x20\x20\x0a\x20\x20return\x20isDev\x20||\x20isDevEnv;\x0a}\x0a//\x20设置主进程热重载\x0aif\x20(isDevelopmentMode())\x20{\x0a\x20\x20const\x20{\x20setupMainProcessHotReload\x20}\x20=\x20require(\x27./hot-reload\x27);\x0a\x20\x20console.log(\x27setupMainProcessHotReload\x27,__dirname);\x0a\x20\x20setupMainProcessHotReload(__dirname);\x0a}','property','init','replace','node','ArrowFunctionExpression','jsx','length','stringLiteral','\x0aregisterMainFunctions();\x0a','single','parse','splice','____replace_app_ready_code____','236kOIPWi','exports','314632FAZZwy','27fzwBLa','whenReady','type','@babel/parser','indexOf','isCallExpression','MemberExpression','13tSdiBU','isIdentifier','callee','11RUApQF','2WdEWxR','filter','const\x20fs\x20=\x20require(\x27fs\x27);\x0a','FunctionExpression','\x27____replace_handle_open_window____\x27','module','72EsQZGa','const\x20{\x20setupConsoleRedirect\x20}\x20=\x20require(\x27./reset_console\x27);\x0a','code','body','default','object','CallExpression','some','____replace_iconv_lite____','\x27____replace_app_ready_code____\x27','const\x20{\x20ipcMain\x20}\x20=\x20require(\x27electron\x27);\x0a','const\x20windowManager\x20=\x20require(\x27./window-manager\x27);\x0a'];_0x19e1=function(){return _0x4f6e36;};return _0x19e1();}(function(_0x54adf0,_0x38d13d){const _0x52e88b=_0x3d77,_0x2c32da=_0x54adf0();while(!![]){try{const _0x658686=-parseInt(_0x52e88b(0x144))/0x1*(parseInt(_0x52e88b(0x161))/0x2)+-parseInt(_0x52e88b(0x143))/0x3+parseInt(_0x52e88b(0x153))/0x4*(parseInt(_0x52e88b(0x13a))/0x5)+-parseInt(_0x52e88b(0x167))/0x6*(-parseInt(_0x52e88b(0x13f))/0x7)+-parseInt(_0x52e88b(0x155))/0x8*(parseInt(_0x52e88b(0x156))/0x9)+-parseInt(_0x52e88b(0x13c))/0xa*(-parseInt(_0x52e88b(0x160))/0xb)+-parseInt(_0x52e88b(0x142))/0xc*(-parseInt(_0x52e88b(0x15d))/0xd);if(_0x658686===_0x38d13d)break;else _0x2c32da['push'](_0x2c32da['shift']());}catch(_0x27ca6b){_0x2c32da['push'](_0x2c32da['shift']());}}}(_0x19e1,0x3a712));const parser=require(_0x3777ef(0x159)),traverse=require('@babel/traverse')[_0x3777ef(0x16b)],generate=require('@babel/generator')['default'],t=require('@babel/types');function processMainProcessFile(_0x3bbea7,_0xc6cc38){const _0x5c1278=_0x3777ef,_0x439b80=parser[_0x5c1278(0x150)](_0x3bbea7,{'sourceType':_0x5c1278(0x166),'plugins':[_0x5c1278(0x14b),_0x5c1278(0x140)]});let _0x494e6e='';traverse(_0x439b80,{'Program'(_0x11f7db){const _0x2f911e=_0x5c1278,_0x561771=_0x11f7db['node'][_0x2f911e(0x16a)][_0x2f911e(0x162)](_0x459e8c=>t['isVariableDeclaration'](_0x459e8c)&&_0x459e8c['declarations'][_0x2f911e(0x16e)](_0x2a990a=>t[_0x2f911e(0x15b)](_0x2a990a[_0x2f911e(0x147)])&&t[_0x2f911e(0x15e)](_0x2a990a[_0x2f911e(0x147)][_0x2f911e(0x15f)])&&_0x2a990a[_0x2f911e(0x147)][_0x2f911e(0x15f)][_0x2f911e(0x13e)]===_0x2f911e(0x13d)));_0x11f7db['traverse']({'CallExpression'(_0x3335e0){const _0x5e8b35=_0x2f911e;if(_0x3335e0[_0x5e8b35(0x149)][_0x5e8b35(0x15f)]&&_0x3335e0[_0x5e8b35(0x149)]['callee'][_0x5e8b35(0x158)]===_0x5e8b35(0x15c)&&_0x3335e0[_0x5e8b35(0x149)][_0x5e8b35(0x15f)]['property'][_0x5e8b35(0x13e)]===_0x5e8b35(0x141)&&_0x3335e0[_0x5e8b35(0x149)][_0x5e8b35(0x15f)][_0x5e8b35(0x16c)]['type']===_0x5e8b35(0x16d)&&_0x3335e0[_0x5e8b35(0x149)]['callee'][_0x5e8b35(0x16c)][_0x5e8b35(0x15f)][_0x5e8b35(0x146)]['name']===_0x5e8b35(0x157)){const _0xd93c44=_0x3335e0[_0x5e8b35(0x149)]['arguments'][0x0];if(_0xd93c44['type']===_0x5e8b35(0x14a)||_0xd93c44[_0x5e8b35(0x158)]===_0x5e8b35(0x164)){const _0x34f9a6=generate(_0xd93c44[_0x5e8b35(0x16a)],{'retainLines':!![],'compact':![],'quotes':'single'});_0x494e6e=_0x34f9a6[_0x5e8b35(0x169)],_0xd93c44[_0x5e8b35(0x16a)]=t['blockStatement']([t['expressionStatement'](t[_0x5e8b35(0x14d)](_0x5e8b35(0x152)))]);}}}});if(_0x561771[_0x2f911e(0x14c)]>0x0){const _0x479ea8=_0x561771[_0x561771[_0x2f911e(0x14c)]-0x1],_0x341a5a=_0x11f7db['node'][_0x2f911e(0x16a)][_0x2f911e(0x15a)](_0x479ea8);_0x11f7db[_0x2f911e(0x149)][_0x2f911e(0x16a)][_0x2f911e(0x151)](_0x341a5a+0x1,0x0,t[_0x2f911e(0x13b)](t[_0x2f911e(0x14d)]('____replace_handle_open_window____')),t['expressionStatement'](t[_0x2f911e(0x14d)](_0x2f911e(0x16f))));}}});const _0x219403=generate(_0x439b80,{'retainLines':!![],'compact':![],'quotes':_0x5c1278(0x14f),'concise':![],'jsescOption':{'quotes':_0x5c1278(0x14f)}}),_0x12241f=_0x219403['code'][_0x5c1278(0x148)]('\x27____replace_iconv_lite____\x27',getIconvLiteCode())[_0x5c1278(0x148)](_0x5c1278(0x165),getHandleOpenWindowCode())[_0x5c1278(0x148)](_0x5c1278(0x170),getHotReloadHandleCode(_0x494e6e)),_0x2b4465=getHotReloadSetup(),_0x5519b8='const\x20{\x20registerMainFunctions\x20}\x20=\x20require(\x27./fn\x27);\x0a',_0x43d162=_0x5c1278(0x168),_0xfae47=_0x5c1278(0x139),_0x3142f8=_0x5c1278(0x163),_0x1a83f2=_0x5c1278(0x171);return _0x5519b8+_0x3142f8+_0x1a83f2+_0xfae47+_0x43d162+_0x12241f+_0x5c1278(0x14e)+_0x2b4465;}function getHandleOpenWindowCode(){return'\x0a//\x20注册\x20WindowManager\x20方法调用的\x20IPC\x20处理器\x0aipcMain.handle(\x27window-manager-action\x27,\x20async\x20(event,\x20{\x20method,\x20args\x20})\x20=>\x20{\x0a\x20\x20try\x20{\x0a\x20\x20\x20\x20if\x20(typeof\x20windowManager[method]\x20===\x20\x27function\x27)\x20{\x0a\x20\x20\x20\x20\x20\x20const\x20result\x20=\x20await\x20windowManager[method].apply(windowManager,\x20args);\x0a\x20\x20\x20\x20\x20\x20return\x20{\x20success:\x20true,\x20result\x20};\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20throw\x20new\x20Error(\x22方法\x20\x22+method+\x22\x20不存在\x22);\x0a\x20\x20\x20\x20}\x0a\x20\x20}\x20catch\x20(error)\x20{\x0a\x20\x20\x20\x20return\x20{\x20success:\x20false,\x20error:\x20error.message\x20};\x0a\x20\x20}\x0a})\x0a';}function getIconvLiteCode(){return'const\x20iconv\x20=\x20require(\x27iconv-lite\x27);\x0a\x0a//\x20过滤特殊字符，只保留中文和普通字符\x0afunction\x20filterString(str)\x20{\x0a\x20\x20return\x20str.replace(/[\x5cuD800-\x5cuDBFF][\x5cuDC00-\x5cuDFFF]|[^\x5cx00-\x5cx7F\x5cu4E00-\x5cu9FFF]/g,\x20\x27\x27);\x0a}\x0a\x0a//\x20重写控制台输出方法\x0aconsole.log\x20=\x20(...args)\x20=>\x20{\x0a\x20\x20const\x20message\x20=\x20args.map(arg\x20=>\x20{\x0a\x20\x20\x20\x20if\x20(typeof\x20arg\x20===\x20\x27string\x27)\x20{\x0a\x20\x20\x20\x20\x20\x20return\x20filterString(arg);\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20return\x20arg;\x0a\x20\x20}).join(\x27\x20\x27);\x0a\x20\x20process.stdout.write(iconv.encode(message\x20+\x20\x27\x5cn\x27,\x20\x27gb2312\x27));\x0a}\x0a\x0aconsole.error\x20=\x20(...args)\x20=>\x20{\x0a\x20\x20const\x20message\x20=\x20args.map(arg\x20=>\x20{\x0a\x20\x20\x20\x20if\x20(typeof\x20arg\x20===\x20\x27string\x27)\x20{\x0a\x20\x20\x20\x20\x20\x20return\x20filterString(arg);\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20return\x20arg;\x0a\x20\x20}).join(\x27\x20\x27);\x0a\x20\x20process.stderr.write(iconv.encode(message\x20+\x20\x27\x5cn\x27,\x20\x27gb2312\x27));\x0a}';}function getHotReloadHandleCode(_0x216bae){return'\x0a\x20\x20setupConsoleRedirect(isDevelopmentMode());\x0a\x20\x20//\x20检查是否有窗口状态需要恢复\x0a\x20\x20const\x20statesArg\x20=\x20process.argv.find(arg\x20=>\x20arg.startsWith(\x27--window-states=\x27));\x0a\x20\x20if\x20(statesArg)\x20{\x0a\x20\x20\x20\x20try\x20{\x0a\x20\x20\x20\x20\x20\x20const\x20statesPath\x20=\x20statesArg.split(\x27=\x27)[1];\x0a\x20\x20\x20\x20\x20\x20let\x20content\x20=\x20fs.readFileSync(statesPath,\x20\x27utf-8\x27);\x0a\x20\x20\x20\x20\x20\x20console.log(\x27content:\x27,\x20content);\x0a\x20\x20\x20\x20\x20\x20const\x20states\x20=\x20content.split(\x22------\x22).map(item\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20let\x20_item\x20=\x20item.trim();\x0a\x20\x20\x20\x20\x20\x20\x20\x20if(!_item){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return\x20{}\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20JSON.parse(_item)\x0a\x20\x20\x20\x20\x20\x20}).reverse();\x0a\x20\x20\x20\x20\x20\x20//\x20恢复所有窗口\x0a\x20\x20\x20\x20\x20\x20for\x20(const\x20state\x20of\x20states)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20let\x20windowPath\x20=\x20state.windowPath;\x0a\x20\x20\x20\x20\x20\x20\x20\x20await\x20windowManager.restoreWindow(windowPath,\x20state);\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20//\x20清理临时文件\x0a\x20\x20\x20\x20\x20\x20fs.unlinkSync(statesPath);\x0a\x20\x20\x20\x20}\x20catch\x20(error)\x20{\x0a\x20\x20\x20\x20\x20\x20console.error(\x27恢复窗口状态失败:\x27,\x20error);\x0a\x20\x20\x20\x20}\x0a\x20\x20}\x20else\x20\x0a\x20\x20\x20'+_0x216bae+'\x0a';}function getHotReloadSetup(){const _0x58c33a=_0x3777ef;return _0x58c33a(0x145);}function _0x3d77(_0x1d67fa,_0x38476d){const _0x19e129=_0x19e1();return _0x3d77=function(_0x3d7759,_0x5307bc){_0x3d7759=_0x3d7759-0x139;let _0x3d1b02=_0x19e129[_0x3d7759];return _0x3d1b02;},_0x3d77(_0x1d67fa,_0x38476d);}module[_0x3777ef(0x154)]={'processMainProcessFile':processMainProcessFile};