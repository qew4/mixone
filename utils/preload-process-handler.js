const _0x29fdda=_0x2042;(function(_0x53fab6,_0x1369fa){const _0x328a3c=_0x2042,_0x4088b7=_0x53fab6();while(!![]){try{const _0x51a579=-parseInt(_0x328a3c(0x94))/0x1+-parseInt(_0x328a3c(0x93))/0x2*(parseInt(_0x328a3c(0x8e))/0x3)+-parseInt(_0x328a3c(0xa1))/0x4+-parseInt(_0x328a3c(0x97))/0x5+-parseInt(_0x328a3c(0x90))/0x6+-parseInt(_0x328a3c(0x95))/0x7+parseInt(_0x328a3c(0xa0))/0x8;if(_0x51a579===_0x1369fa)break;else _0x4088b7['push'](_0x4088b7['shift']());}catch(_0x55c260){_0x4088b7['push'](_0x4088b7['shift']());}}}(_0x3f20,0x42709));const fs=require('fs'),path=require('path'),{generateDefaultPreloadScript}=require('./static-file-copier'),{generateMergedPreload}=require(_0x29fdda(0x8b));function checkWindowPreloadAndCopy(_0x2371f2,_0x4f0186,_0x1a89cc,_0xa279ae=!![]){const _0x3606ac=_0x29fdda;_0xa279ae&&console['log']('🔍\x20检查窗口目录是否需要\x20preload.js\x20文件...');const _0x543d56=path['join'](_0x2371f2,_0x3606ac(0xa8)),_0x21feee=path[_0x3606ac(0x96)](_0x2371f2,_0x3606ac(0x9d));if(fs['existsSync'](_0x21feee)){const _0x3952fe=fs[_0x3606ac(0x92)](_0x21feee);for(const _0x3f55b5 of _0x3952fe){const _0x566ba2=path[_0x3606ac(0x96)](_0x21feee,_0x3f55b5);if(_0x3f55b5[_0x3606ac(0xa2)]('.'))continue;if(fs[_0x3606ac(0x8f)](_0x566ba2)['isDirectory']()){const _0x192c26=path[_0x3606ac(0x96)](_0x566ba2,'preload.js'),_0x4f69b4=getNormalizedOutPath(_0x2371f2,_0x4f0186,'windows/'+_0x3f55b5),_0x1a2577=path[_0x3606ac(0x96)](_0x4f69b4,'preload.js');if(!fs[_0x3606ac(0x99)](_0x192c26)){!fs[_0x3606ac(0x99)](_0x4f69b4)&&fs[_0x3606ac(0x9f)](_0x4f69b4,{'recursive':!![]});let _0xb3feab=generateDefaultPreloadScript(_0x1a89cc,_0x4f0186),_0x319cc6;if(fs[_0x3606ac(0x99)](_0x543d56)){const _0x1a8bc9=fs[_0x3606ac(0x9b)](_0x543d56,'utf-8');_0x319cc6=generateMergedPreload(_0xb3feab,_0x1a8bc9);}else _0x319cc6=_0xb3feab;fs['writeFileSync'](_0x1a2577,_0x319cc6);const _0x148558=path[_0x3606ac(0x96)](_0x1a89cc,_0x3606ac(0x9c),_0x3606ac(0xa3)),_0x4e7967=path[_0x3606ac(0x96)](_0x4f69b4,_0x3606ac(0xa3));fs[_0x3606ac(0x99)](_0x148558)&&(fs[_0x3606ac(0xa9)](_0x148558,_0x4e7967),console[_0x3606ac(0x91)](_0x3606ac(0x8d)+path[_0x3606ac(0xa5)](_0x2371f2,_0x4e7967))),_0xa279ae&&console[_0x3606ac(0x91)]('✅\x20已将根\x20preload.js\x20复制到窗口输出目录:\x20'+path[_0x3606ac(0xa5)](_0x2371f2,_0x1a2577));}}}}}function getNormalizedOutPath(_0x12aab9,_0x388098,_0x2255c5){const _0x5cc119=_0x29fdda;if(_0x2255c5[_0x5cc119(0x9a)](_0x5cc119(0x9e))||_0x2255c5[_0x5cc119(0x9a)]('out\x5c'))return path[_0x5cc119(0x96)](_0x12aab9,_0x2255c5);return path['join'](_0x388098,_0x2255c5);}function writeDefaultPreloadFileWhenDeleted(_0x3ab95f,_0x5e16ae,_0x237eb9,_0x5528fa){const _0x15f77d=_0x29fdda,_0x18bc06=generateDefaultPreloadScript(_0x3ab95f,_0x5e16ae);fs['writeFileSync'](_0x237eb9,_0x18bc06),console['log'](_0x15f77d(0xa4)+_0x5528fa);}function _0x2042(_0x1431b7,_0x1a38e5){const _0x3f20ce=_0x3f20();return _0x2042=function(_0x204274,_0x57c2b7){_0x204274=_0x204274-0x8a;let _0x13e5fd=_0x3f20ce[_0x204274];return _0x13e5fd;},_0x2042(_0x1431b7,_0x1a38e5);}function isWindowDirectory(_0x356917,_0x1695f3){const _0x229ee8=_0x29fdda;return _0x1695f3===_0x229ee8(0x9d)||_0x1695f3['endsWith'](_0x229ee8(0x98));}function _0x3f20(){const _0x4e5647=['relative','writeFileSync','✅\x20成功处理\x20preload.js:\x20','preload.js','copyFileSync','✅\x20已完成窗口目录处理:\x20','🔍\x20检查窗口目录是否需要\x20preload.js\x20文件...','./preload-merger','utf-8','📋\x20复制\x20window-controller.js\x20到窗口目录:\x20','93cDlMhQ','statSync','226410PYJGfB','log','readdirSync','19164egPxdL','197299stRLwW','1410045OkCOpe','join','478780iwefGY','-window','existsSync','startsWith','readFileSync','code','windows','out/','mkdirSync','13078032RlEtyH','2133400kTGbwB','includes','window-controller.js','✅\x20成功处理已存在的\x20preload.js:\x20'];_0x3f20=function(){return _0x4e5647;};return _0x3f20();}function processWindowDirectory(_0x3049d5,_0x53c4c8,_0x4be80a,_0x455f0d,_0x1b99ec){const _0x5f3df7=_0x29fdda,_0x37a046=path[_0x5f3df7(0x96)](_0x3049d5,_0x5f3df7(0xa8)),_0x9dfe39=path[_0x5f3df7(0xa5)](_0x3049d5,_0x455f0d),_0x9fe5d7=getNormalizedOutPath(_0x3049d5,_0x53c4c8,_0x9dfe39),_0x61397e=path['join'](_0x455f0d,_0x5f3df7(0xa8)),_0x49eb44=path['join'](_0x9fe5d7,'preload.js'),_0x3a1f63=generateDefaultPreloadScript(_0x4be80a,_0x53c4c8);let _0x5cd871=_0x3a1f63;if(fs['existsSync'](_0x61397e)){const _0x3ab2f5=fs[_0x5f3df7(0x9b)](_0x61397e,_0x5f3df7(0x8c));_0x5cd871=generateMergedPreload(_0x3a1f63,_0x3ab2f5);}if(fs[_0x5f3df7(0x99)](_0x37a046)){const _0x21a3fc=fs[_0x5f3df7(0x9b)](_0x37a046,'utf-8');_0x5cd871=generateMergedPreload(_0x5cd871,_0x21a3fc);}fs[_0x5f3df7(0xa6)](_0x49eb44,_0x5cd871),console[_0x5f3df7(0x91)](_0x5f3df7(0xa7)+_0x9dfe39);const _0x171a95=path[_0x5f3df7(0x96)](_0x4be80a,'code',_0x5f3df7(0xa3)),_0x1c89e0=path[_0x5f3df7(0x96)](_0x9fe5d7,_0x5f3df7(0xa3));fs['existsSync'](_0x171a95)&&(fs[_0x5f3df7(0xa9)](_0x171a95,_0x1c89e0),console[_0x5f3df7(0x91)](_0x5f3df7(0x8d)+path[_0x5f3df7(0xa5)](_0x3049d5,_0x1c89e0))),_0x1b99ec&&console[_0x5f3df7(0x91)](_0x5f3df7(0xaa)+_0x9dfe39);}function findAndProcessWindowDirs(_0x49ad80,_0x30882e,_0x314946,_0x4b4076,_0x464cda){const _0x3857df=_0x29fdda,_0x1d3ea7=fs[_0x3857df(0x92)](_0x4b4076);for(const _0x2f1418 of _0x1d3ea7){const _0xea49ef=path[_0x3857df(0x96)](_0x4b4076,_0x2f1418);if(!fs['statSync'](_0xea49ef)['isDirectory']()||_0x2f1418['startsWith']('.'))continue;isWindowDirectory(_0xea49ef,_0x2f1418)&&processWindowDirectory(_0x49ad80,_0x30882e,_0x314946,_0xea49ef,_0x464cda),findAndProcessWindowDirs(_0x49ad80,_0x30882e,_0x314946,_0xea49ef,_0x464cda);}}function checkWindowPreloadAndCopy(_0x54e014,_0x30c741,_0x5082b5,_0x27b0d4=!![]){const _0x5b9ee7=_0x29fdda;_0x27b0d4&&console['log'](_0x5b9ee7(0x8a));const _0x4d1dbb=path['join'](_0x54e014,_0x5b9ee7(0x9d));fs['existsSync'](_0x4d1dbb)&&(processWindowDirectory(_0x54e014,_0x30c741,_0x5082b5,_0x4d1dbb,_0x27b0d4),findAndProcessWindowDirs(_0x54e014,_0x30c741,_0x5082b5,_0x4d1dbb,_0x27b0d4));}module['exports']={'checkWindowPreloadAndCopy':checkWindowPreloadAndCopy,'writeDefaultPreloadFileWhenDeleted':writeDefaultPreloadFileWhenDeleted};