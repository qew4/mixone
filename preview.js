const _0x38df3a=_0x448a;(function(_0x5074b8,_0x505240){const _0x4864b7=_0x448a,_0x47a905=_0x5074b8();while(!![]){try{const _0x34d5f0=-parseInt(_0x4864b7(0x18a))/0x1*(-parseInt(_0x4864b7(0x192))/0x2)+parseInt(_0x4864b7(0x18b))/0x3*(-parseInt(_0x4864b7(0x1cc))/0x4)+-parseInt(_0x4864b7(0x1b3))/0x5*(parseInt(_0x4864b7(0x1b8))/0x6)+parseInt(_0x4864b7(0x18c))/0x7+-parseInt(_0x4864b7(0x1b4))/0x8*(-parseInt(_0x4864b7(0x1a3))/0x9)+-parseInt(_0x4864b7(0x198))/0xa+-parseInt(_0x4864b7(0x1d1))/0xb*(-parseInt(_0x4864b7(0x1b6))/0xc);if(_0x34d5f0===_0x505240)break;else _0x47a905['push'](_0x47a905['shift']());}catch(_0x37bb7c){_0x47a905['push'](_0x47a905['shift']());}}}(_0x2ae8,0x5e403));const {spawnSync}=require(_0x38df3a(0x1ae)),path=require(_0x38df3a(0x19b)),fs=require('fs'),{exec}=require(_0x38df3a(0x1ae)),express=require('express'),outDir=path[_0x38df3a(0x1a5)](__dirname,'..',_0x38df3a(0x1cb)),distDir=path[_0x38df3a(0x1a5)](outDir,_0x38df3a(0x19f),_0x38df3a(0x18e)),packageJson=JSON[_0x38df3a(0x1a7)](fs[_0x38df3a(0x1b5)](path[_0x38df3a(0x1a5)](__dirname,'..','package.json'),'utf-8')),args=process['argv'][_0x38df3a(0x1ba)](0x2),isElectron=args[_0x38df3a(0x1bd)]('--electron'),isWeb=args[_0x38df3a(0x1bd)]('--web'),isStartElectron=args[_0x38df3a(0x1bd)](_0x38df3a(0x1a9)),isStartWeb=args['includes'](_0x38df3a(0x1ca)),portArg=args[_0x38df3a(0x1ac)](_0x13642e=>_0x13642e[_0x38df3a(0x18f)](_0x38df3a(0x1a4))),port=portArg?parseInt(portArg[_0x38df3a(0x1bf)]('=')[0x1]):0x1496,versionArg=args[_0x38df3a(0x1ac)](_0x26e103=>_0x26e103['startsWith'](_0x38df3a(0x19d))),versionName=versionArg?'v'+versionArg[_0x38df3a(0x1bf)]('=')[0x1]:'v'+packageJson[_0x38df3a(0x1a0)],webDistDir=path['join'](__dirname,'..','dist',_0x38df3a(0x1c3),versionName);versionArg&&!fs['existsSync'](webDistDir)&&(console[_0x38df3a(0x189)](_0x38df3a(0x18d)+versionName+_0x38df3a(0x1b0)),console[_0x38df3a(0x1bc)]('📂\x20请检查目录:\x20'+webDistDir),process[_0x38df3a(0x1be)](0x1));function runBuild(){const _0x1abbdd=_0x38df3a;console['log'](_0x1abbdd(0x193));const _0x297bf7=spawnSync('node',['scripts/build.js','--build'],{'stdio':'inherit','shell':!![],'cwd':path[_0x1abbdd(0x1a5)](__dirname,'..')});_0x297bf7[_0x1abbdd(0x195)]!==0x0&&(console[_0x1abbdd(0x189)](_0x1abbdd(0x1c4)),process[_0x1abbdd(0x1be)](0x1)),console[_0x1abbdd(0x1bc)](_0x1abbdd(0x197));}function _0x2ae8(){const _0xa9232b=['parse','scripts/build.js','--start-electron','</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</html>\x0a\x20\x20\x20\x20\x20\x20','electron','find','.html','child_process','❌\x20Electron\x20启动失败','\x20不存在','start\x20http://localhost:','code','475240ZQEplB','1304PwaOrt','readFileSync','12SQjqtj','✅\x20HTTP\x20服务已启动:\x20http://localhost:','42kGbNEi','send','slice','EADDRINUSE','log','includes','exit','split','❌\x20Web\x20构建失败','</a></li>','sendFile','web','❌\x20构建失败','node','index.html','--web','❌\x20服务器错误:','catch','--start-web','out','1073892skmdFC','static','use','inherit','/:page','6135063FxBwWx','params','page','error','103111PKQrQL','3DXZBvU','1198344WwUJRW','❌\x20指定的版本\x20','dist','startsWith','🚀\x20开始\x20Web\x20构建...','<li><a\x20href=\x22/','2DgFUPS','🚀\x20开始构建...','✅\x20Web\x20构建完成','status','listen','✅\x20构建完成','1363030HwHcnr','❌\x20端口\x20','filter','path','页面不存在','--v=','\x20已被占用','windows','version','endsWith','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<head><title>可用页面列表</title></head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>可用页面列表:</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>','34461jideez','--port=','join','existsSync'];_0x2ae8=function(){return _0xa9232b;};return _0x2ae8();}function checkBuildExists(){const _0x2f010d=_0x38df3a;return fs[_0x2f010d(0x1a6)](distDir);}function startElectron(){const _0x2c3013=_0x38df3a;console[_0x2c3013(0x1bc)]('🚀\x20启动\x20Electron...');const _0x51a96b=spawnSync('cd',[outDir],{'stdio':_0x2c3013(0x1cf),'shell':!![]});_0x51a96b[_0x2c3013(0x195)]!==0x0&&(console[_0x2c3013(0x189)]('❌\x20切换目录失败'),process[_0x2c3013(0x1be)](0x1));const _0x1b1a28=spawnSync(_0x2c3013(0x1ab),['.'],{'stdio':_0x2c3013(0x1cf),'shell':!![],'cwd':outDir});_0x1b1a28['status']!==0x0&&(console[_0x2c3013(0x189)](_0x2c3013(0x1af)),process[_0x2c3013(0x1be)](0x1));}function createHttpServer(){const _0x3acde3=_0x38df3a,_0x2361a1=express();console[_0x3acde3(0x1bc)]('📂\x20静态文件目录:',webDistDir),_0x2361a1[_0x3acde3(0x1ce)](express[_0x3acde3(0x1cd)](webDistDir)),_0x2361a1['get']('/',(_0x2e2d2b,_0x466e85)=>{const _0x2dfe62=_0x3acde3,_0x2a7b35=path['join'](webDistDir,_0x2dfe62(0x1c6));if(fs[_0x2dfe62(0x1a6)](_0x2a7b35))_0x466e85['sendFile'](_0x2a7b35);else{const _0x6840bf=fs['readdirSync'](webDistDir)[_0x2dfe62(0x19a)](_0x34137f=>_0x34137f[_0x2dfe62(0x1a1)](_0x2dfe62(0x1ad)))['map'](_0x3a6a80=>_0x2dfe62(0x191)+_0x3a6a80+'\x22>'+_0x3a6a80+_0x2dfe62(0x1c1))[_0x2dfe62(0x1a5)]('\x0a');_0x466e85['send'](_0x2dfe62(0x1a2)+_0x6840bf+_0x2dfe62(0x1aa));}}),_0x2361a1['get'](_0x3acde3(0x1d0),(_0x3a912b,_0x4a3fc1,_0xe02812)=>{const _0x1fb62b=_0x3acde3,_0x4f5e57=_0x3a912b[_0x1fb62b(0x1d2)][_0x1fb62b(0x1d3)];if(!_0x4f5e57[_0x1fb62b(0x1a1)](_0x1fb62b(0x1ad))){_0xe02812();return;}const _0x5a68e8=path[_0x1fb62b(0x1a5)](webDistDir,_0x4f5e57);fs[_0x1fb62b(0x1a6)](_0x5a68e8)?_0x4a3fc1[_0x1fb62b(0x1c2)](_0x5a68e8):_0x4a3fc1[_0x1fb62b(0x195)](0x194)[_0x1fb62b(0x1b9)](_0x1fb62b(0x19c));});const _0x294bb1=_0x2361a1[_0x3acde3(0x196)](port,()=>{const _0x309d22=_0x3acde3;console[_0x309d22(0x1bc)](_0x309d22(0x1b7)+port),exec(_0x309d22(0x1b1)+port);});_0x294bb1['on'](_0x3acde3(0x189),_0x58271b=>{const _0xa712c2=_0x3acde3;_0x58271b[_0xa712c2(0x1b2)]===_0xa712c2(0x1bb)?console[_0xa712c2(0x189)](_0xa712c2(0x199)+port+_0xa712c2(0x19e)):console[_0xa712c2(0x189)](_0xa712c2(0x1c8),_0x58271b),process[_0xa712c2(0x1be)](0x1);});}function runWebBuild(){const _0x26da52=_0x38df3a;console[_0x26da52(0x1bc)](_0x26da52(0x190));const _0x47b148=spawnSync(_0x26da52(0x1c5),[_0x26da52(0x1a8),_0x26da52(0x1c7)],{'stdio':'inherit','shell':!![],'cwd':path[_0x26da52(0x1a5)](__dirname,'..')});_0x47b148['status']!==0x0&&(console['error'](_0x26da52(0x1c0)),process[_0x26da52(0x1be)](0x1)),console[_0x26da52(0x1bc)](_0x26da52(0x194));}function checkWebBuildExists(){const _0x3f4a28=_0x38df3a;return fs[_0x3f4a28(0x1a6)](webDistDir);}async function main(){const _0x5d96fc=_0x38df3a;if(isElectron)runBuild(),startElectron();else{if(isWeb)runWebBuild(),createHttpServer();else{if(isStartElectron)!checkBuildExists()&&runBuild(),startElectron();else isStartWeb?(!checkWebBuildExists()&&runWebBuild(),createHttpServer()):(console[_0x5d96fc(0x189)]('❌\x20请指定运行模式:\x20--electron,\x20--web,\x20--start-electron\x20或\x20--start-web'),process['exit'](0x1));}}}function _0x448a(_0x4ecb01,_0x199713){const _0x2ae882=_0x2ae8();return _0x448a=function(_0x448aa8,_0x3149a2){_0x448aa8=_0x448aa8-0x189;let _0xa7b601=_0x2ae882[_0x448aa8];return _0xa7b601;},_0x448a(_0x4ecb01,_0x199713);}main()[_0x38df3a(0x1c9)](_0x5894b4=>{const _0x3bb66a=_0x38df3a;console[_0x3bb66a(0x189)]('❌\x20运行错误:',_0x5894b4),process['exit'](0x1);});