const _0x27187f=_0x25cd;(function(_0x4d831c,_0x5e1c82){const _0x5e5bc0=_0x25cd,_0x2a590e=_0x4d831c();while(!![]){try{const _0x339d2c=-parseInt(_0x5e5bc0(0x147))/0x1+-parseInt(_0x5e5bc0(0x126))/0x2+-parseInt(_0x5e5bc0(0x13e))/0x3+-parseInt(_0x5e5bc0(0x12c))/0x4+parseInt(_0x5e5bc0(0x141))/0x5*(parseInt(_0x5e5bc0(0x138))/0x6)+parseInt(_0x5e5bc0(0x116))/0x7*(parseInt(_0x5e5bc0(0x122))/0x8)+parseInt(_0x5e5bc0(0x123))/0x9*(parseInt(_0x5e5bc0(0x12e))/0xa);if(_0x339d2c===_0x5e1c82)break;else _0x2a590e['push'](_0x2a590e['shift']());}catch(_0x44cb6b){_0x2a590e['push'](_0x2a590e['shift']());}}}(_0x1430,0x35523));function _0x1430(){const _0x4aba67=['6HXiVZS','inherit','--start-web','status','EADDRINUSE','path','1242141CxbDfY','includes','filter','530115DJBLzt','package.json','endsWith','split','--build','❌\x20Web\x20构建失败','286539ijKFZM','exit','🚀\x20开始\x20Web\x20构建...','windows','🚀\x20开始构建...','/:page','parse','map','error','📂\x20请检查目录:\x20','❌\x20指定的版本\x20','dist','start\x20http://localhost:','startsWith','params','get','code','index.html','📂\x20静态文件目录:','send','\x20不存在','web','existsSync','--v=','.html','✅\x20HTTP\x20服务已启动:\x20http://localhost:','7qUJpHV','❌\x20请指定运行模式:\x20--electron,\x20--web,\x20--start-electron\x20或\x20--start-web','✅\x20Web\x20构建完成','🚀\x20启动\x20Electron...','join','--start-electron','</a></li>','页面不存在','❌\x20服务器错误:','static','✅\x20构建完成','page','1695016OssSvp','135LrRCfY','--electron','log','108174gkZOoG','find','argv','readdirSync','node','--web','214536NKyavu','sendFile','472540vGeZch','--port=','❌\x20切换目录失败','child_process','❌\x20运行错误:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<head><title>可用页面列表</title></head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>可用页面列表:</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>','utf-8','</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</html>\x0a\x20\x20\x20\x20\x20\x20','readFileSync','scripts/build.js'];_0x1430=function(){return _0x4aba67;};return _0x1430();}const {spawnSync}=require(_0x27187f(0x131)),path=require(_0x27187f(0x13d)),fs=require('fs'),{exec}=require('child_process'),express=require('express'),outDir=path[_0x27187f(0x11a)](__dirname,'..','out'),distDir=path['join'](outDir,_0x27187f(0x14a),_0x27187f(0x152)),packageJson=JSON[_0x27187f(0x14d)](fs[_0x27187f(0x136)](path[_0x27187f(0x11a)](__dirname,'..',_0x27187f(0x142)),_0x27187f(0x134))),args=process[_0x27187f(0x128)]['slice'](0x2),isElectron=args[_0x27187f(0x13f)](_0x27187f(0x124)),isWeb=args[_0x27187f(0x13f)](_0x27187f(0x12b)),isStartElectron=args[_0x27187f(0x13f)](_0x27187f(0x11b)),isStartWeb=args[_0x27187f(0x13f)](_0x27187f(0x13a)),portArg=args[_0x27187f(0x127)](_0x376b27=>_0x376b27[_0x27187f(0x109)](_0x27187f(0x12f))),port=portArg?parseInt(portArg[_0x27187f(0x144)]('=')[0x1]):0x1496,versionArg=args[_0x27187f(0x127)](_0x91e2a5=>_0x91e2a5[_0x27187f(0x109)](_0x27187f(0x113))),versionName=versionArg?'v'+versionArg['split']('=')[0x1]:'v'+packageJson['version'],webDistDir=path[_0x27187f(0x11a)](__dirname,'..',_0x27187f(0x152),_0x27187f(0x111),versionName);function _0x25cd(_0x23a9e3,_0x3cb037){const _0x14304f=_0x1430();return _0x25cd=function(_0x25cdfa,_0x135e89){_0x25cdfa=_0x25cdfa-0x108;let _0x1f9b70=_0x14304f[_0x25cdfa];return _0x1f9b70;},_0x25cd(_0x23a9e3,_0x3cb037);}versionArg&&!fs[_0x27187f(0x112)](webDistDir)&&(console[_0x27187f(0x14f)](_0x27187f(0x151)+versionName+_0x27187f(0x110)),console[_0x27187f(0x125)](_0x27187f(0x150)+webDistDir),process['exit'](0x1));function runBuild(){const _0x27ba42=_0x27187f;console['log'](_0x27ba42(0x14b));const _0x55cd57=spawnSync(_0x27ba42(0x12a),[_0x27ba42(0x137),_0x27ba42(0x145)],{'stdio':_0x27ba42(0x139),'shell':!![],'cwd':path[_0x27ba42(0x11a)](__dirname,'..')});_0x55cd57[_0x27ba42(0x13b)]!==0x0&&(console['error']('❌\x20构建失败'),process[_0x27ba42(0x148)](0x1)),console['log'](_0x27ba42(0x120));}function checkBuildExists(){const _0x770463=_0x27187f;return fs[_0x770463(0x112)](distDir);}function startElectron(){const _0x200980=_0x27187f;console[_0x200980(0x125)](_0x200980(0x119));const _0x37d7ad=spawnSync('cd',[outDir],{'stdio':_0x200980(0x139),'shell':!![]});_0x37d7ad[_0x200980(0x13b)]!==0x0&&(console[_0x200980(0x14f)](_0x200980(0x130)),process[_0x200980(0x148)](0x1));const _0x1aa238=spawnSync('electron',['.'],{'stdio':_0x200980(0x139),'shell':!![],'cwd':outDir});_0x1aa238[_0x200980(0x13b)]!==0x0&&(console['error']('❌\x20Electron\x20启动失败'),process['exit'](0x1));}function createHttpServer(){const _0x4e7cda=_0x27187f,_0x55d8a2=express();console[_0x4e7cda(0x125)](_0x4e7cda(0x10e),webDistDir),_0x55d8a2['use'](express[_0x4e7cda(0x11f)](webDistDir)),_0x55d8a2['get']('/',(_0x256a03,_0x4a2c9f)=>{const _0x3c234d=_0x4e7cda,_0x22761b=path[_0x3c234d(0x11a)](webDistDir,_0x3c234d(0x10d));if(fs[_0x3c234d(0x112)](_0x22761b))_0x4a2c9f[_0x3c234d(0x12d)](_0x22761b);else{const _0x42b458=fs[_0x3c234d(0x129)](webDistDir)[_0x3c234d(0x140)](_0x2dce97=>_0x2dce97[_0x3c234d(0x143)](_0x3c234d(0x114)))[_0x3c234d(0x14e)](_0xcac298=>'<li><a\x20href=\x22/'+_0xcac298+'\x22>'+_0xcac298+_0x3c234d(0x11c))[_0x3c234d(0x11a)]('\x0a');_0x4a2c9f[_0x3c234d(0x10f)](_0x3c234d(0x133)+_0x42b458+_0x3c234d(0x135));}}),_0x55d8a2[_0x4e7cda(0x10b)](_0x4e7cda(0x14c),(_0x4c9e8e,_0x5649fa,_0x252270)=>{const _0x3992a8=_0x4e7cda,_0x1ef3e5=_0x4c9e8e[_0x3992a8(0x10a)][_0x3992a8(0x121)];if(!_0x1ef3e5[_0x3992a8(0x143)](_0x3992a8(0x114))){_0x252270();return;}const _0x4dfb1f=path['join'](webDistDir,_0x1ef3e5);fs[_0x3992a8(0x112)](_0x4dfb1f)?_0x5649fa[_0x3992a8(0x12d)](_0x4dfb1f):_0x5649fa[_0x3992a8(0x13b)](0x194)[_0x3992a8(0x10f)](_0x3992a8(0x11d));});const _0x40bf96=_0x55d8a2['listen'](port,()=>{const _0x627e04=_0x4e7cda;console[_0x627e04(0x125)](_0x627e04(0x115)+port),exec(_0x627e04(0x108)+port);});_0x40bf96['on'](_0x4e7cda(0x14f),_0x1692e4=>{const _0xb7dcd0=_0x4e7cda;_0x1692e4[_0xb7dcd0(0x10c)]===_0xb7dcd0(0x13c)?console['error']('❌\x20端口\x20'+port+'\x20已被占用'):console['error'](_0xb7dcd0(0x11e),_0x1692e4),process[_0xb7dcd0(0x148)](0x1);});}function runWebBuild(){const _0x4e25c0=_0x27187f;console[_0x4e25c0(0x125)](_0x4e25c0(0x149));const _0x43525e=spawnSync(_0x4e25c0(0x12a),['scripts/build.js','--web'],{'stdio':_0x4e25c0(0x139),'shell':!![],'cwd':path[_0x4e25c0(0x11a)](__dirname,'..')});_0x43525e[_0x4e25c0(0x13b)]!==0x0&&(console['error'](_0x4e25c0(0x146)),process[_0x4e25c0(0x148)](0x1)),console[_0x4e25c0(0x125)](_0x4e25c0(0x118));}function checkWebBuildExists(){const _0x43ed12=_0x27187f;return fs[_0x43ed12(0x112)](webDistDir);}async function main(){const _0x5bd8aa=_0x27187f;if(isElectron)runBuild(),startElectron();else{if(isWeb)runWebBuild(),createHttpServer();else{if(isStartElectron)!checkBuildExists()&&runBuild(),startElectron();else isStartWeb?(!checkWebBuildExists()&&runWebBuild(),createHttpServer()):(console[_0x5bd8aa(0x14f)](_0x5bd8aa(0x117)),process[_0x5bd8aa(0x148)](0x1));}}}main()['catch'](_0x4b3456=>{const _0x6dcd99=_0x27187f;console[_0x6dcd99(0x14f)](_0x6dcd99(0x132),_0x4b3456),process['exit'](0x1);});