const _0x5499da=_0x8a6c;(function(_0x36e5b7,_0x4ef1d0){const _0x1dd6d6=_0x8a6c,_0x384902=_0x36e5b7();while(!![]){try{const _0x2a386f=parseInt(_0x1dd6d6(0xe4))/0x1+parseInt(_0x1dd6d6(0xf8))/0x2*(parseInt(_0x1dd6d6(0xcd))/0x3)+-parseInt(_0x1dd6d6(0xff))/0x4*(-parseInt(_0x1dd6d6(0xfd))/0x5)+parseInt(_0x1dd6d6(0xe5))/0x6*(-parseInt(_0x1dd6d6(0xf1))/0x7)+parseInt(_0x1dd6d6(0xce))/0x8+-parseInt(_0x1dd6d6(0xeb))/0x9+-parseInt(_0x1dd6d6(0xc5))/0xa;if(_0x2a386f===_0x4ef1d0)break;else _0x384902['push'](_0x384902['shift']());}catch(_0xfa2b0b){_0x384902['push'](_0x384902['shift']());}}}(_0x2950,0x7f01e));function _0x2950(){const _0x525530=['📂\x20静态文件目录:','🚀\x20启动\x20Electron...','endsWith','❌\x20端口\x20','argv','198fkdOXp','7581096BFpqWb','child_process','find','\x20已被占用','status','page','split','code','catch','--port=','✅\x20Web\x20构建完成','web','❌\x20服务器错误:','sendFile','--start-electron','.html','log','✅\x20HTTP\x20服务已启动:\x20http://localhost:','🚀\x20开始构建...','inherit','package.json','--electron','489019kwpKiN','30ESbxdB','error','❌\x20运行错误:','--web','windows','📂\x20请检查目录:\x20','2933055axZLWF','join','slice','send','--start-web','includes','203462qdEMgl','get','readdirSync','startsWith','页面不存在','index.html','use','29936sVFCmZ','node','readFileSync','❌\x20指定的版本\x20','</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</html>\x0a\x20\x20\x20\x20\x20\x20','10XPhgNy','params','327948lwdWQh','utf-8','out','exit','electron','❌\x20Web\x20构建失败','parse','map','scripts/build.js','dist','❌\x20切换目录失败','path','listen','🚀\x20开始\x20Web\x20构建...','<li><a\x20href=\x22/','existsSync','15970710RlwJlq','--v=','\x20不存在'];_0x2950=function(){return _0x525530;};return _0x2950();}const {spawnSync}=require(_0x5499da(0xcf)),path=require(_0x5499da(0x10a)),fs=require('fs'),{exec}=require(_0x5499da(0xcf)),express=require('express'),outDir=path[_0x5499da(0xec)](__dirname,'..',_0x5499da(0x101)),distDir=path[_0x5499da(0xec)](outDir,_0x5499da(0xe9),'dist'),packageJson=JSON[_0x5499da(0x105)](fs[_0x5499da(0xfa)](path['join'](__dirname,'..',_0x5499da(0xe2)),_0x5499da(0x100))),args=process[_0x5499da(0xcc)][_0x5499da(0xed)](0x2),isElectron=args[_0x5499da(0xf0)](_0x5499da(0xe3)),isWeb=args['includes']('--web'),isStartElectron=args['includes'](_0x5499da(0xdc)),isStartWeb=args['includes'](_0x5499da(0xef)),portArg=args[_0x5499da(0xd0)](_0xeb253c=>_0xeb253c[_0x5499da(0xf4)](_0x5499da(0xd7))),port=portArg?parseInt(portArg[_0x5499da(0xd4)]('=')[0x1]):0x1496,versionArg=args['find'](_0x9eba45=>_0x9eba45[_0x5499da(0xf4)](_0x5499da(0xc6))),versionName=versionArg?'v'+versionArg[_0x5499da(0xd4)]('=')[0x1]:'v'+packageJson['version'],webDistDir=path[_0x5499da(0xec)](__dirname,'..',_0x5499da(0x108),_0x5499da(0xd9),versionName);versionArg&&!fs[_0x5499da(0x10e)](webDistDir)&&(console[_0x5499da(0xe6)](_0x5499da(0xfb)+versionName+_0x5499da(0xc7)),console[_0x5499da(0xde)](_0x5499da(0xea)+webDistDir),process['exit'](0x1));function runBuild(){const _0x43372f=_0x5499da;console[_0x43372f(0xde)](_0x43372f(0xe0));const _0xc2f7b3=spawnSync(_0x43372f(0xf9),[_0x43372f(0x107),'--build'],{'stdio':_0x43372f(0xe1),'shell':!![],'cwd':path[_0x43372f(0xec)](__dirname,'..')});_0xc2f7b3[_0x43372f(0xd2)]!==0x0&&(console[_0x43372f(0xe6)]('❌\x20构建失败'),process[_0x43372f(0x102)](0x1)),console[_0x43372f(0xde)]('✅\x20构建完成');}function checkBuildExists(){return fs['existsSync'](distDir);}function startElectron(){const _0x52b533=_0x5499da;console[_0x52b533(0xde)](_0x52b533(0xc9));const _0x1414e2=spawnSync('cd',[outDir],{'stdio':_0x52b533(0xe1),'shell':!![]});_0x1414e2[_0x52b533(0xd2)]!==0x0&&(console[_0x52b533(0xe6)](_0x52b533(0x109)),process[_0x52b533(0x102)](0x1));const _0x144616=spawnSync(_0x52b533(0x103),['.'],{'stdio':_0x52b533(0xe1),'shell':!![],'cwd':outDir});_0x144616[_0x52b533(0xd2)]!==0x0&&(console[_0x52b533(0xe6)]('❌\x20Electron\x20启动失败'),process[_0x52b533(0x102)](0x1));}function _0x8a6c(_0x509748,_0x1914dc){const _0x29502b=_0x2950();return _0x8a6c=function(_0x8a6c53,_0x2a0c02){_0x8a6c53=_0x8a6c53-0xc5;let _0x2fd0a7=_0x29502b[_0x8a6c53];return _0x2fd0a7;},_0x8a6c(_0x509748,_0x1914dc);}function createHttpServer(){const _0x2a0010=_0x5499da,_0x36f5fd=express();console[_0x2a0010(0xde)](_0x2a0010(0xc8),webDistDir),_0x36f5fd[_0x2a0010(0xf7)](express['static'](webDistDir)),_0x36f5fd[_0x2a0010(0xf2)]('/',(_0x253763,_0x1e6bfb)=>{const _0x55867c=_0x2a0010,_0x22c10a=path[_0x55867c(0xec)](webDistDir,_0x55867c(0xf6));if(fs[_0x55867c(0x10e)](_0x22c10a))_0x1e6bfb[_0x55867c(0xdb)](_0x22c10a);else{const _0x5a9831=fs[_0x55867c(0xf3)](webDistDir)['filter'](_0x5be80d=>_0x5be80d['endsWith'](_0x55867c(0xdd)))[_0x55867c(0x106)](_0x43b39c=>_0x55867c(0x10d)+_0x43b39c+'\x22>'+_0x43b39c+'</a></li>')[_0x55867c(0xec)]('\x0a');_0x1e6bfb['send']('\x0a\x20\x20\x20\x20\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<head><title>可用页面列表</title></head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>可用页面列表:</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>'+_0x5a9831+_0x55867c(0xfc));}}),_0x36f5fd[_0x2a0010(0xf2)]('/:page',(_0x113bd7,_0x5c6f7c,_0x965327)=>{const _0x10cd23=_0x2a0010,_0x215c19=_0x113bd7[_0x10cd23(0xfe)][_0x10cd23(0xd3)];if(!_0x215c19[_0x10cd23(0xca)](_0x10cd23(0xdd))){_0x965327();return;}const _0x46c69a=path[_0x10cd23(0xec)](webDistDir,_0x215c19);fs[_0x10cd23(0x10e)](_0x46c69a)?_0x5c6f7c['sendFile'](_0x46c69a):_0x5c6f7c['status'](0x194)[_0x10cd23(0xee)](_0x10cd23(0xf5));});const _0x19fb38=_0x36f5fd[_0x2a0010(0x10b)](port,()=>{const _0x530cae=_0x2a0010;console[_0x530cae(0xde)](_0x530cae(0xdf)+port),exec('start\x20http://localhost:'+port);});_0x19fb38['on'](_0x2a0010(0xe6),_0x4f1e0c=>{const _0xcea819=_0x2a0010;_0x4f1e0c[_0xcea819(0xd5)]==='EADDRINUSE'?console['error'](_0xcea819(0xcb)+port+_0xcea819(0xd1)):console['error'](_0xcea819(0xda),_0x4f1e0c),process['exit'](0x1);});}function runWebBuild(){const _0x3436dc=_0x5499da;console[_0x3436dc(0xde)](_0x3436dc(0x10c));const _0x1c4cc6=spawnSync(_0x3436dc(0xf9),['scripts/build.js',_0x3436dc(0xe8)],{'stdio':_0x3436dc(0xe1),'shell':!![],'cwd':path[_0x3436dc(0xec)](__dirname,'..')});_0x1c4cc6[_0x3436dc(0xd2)]!==0x0&&(console[_0x3436dc(0xe6)](_0x3436dc(0x104)),process[_0x3436dc(0x102)](0x1)),console[_0x3436dc(0xde)](_0x3436dc(0xd8));}function checkWebBuildExists(){const _0x457f61=_0x5499da;return fs[_0x457f61(0x10e)](webDistDir);}async function main(){const _0x227cfb=_0x5499da;if(isElectron)runBuild(),startElectron();else{if(isWeb)runWebBuild(),createHttpServer();else{if(isStartElectron)!checkBuildExists()&&runBuild(),startElectron();else isStartWeb?(!checkWebBuildExists()&&runWebBuild(),createHttpServer()):(console[_0x227cfb(0xe6)]('❌\x20请指定运行模式:\x20--electron,\x20--web,\x20--start-electron\x20或\x20--start-web'),process['exit'](0x1));}}}main()[_0x5499da(0xd6)](_0x27e899=>{const _0x40fec3=_0x5499da;console[_0x40fec3(0xe6)](_0x40fec3(0xe7),_0x27e899),process[_0x40fec3(0x102)](0x1);});