const _0x2f0296=_0x3921;(function(_0x351650,_0x5c027c){const _0xc86a07=_0x3921,_0x2e4f84=_0x351650();while(!![]){try{const _0x47d465=parseInt(_0xc86a07(0xfc))/0x1+parseInt(_0xc86a07(0xea))/0x2+-parseInt(_0xc86a07(0x123))/0x3+-parseInt(_0xc86a07(0x11c))/0x4+-parseInt(_0xc86a07(0xfb))/0x5+parseInt(_0xc86a07(0x11e))/0x6*(parseInt(_0xc86a07(0x11f))/0x7)+parseInt(_0xc86a07(0x115))/0x8*(parseInt(_0xc86a07(0x114))/0x9);if(_0x47d465===_0x5c027c)break;else _0x2e4f84['push'](_0x2e4f84['shift']());}catch(_0x579282){_0x2e4f84['push'](_0x2e4f84['shift']());}}}(_0x183e,0xcb38d));const {spawnSync}=require(_0x2f0296(0x10c)),path=require(_0x2f0296(0x120)),fs=require('fs'),{exec}=require(_0x2f0296(0x10c)),express=require(_0x2f0296(0x109)),outDir=path[_0x2f0296(0x116)](__dirname,'..',_0x2f0296(0xeb)),distDir=path[_0x2f0296(0x116)](outDir,_0x2f0296(0x118),_0x2f0296(0xe1)),packageJson=JSON[_0x2f0296(0xf7)](fs[_0x2f0296(0x101)](path[_0x2f0296(0x116)](__dirname,'..',_0x2f0296(0xf4)),'utf-8')),args=process[_0x2f0296(0xfa)][_0x2f0296(0x10b)](0x2),isElectron=args[_0x2f0296(0x121)]('--electron'),isWeb=args[_0x2f0296(0x121)]('--web'),isStartElectron=args[_0x2f0296(0x121)](_0x2f0296(0x113)),isStartWeb=args['includes'](_0x2f0296(0xe3)),portArg=args[_0x2f0296(0xec)](_0x1bdeb7=>_0x1bdeb7['startsWith'](_0x2f0296(0xe0))),port=portArg?parseInt(portArg[_0x2f0296(0x126)]('=')[0x1]):0x1496,versionArg=args[_0x2f0296(0xec)](_0x49cdac=>_0x49cdac['startsWith'](_0x2f0296(0x10a))),versionName=versionArg?'v'+versionArg[_0x2f0296(0x126)]('=')[0x1]:'v'+packageJson['version'],webDistDir=path['join'](__dirname,'..',_0x2f0296(0xe1),_0x2f0296(0x127),versionName);versionArg&&!fs[_0x2f0296(0x117)](webDistDir)&&(console[_0x2f0296(0xe6)](_0x2f0296(0xff)+versionName+'\x20不存在'),console[_0x2f0296(0xe7)]('📂\x20请检查目录:\x20'+webDistDir),process[_0x2f0296(0x10f)](0x1));function _0x3921(_0x49a759,_0x17cc44){const _0x183e42=_0x183e();return _0x3921=function(_0x392114,_0x2b9f98){_0x392114=_0x392114-0xe0;let _0x49550f=_0x183e42[_0x392114];return _0x49550f;},_0x3921(_0x49a759,_0x17cc44);}function runBuild(){const _0x271dd4=_0x2f0296;console[_0x271dd4(0xe7)](_0x271dd4(0xf1));const _0x25c9d4=spawnSync('node',[_0x271dd4(0xf6),'--build'],{'stdio':_0x271dd4(0x124),'shell':!![],'cwd':path['join'](__dirname,'..')});_0x25c9d4[_0x271dd4(0x103)]!==0x0&&(console[_0x271dd4(0xe6)]('❌\x20构建失败'),process[_0x271dd4(0x10f)](0x1)),console[_0x271dd4(0xe7)](_0x271dd4(0x119));}function checkBuildExists(){const _0x6f5f5f=_0x2f0296;return fs[_0x6f5f5f(0x117)](distDir);}function startElectron(){const _0x353ff0=_0x2f0296;console[_0x353ff0(0xe7)](_0x353ff0(0xe9));const _0x3a360d=spawnSync('cd',[outDir],{'stdio':_0x353ff0(0x124),'shell':!![]});_0x3a360d[_0x353ff0(0x103)]!==0x0&&(console[_0x353ff0(0xe6)](_0x353ff0(0x11d)),process[_0x353ff0(0x10f)](0x1));const _0x50f511=spawnSync(_0x353ff0(0xed),['.'],{'stdio':_0x353ff0(0x124),'shell':!![],'cwd':outDir});_0x50f511[_0x353ff0(0x103)]!==0x0&&(console[_0x353ff0(0xe6)]('❌\x20Electron\x20启动失败'),process[_0x353ff0(0x10f)](0x1));}function createHttpServer(){const _0x34801a=_0x2f0296,_0x338aec=express();console[_0x34801a(0xe7)](_0x34801a(0xf0),webDistDir),_0x338aec['use'](express[_0x34801a(0x100)](webDistDir)),_0x338aec['get']('/',(_0x85f771,_0x2525bd)=>{const _0x5839d3=_0x34801a,_0x4185b2=path[_0x5839d3(0x116)](webDistDir,'index.html');if(fs['existsSync'](_0x4185b2))_0x2525bd[_0x5839d3(0x111)](_0x4185b2);else{const _0x2364aa=fs[_0x5839d3(0xf2)](webDistDir)[_0x5839d3(0xef)](_0x35e2e9=>_0x35e2e9[_0x5839d3(0xfd)](_0x5839d3(0xf8)))[_0x5839d3(0x125)](_0xfa3450=>_0x5839d3(0x10d)+_0xfa3450+'\x22>'+_0xfa3450+'</a></li>')['join']('\x0a');_0x2525bd[_0x5839d3(0xe5)](_0x5839d3(0xee)+_0x2364aa+'</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</html>\x0a\x20\x20\x20\x20\x20\x20');}}),_0x338aec[_0x34801a(0x11a)]('/:page',(_0x3afb79,_0x468062,_0x4cff30)=>{const _0x490f7e=_0x34801a,_0x18bcf0=_0x3afb79[_0x490f7e(0x102)][_0x490f7e(0x112)];if(!_0x18bcf0[_0x490f7e(0xfd)](_0x490f7e(0xf8))){_0x4cff30();return;}const _0x2a1b6d=path[_0x490f7e(0x116)](webDistDir,_0x18bcf0);fs[_0x490f7e(0x117)](_0x2a1b6d)?_0x468062[_0x490f7e(0x111)](_0x2a1b6d):_0x468062[_0x490f7e(0x103)](0x194)[_0x490f7e(0xe5)]('页面不存在');});const _0xce491b=_0x338aec[_0x34801a(0x122)](port,()=>{const _0x5846a1=_0x34801a;console['log'](_0x5846a1(0xe8)+port),exec(_0x5846a1(0xf5)+port);});_0xce491b['on']('error',_0x1212db=>{const _0x316600=_0x34801a;_0x1212db[_0x316600(0x10e)]===_0x316600(0x110)?console[_0x316600(0xe6)](_0x316600(0x108)+port+_0x316600(0xf3)):console['error'](_0x316600(0xf9),_0x1212db),process['exit'](0x1);});}function runWebBuild(){const _0x24c1ff=_0x2f0296;console[_0x24c1ff(0xe7)](_0x24c1ff(0x107));const _0x3c6e70=spawnSync(_0x24c1ff(0x106),['scripts/build.js',_0x24c1ff(0xe4)],{'stdio':'inherit','shell':!![],'cwd':path['join'](__dirname,'..')});_0x3c6e70[_0x24c1ff(0x103)]!==0x0&&(console[_0x24c1ff(0xe6)](_0x24c1ff(0xe2)),process[_0x24c1ff(0x10f)](0x1)),console[_0x24c1ff(0xe7)](_0x24c1ff(0x105));}function checkWebBuildExists(){const _0x48925f=_0x2f0296;return fs[_0x48925f(0x117)](webDistDir);}async function main(){const _0x4b8881=_0x2f0296;if(isElectron)runBuild(),startElectron();else{if(isWeb)runWebBuild(),createHttpServer();else{if(isStartElectron)!checkBuildExists()&&runBuild(),startElectron();else isStartWeb?(!checkWebBuildExists()&&runWebBuild(),createHttpServer()):(console[_0x4b8881(0xe6)](_0x4b8881(0x11b)),process[_0x4b8881(0x10f)](0x1));}}}main()[_0x2f0296(0xfe)](_0x17c1a5=>{const _0x201d50=_0x2f0296;console['error'](_0x201d50(0x104),_0x17c1a5),process['exit'](0x1);});function _0x183e(){const _0x496011=['EADDRINUSE','sendFile','page','--start-electron','234vPpBSI','128240Agyqwf','join','existsSync','windows','✅\x20构建完成','get','❌\x20请指定运行模式:\x20--electron,\x20--web,\x20--start-electron\x20或\x20--start-web','373116BtrxKo','❌\x20切换目录失败','6HbpTgg','359387vljaon','path','includes','listen','2973555dAdRiQ','inherit','map','split','web','--port=','dist','❌\x20Web\x20构建失败','--start-web','--web','send','error','log','✅\x20HTTP\x20服务已启动:\x20http://localhost:','🚀\x20启动\x20Electron...','2878822ZeSECY','out','find','electron','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<head><title>可用页面列表</title></head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>可用页面列表:</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>','filter','📂\x20静态文件目录:','🚀\x20开始构建...','readdirSync','\x20已被占用','package.json','start\x20http://localhost:','scripts/build.js','parse','.html','❌\x20服务器错误:','argv','7008205yAwumv','1410970bMhqKL','endsWith','catch','❌\x20指定的版本\x20','static','readFileSync','params','status','❌\x20运行错误:','✅\x20Web\x20构建完成','node','🚀\x20开始\x20Web\x20构建...','❌\x20端口\x20','express','--v=','slice','child_process','<li><a\x20href=\x22/','code','exit'];_0x183e=function(){return _0x496011;};return _0x183e();}