const _0x4e8225=_0x4ac7;(function(_0x5b95f3,_0x53d592){const _0xc0ad77=_0x4ac7,_0x161b56=_0x5b95f3();while(!![]){try{const _0x4d135a=-parseInt(_0xc0ad77(0x1e4))/0x1*(-parseInt(_0xc0ad77(0x1ea))/0x2)+-parseInt(_0xc0ad77(0x1e5))/0x3+-parseInt(_0xc0ad77(0x211))/0x4*(parseInt(_0xc0ad77(0x20c))/0x5)+-parseInt(_0xc0ad77(0x1f8))/0x6*(parseInt(_0xc0ad77(0x1e3))/0x7)+parseInt(_0xc0ad77(0x21f))/0x8+-parseInt(_0xc0ad77(0x21a))/0x9+parseInt(_0xc0ad77(0x218))/0xa*(-parseInt(_0xc0ad77(0x220))/0xb);if(_0x4d135a===_0x53d592)break;else _0x161b56['push'](_0x161b56['shift']());}catch(_0x3eefbe){_0x161b56['push'](_0x161b56['shift']());}}}(_0x100b,0xe0f71));function _0x4ac7(_0x42afe7,_0x5a11a4){const _0x100bec=_0x100b();return _0x4ac7=function(_0x4ac78b,_0x50eda6){_0x4ac78b=_0x4ac78b-0x1db;let _0x3d70b1=_0x100bec[_0x4ac78b];return _0x3d70b1;},_0x4ac7(_0x42afe7,_0x5a11a4);}const {spawnSync}=require(_0x4e8225(0x21e)),path=require(_0x4e8225(0x1e9)),fs=require('fs'),{exec}=require(_0x4e8225(0x21e)),express=require(_0x4e8225(0x1e7)),outDir=path[_0x4e8225(0x1db)](__dirname,'..',_0x4e8225(0x202)),distDir=path[_0x4e8225(0x1db)](outDir,_0x4e8225(0x1fa),_0x4e8225(0x215)),packageJson=JSON['parse'](fs[_0x4e8225(0x209)](path[_0x4e8225(0x1db)](__dirname,'..',_0x4e8225(0x1f2)),_0x4e8225(0x212))),args=process[_0x4e8225(0x210)][_0x4e8225(0x20d)](0x2),isElectron=args[_0x4e8225(0x1ef)]('--electron'),isWeb=args[_0x4e8225(0x1ef)]('--web'),isStartElectron=args['includes'](_0x4e8225(0x208)),isStartWeb=args[_0x4e8225(0x1ef)](_0x4e8225(0x201)),portArg=args[_0x4e8225(0x1e0)](_0x3c2597=>_0x3c2597[_0x4e8225(0x1fc)](_0x4e8225(0x1f0))),port=portArg?parseInt(portArg['split']('=')[0x1]):0x1496,versionArg=args['find'](_0x170f64=>_0x170f64['startsWith']('--v=')),versionName=versionArg?'v'+versionArg[_0x4e8225(0x1f7)]('=')[0x1]:'v'+packageJson['version'],webDistDir=path['join'](__dirname,'..',_0x4e8225(0x215),_0x4e8225(0x21b),versionName);versionArg&&!fs['existsSync'](webDistDir)&&(console['error']('❌\x20指定的版本\x20'+versionName+'\x20不存在'),console['log']('📂\x20请检查目录:\x20'+webDistDir),process[_0x4e8225(0x1dc)](0x1));function runBuild(){const _0x556013=_0x4e8225;console[_0x556013(0x1e8)]('🚀\x20开始构建...');const _0x6038a8=spawnSync(_0x556013(0x21c),[_0x556013(0x1f6),_0x556013(0x1fd)],{'stdio':_0x556013(0x1eb),'shell':!![],'cwd':path[_0x556013(0x1db)](__dirname,'..')});_0x6038a8[_0x556013(0x1fb)]!==0x0&&(console['error'](_0x556013(0x219)),process[_0x556013(0x1dc)](0x1)),console[_0x556013(0x1e8)](_0x556013(0x1e1));}function checkBuildExists(){return fs['existsSync'](distDir);}function startElectron(){const _0x20eaef=_0x4e8225;console[_0x20eaef(0x1e8)](_0x20eaef(0x1dd));const _0x220695=spawnSync('cd',[outDir],{'stdio':_0x20eaef(0x1eb),'shell':!![]});_0x220695[_0x20eaef(0x1fb)]!==0x0&&(console[_0x20eaef(0x1fe)](_0x20eaef(0x213)),process[_0x20eaef(0x1dc)](0x1));const _0x49eb73=spawnSync(_0x20eaef(0x214),['.'],{'stdio':'inherit','shell':!![],'cwd':outDir});_0x49eb73[_0x20eaef(0x1fb)]!==0x0&&(console['error'](_0x20eaef(0x206)),process[_0x20eaef(0x1dc)](0x1));}function createHttpServer(){const _0xaed971=_0x4e8225,_0x30e4f8=express();console[_0xaed971(0x1e8)](_0xaed971(0x1ff),webDistDir),_0x30e4f8[_0xaed971(0x1de)](express[_0xaed971(0x20a)](webDistDir)),_0x30e4f8[_0xaed971(0x20f)]('/',(_0xf931c7,_0x4fce85)=>{const _0x32dc2b=_0xaed971,_0x52dbdc=path['join'](webDistDir,_0x32dc2b(0x216));if(fs[_0x32dc2b(0x1df)](_0x52dbdc))_0x4fce85[_0x32dc2b(0x207)](_0x52dbdc);else{const _0x5ddc7e=fs[_0x32dc2b(0x1f4)](webDistDir)[_0x32dc2b(0x20b)](_0x4a3cf6=>_0x4a3cf6[_0x32dc2b(0x1e2)](_0x32dc2b(0x205)))[_0x32dc2b(0x1ed)](_0x37d303=>_0x32dc2b(0x1f3)+_0x37d303+'\x22>'+_0x37d303+_0x32dc2b(0x20e))[_0x32dc2b(0x1db)]('\x0a');_0x4fce85[_0x32dc2b(0x204)](_0x32dc2b(0x1ee)+_0x5ddc7e+'</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</html>\x0a\x20\x20\x20\x20\x20\x20');}}),_0x30e4f8[_0xaed971(0x20f)](_0xaed971(0x222),(_0x13dd05,_0x192135,_0x2caa89)=>{const _0x46c6d6=_0xaed971,_0x285011=_0x13dd05[_0x46c6d6(0x1f1)][_0x46c6d6(0x221)];if(!_0x285011[_0x46c6d6(0x1e2)]('.html')){_0x2caa89();return;}const _0x493e21=path[_0x46c6d6(0x1db)](webDistDir,_0x285011);fs[_0x46c6d6(0x1df)](_0x493e21)?_0x192135[_0x46c6d6(0x207)](_0x493e21):_0x192135[_0x46c6d6(0x1fb)](0x194)[_0x46c6d6(0x204)](_0x46c6d6(0x1ec));});const _0x2899e2=_0x30e4f8['listen'](port,()=>{const _0x451fc2=_0xaed971;console[_0x451fc2(0x1e8)]('✅\x20HTTP\x20服务已启动:\x20http://localhost:'+port),exec(_0x451fc2(0x21d)+port);});_0x2899e2['on'](_0xaed971(0x1fe),_0x1ee40d=>{const _0x3ce42e=_0xaed971;_0x1ee40d['code']==='EADDRINUSE'?console[_0x3ce42e(0x1fe)](_0x3ce42e(0x217)+port+_0x3ce42e(0x203)):console['error'](_0x3ce42e(0x1f9),_0x1ee40d),process[_0x3ce42e(0x1dc)](0x1);});}function runWebBuild(){const _0x3138d3=_0x4e8225;console[_0x3138d3(0x1e8)]('🚀\x20开始\x20Web\x20构建...');const _0x1aafe5=spawnSync(_0x3138d3(0x21c),[_0x3138d3(0x1f6),_0x3138d3(0x1e6)],{'stdio':_0x3138d3(0x1eb),'shell':!![],'cwd':path[_0x3138d3(0x1db)](__dirname,'..')});_0x1aafe5[_0x3138d3(0x1fb)]!==0x0&&(console['error'](_0x3138d3(0x223)),process[_0x3138d3(0x1dc)](0x1)),console[_0x3138d3(0x1e8)](_0x3138d3(0x1f5));}function _0x100b(){const _0x18cf20=['--start-electron','readFileSync','static','filter','300JYrtfF','slice','</a></li>','get','argv','9544NhVoXy','utf-8','❌\x20切换目录失败','electron','dist','index.html','❌\x20端口\x20','210CjrGRt','❌\x20构建失败','2235015VHwfhc','web','node','start\x20http://localhost:','child_process','12833008KVktfp','74569mvdlaa','page','/:page','❌\x20Web\x20构建失败','❌\x20运行错误:','join','exit','🚀\x20启动\x20Electron...','use','existsSync','find','✅\x20构建完成','endsWith','1064vpxwJJ','33bZWfdc','196482MPnKRm','--web','express','log','path','46142GBjXXs','inherit','页面不存在','map','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<head><title>可用页面列表</title></head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>可用页面列表:</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>','includes','--port=','params','package.json','<li><a\x20href=\x22/','readdirSync','✅\x20Web\x20构建完成','scripts/build.js','split','33342ImbgFY','❌\x20服务器错误:','windows','status','startsWith','--build','error','📂\x20静态文件目录:','catch','--start-web','out','\x20已被占用','send','.html','❌\x20Electron\x20启动失败','sendFile'];_0x100b=function(){return _0x18cf20;};return _0x100b();}function checkWebBuildExists(){return fs['existsSync'](webDistDir);}async function main(){const _0x1aefe1=_0x4e8225;if(isElectron)runBuild(),startElectron();else{if(isWeb)runWebBuild(),createHttpServer();else{if(isStartElectron)!checkBuildExists()&&runBuild(),startElectron();else isStartWeb?(!checkWebBuildExists()&&runWebBuild(),createHttpServer()):(console[_0x1aefe1(0x1fe)]('❌\x20请指定运行模式:\x20--electron,\x20--web,\x20--start-electron\x20或\x20--start-web'),process[_0x1aefe1(0x1dc)](0x1));}}}main()[_0x4e8225(0x200)](_0x11a161=>{const _0x4fc496=_0x4e8225;console[_0x4fc496(0x1fe)](_0x4fc496(0x224),_0x11a161),process['exit'](0x1);});