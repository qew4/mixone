const _0x8f1104=_0x7094;function _0x2fcd(){const _0x40991d=['log','listen','status','✅\x20Web\x20构建完成','\x20不存在','--start-electron','页面不存在','702230echmOg','child_process','node','find','electron','63ttnipu','451925LYZnXe','start\x20http://localhost:','.html','code','--electron','inherit','🚀\x20启动\x20Electron...','✅\x20HTTP\x20服务已启动:\x20http://localhost:','326936hClpny','sendFile','1254210ffGeus','❌\x20端口\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<head><title>可用页面列表</title></head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>可用页面列表:</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>','🚀\x20开始\x20Web\x20构建...','split','existsSync','error','filter','59945ogvTRd','--start-web','out','📂\x20静态文件目录:','windows','catch','536NDSAsT','utf-8','readFileSync','version','join','scripts/build.js','get','581082ewaWOk','--web','use','web','params','</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</html>\x0a\x20\x20\x20\x20\x20\x20','❌\x20切换目录失败','📂\x20请检查目录:\x20','--port=','send','EADDRINUSE','22057NFiuEe','dist','❌\x20请指定运行模式:\x20--electron,\x20--web,\x20--start-electron\x20或\x20--start-web','endsWith','includes','2ZufXri','exit','--build','slice','\x20已被占用','--v=','❌\x20运行错误:','❌\x20构建失败','✅\x20构建完成'];_0x2fcd=function(){return _0x40991d;};return _0x2fcd();}(function(_0x1d8acc,_0x156e0c){const _0xb9bbbe=_0x7094,_0x21d190=_0x1d8acc();while(!![]){try{const _0xbea94f=-parseInt(_0xb9bbbe(0xde))/0x1+parseInt(_0xb9bbbe(0xb6))/0x2*(parseInt(_0xb9bbbe(0xa6))/0x3)+parseInt(_0xb9bbbe(0xd4))/0x4+-parseInt(_0xb9bbbe(0xcc))/0x5+-parseInt(_0xb9bbbe(0xd6))/0x6+-parseInt(_0xb9bbbe(0xb1))/0x7*(parseInt(_0xb9bbbe(0xe4))/0x8)+parseInt(_0xb9bbbe(0xcb))/0x9*(parseInt(_0xb9bbbe(0xc6))/0xa);if(_0xbea94f===_0x156e0c)break;else _0x21d190['push'](_0x21d190['shift']());}catch(_0x5316cd){_0x21d190['push'](_0x21d190['shift']());}}}(_0x2fcd,0x2ff9b));function _0x7094(_0x3db3d1,_0x362338){const _0x2fcd29=_0x2fcd();return _0x7094=function(_0x709459,_0x3bf271){_0x709459=_0x709459-0xa1;let _0x5683fb=_0x2fcd29[_0x709459];return _0x5683fb;},_0x7094(_0x3db3d1,_0x362338);}const {spawnSync}=require(_0x8f1104(0xc7)),path=require('path'),fs=require('fs'),{exec}=require(_0x8f1104(0xc7)),express=require('express'),outDir=path['join'](__dirname,'..',_0x8f1104(0xe0)),distDir=path[_0x8f1104(0xa3)](outDir,_0x8f1104(0xe2),_0x8f1104(0xb2)),packageJson=JSON['parse'](fs[_0x8f1104(0xa1)](path[_0x8f1104(0xa3)](__dirname,'..','package.json'),_0x8f1104(0xe5))),args=process['argv'][_0x8f1104(0xb9)](0x2),isElectron=args['includes'](_0x8f1104(0xd0)),isWeb=args[_0x8f1104(0xb5)](_0x8f1104(0xa7)),isStartElectron=args[_0x8f1104(0xb5)](_0x8f1104(0xc4)),isStartWeb=args[_0x8f1104(0xb5)](_0x8f1104(0xdf)),portArg=args[_0x8f1104(0xc9)](_0x4c81dd=>_0x4c81dd['startsWith'](_0x8f1104(0xae))),port=portArg?parseInt(portArg[_0x8f1104(0xda)]('=')[0x1]):0x1496,versionArg=args[_0x8f1104(0xc9)](_0x256efd=>_0x256efd['startsWith'](_0x8f1104(0xbb))),versionName=versionArg?'v'+versionArg['split']('=')[0x1]:'v'+packageJson[_0x8f1104(0xa2)],webDistDir=path['join'](__dirname,'..',_0x8f1104(0xb2),_0x8f1104(0xa9),versionName);versionArg&&!fs['existsSync'](webDistDir)&&(console[_0x8f1104(0xdc)]('❌\x20指定的版本\x20'+versionName+_0x8f1104(0xc3)),console[_0x8f1104(0xbf)](_0x8f1104(0xad)+webDistDir),process[_0x8f1104(0xb7)](0x1));function runBuild(){const _0x454cfd=_0x8f1104;console[_0x454cfd(0xbf)]('🚀\x20开始构建...');const _0x33bdd8=spawnSync(_0x454cfd(0xc8),[_0x454cfd(0xa4),_0x454cfd(0xb8)],{'stdio':'inherit','shell':!![],'cwd':path['join'](__dirname,'..')});_0x33bdd8[_0x454cfd(0xc1)]!==0x0&&(console[_0x454cfd(0xdc)](_0x454cfd(0xbd)),process[_0x454cfd(0xb7)](0x1)),console['log'](_0x454cfd(0xbe));}function checkBuildExists(){const _0x39230c=_0x8f1104;return fs[_0x39230c(0xdb)](distDir);}function startElectron(){const _0x38ca35=_0x8f1104;console['log'](_0x38ca35(0xd2));const _0x3f5f41=spawnSync('cd',[outDir],{'stdio':'inherit','shell':!![]});_0x3f5f41[_0x38ca35(0xc1)]!==0x0&&(console['error'](_0x38ca35(0xac)),process[_0x38ca35(0xb7)](0x1));const _0x582f11=spawnSync(_0x38ca35(0xca),['.'],{'stdio':_0x38ca35(0xd1),'shell':!![],'cwd':outDir});_0x582f11[_0x38ca35(0xc1)]!==0x0&&(console[_0x38ca35(0xdc)]('❌\x20Electron\x20启动失败'),process[_0x38ca35(0xb7)](0x1));}function createHttpServer(){const _0x52d6b2=_0x8f1104,_0x56f929=express();console[_0x52d6b2(0xbf)](_0x52d6b2(0xe1),webDistDir),_0x56f929[_0x52d6b2(0xa8)](express['static'](webDistDir)),_0x56f929[_0x52d6b2(0xa5)]('/',(_0x156e94,_0xbca3ed)=>{const _0xf4467=_0x52d6b2,_0x45a248=path['join'](webDistDir,'index.html');if(fs[_0xf4467(0xdb)](_0x45a248))_0xbca3ed[_0xf4467(0xd5)](_0x45a248);else{const _0x5b60ea=fs['readdirSync'](webDistDir)[_0xf4467(0xdd)](_0x385809=>_0x385809[_0xf4467(0xb4)]('.html'))['map'](_0x8d5df7=>'<li><a\x20href=\x22/'+_0x8d5df7+'\x22>'+_0x8d5df7+'</a></li>')[_0xf4467(0xa3)]('\x0a');_0xbca3ed[_0xf4467(0xaf)](_0xf4467(0xd8)+_0x5b60ea+_0xf4467(0xab));}}),_0x56f929[_0x52d6b2(0xa5)]('/:page',(_0x392aad,_0x4b0fb4,_0x824d7c)=>{const _0x3657ea=_0x52d6b2,_0x2c93ed=_0x392aad[_0x3657ea(0xaa)]['page'];if(!_0x2c93ed[_0x3657ea(0xb4)](_0x3657ea(0xce))){_0x824d7c();return;}const _0x41382b=path[_0x3657ea(0xa3)](webDistDir,_0x2c93ed);fs[_0x3657ea(0xdb)](_0x41382b)?_0x4b0fb4[_0x3657ea(0xd5)](_0x41382b):_0x4b0fb4[_0x3657ea(0xc1)](0x194)[_0x3657ea(0xaf)](_0x3657ea(0xc5));});const _0x152ead=_0x56f929[_0x52d6b2(0xc0)](port,()=>{const _0x4016a3=_0x52d6b2;console[_0x4016a3(0xbf)](_0x4016a3(0xd3)+port),exec(_0x4016a3(0xcd)+port);});_0x152ead['on'](_0x52d6b2(0xdc),_0xfd5c0e=>{const _0x1cd3d9=_0x52d6b2;_0xfd5c0e[_0x1cd3d9(0xcf)]===_0x1cd3d9(0xb0)?console[_0x1cd3d9(0xdc)](_0x1cd3d9(0xd7)+port+_0x1cd3d9(0xba)):console['error']('❌\x20服务器错误:',_0xfd5c0e),process['exit'](0x1);});}function runWebBuild(){const _0x15c26d=_0x8f1104;console[_0x15c26d(0xbf)](_0x15c26d(0xd9));const _0x2e4b2d=spawnSync('node',[_0x15c26d(0xa4),_0x15c26d(0xa7)],{'stdio':_0x15c26d(0xd1),'shell':!![],'cwd':path[_0x15c26d(0xa3)](__dirname,'..')});_0x2e4b2d[_0x15c26d(0xc1)]!==0x0&&(console[_0x15c26d(0xdc)]('❌\x20Web\x20构建失败'),process[_0x15c26d(0xb7)](0x1)),console[_0x15c26d(0xbf)](_0x15c26d(0xc2));}function checkWebBuildExists(){const _0x15109f=_0x8f1104;return fs[_0x15109f(0xdb)](webDistDir);}async function main(){const _0x3e6caa=_0x8f1104;if(isElectron)runBuild(),startElectron();else{if(isWeb)runWebBuild(),createHttpServer();else{if(isStartElectron)!checkBuildExists()&&runBuild(),startElectron();else isStartWeb?(!checkWebBuildExists()&&runWebBuild(),createHttpServer()):(console[_0x3e6caa(0xdc)](_0x3e6caa(0xb3)),process[_0x3e6caa(0xb7)](0x1));}}}main()[_0x8f1104(0xe3)](_0x12b3ca=>{const _0x5e7fe4=_0x8f1104;console[_0x5e7fe4(0xdc)](_0x5e7fe4(0xbc),_0x12b3ca),process[_0x5e7fe4(0xb7)](0x1);});