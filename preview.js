const _0x22761e=_0x5bbd;(function(_0x1bf4d9,_0x251040){const _0x38bcd4=_0x5bbd,_0x442824=_0x1bf4d9();while(!![]){try{const _0x4b31b7=-parseInt(_0x38bcd4(0x1d8))/0x1*(parseInt(_0x38bcd4(0x1d0))/0x2)+parseInt(_0x38bcd4(0x1a3))/0x3+-parseInt(_0x38bcd4(0x1d5))/0x4+-parseInt(_0x38bcd4(0x1d7))/0x5+-parseInt(_0x38bcd4(0x1ab))/0x6*(-parseInt(_0x38bcd4(0x1ad))/0x7)+parseInt(_0x38bcd4(0x1a1))/0x8+parseInt(_0x38bcd4(0x1ca))/0x9;if(_0x4b31b7===_0x251040)break;else _0x442824['push'](_0x442824['shift']());}catch(_0x2e3b2a){_0x442824['push'](_0x442824['shift']());}}}(_0x7ae4,0xa51f4));const {spawnSync}=require(_0x22761e(0x1b9)),path=require('path'),fs=require('fs'),{exec}=require(_0x22761e(0x1b9)),express=require(_0x22761e(0x1dc)),outDir=path[_0x22761e(0x1a0)](__dirname,'..',_0x22761e(0x1b4)),distDir=path[_0x22761e(0x1a0)](outDir,_0x22761e(0x1c0),_0x22761e(0x1b3)),packageJson=JSON['parse'](fs['readFileSync'](path[_0x22761e(0x1a0)](__dirname,'..','package.json'),_0x22761e(0x1b6))),args=process['argv'][_0x22761e(0x1a6)](0x2),isElectron=args[_0x22761e(0x1aa)](_0x22761e(0x1cb)),isWeb=args[_0x22761e(0x1aa)](_0x22761e(0x1bc)),isStartElectron=args[_0x22761e(0x1aa)](_0x22761e(0x1bb)),isStartWeb=args[_0x22761e(0x1aa)](_0x22761e(0x199)),portArg=args[_0x22761e(0x198)](_0x52b14a=>_0x52b14a[_0x22761e(0x19f)](_0x22761e(0x1cf))),port=portArg?parseInt(portArg['split']('=')[0x1]):0x1496,versionArg=args[_0x22761e(0x198)](_0x4fc3a9=>_0x4fc3a9['startsWith']('--v=')),versionName=versionArg?'v'+versionArg[_0x22761e(0x1d6)]('=')[0x1]:'v'+packageJson[_0x22761e(0x1db)],webDistDir=path['join'](__dirname,'..','dist',_0x22761e(0x19d),versionName);versionArg&&!fs[_0x22761e(0x19e)](webDistDir)&&(console[_0x22761e(0x1d1)](_0x22761e(0x1d4)+versionName+'\x20不存在'),console['log'](_0x22761e(0x1af)+webDistDir),process[_0x22761e(0x1c5)](0x1));function runBuild(){const _0x4fd131=_0x22761e;console[_0x4fd131(0x1c4)](_0x4fd131(0x1b7));const _0x50dbae=spawnSync(_0x4fd131(0x1ba),[_0x4fd131(0x1c7),_0x4fd131(0x1a9)],{'stdio':_0x4fd131(0x1c9),'shell':!![],'cwd':path[_0x4fd131(0x1a0)](__dirname,'..')});_0x50dbae['status']!==0x0&&(console[_0x4fd131(0x1d1)]('❌\x20构建失败'),process[_0x4fd131(0x1c5)](0x1)),console[_0x4fd131(0x1c4)](_0x4fd131(0x1d9));}function checkBuildExists(){const _0x56c01c=_0x22761e;return fs[_0x56c01c(0x19e)](distDir);}function startElectron(){const _0x19a03f=_0x22761e;console[_0x19a03f(0x1c4)](_0x19a03f(0x1c8));const _0x5b587d=spawnSync('cd',[outDir],{'stdio':_0x19a03f(0x1c9),'shell':!![]});_0x5b587d[_0x19a03f(0x1c1)]!==0x0&&(console['error'](_0x19a03f(0x1dd)),process[_0x19a03f(0x1c5)](0x1));const _0x5a76e4=spawnSync('electron',['.'],{'stdio':_0x19a03f(0x1c9),'shell':!![],'cwd':outDir});_0x5a76e4[_0x19a03f(0x1c1)]!==0x0&&(console[_0x19a03f(0x1d1)](_0x19a03f(0x19b)),process[_0x19a03f(0x1c5)](0x1));}function createHttpServer(){const _0x5782be=_0x22761e,_0x58102a=express();console['log'](_0x5782be(0x1b0),webDistDir),_0x58102a[_0x5782be(0x1b2)](express[_0x5782be(0x1b8)](webDistDir)),_0x58102a[_0x5782be(0x1da)]('/',(_0x798650,_0xbced24)=>{const _0x2eedf4=_0x5782be,_0x212b38=path[_0x2eedf4(0x1a0)](webDistDir,_0x2eedf4(0x19a));if(fs['existsSync'](_0x212b38))_0xbced24['sendFile'](_0x212b38);else{const _0x2b7791=fs[_0x2eedf4(0x1c3)](webDistDir)[_0x2eedf4(0x1a7)](_0x11c7be=>_0x11c7be[_0x2eedf4(0x1be)](_0x2eedf4(0x1c6)))['map'](_0x43bcd8=>'<li><a\x20href=\x22/'+_0x43bcd8+'\x22>'+_0x43bcd8+_0x2eedf4(0x1ac))[_0x2eedf4(0x1a0)]('\x0a');_0xbced24[_0x2eedf4(0x1b1)](_0x2eedf4(0x1a2)+_0x2b7791+_0x2eedf4(0x1b5));}}),_0x58102a[_0x5782be(0x1da)](_0x5782be(0x1cc),(_0x1f8c4d,_0x6f3fcf,_0x1d8b1a)=>{const _0x2bc50f=_0x5782be,_0x465f7f=_0x1f8c4d[_0x2bc50f(0x1c2)][_0x2bc50f(0x1ce)];if(!_0x465f7f['endsWith'](_0x2bc50f(0x1c6))){_0x1d8b1a();return;}const _0x3f2e57=path[_0x2bc50f(0x1a0)](webDistDir,_0x465f7f);fs[_0x2bc50f(0x19e)](_0x3f2e57)?_0x6f3fcf['sendFile'](_0x3f2e57):_0x6f3fcf['status'](0x194)[_0x2bc50f(0x1b1)](_0x2bc50f(0x1a5));});const _0x122c59=_0x58102a[_0x5782be(0x1a4)](port,()=>{const _0x489a1d=_0x5782be;console[_0x489a1d(0x1c4)](_0x489a1d(0x1d3)+port),exec('start\x20http://localhost:'+port);});_0x122c59['on'](_0x5782be(0x1d1),_0x177fa8=>{const _0x56e779=_0x5782be;_0x177fa8[_0x56e779(0x1d2)]==='EADDRINUSE'?console['error'](_0x56e779(0x19c)+port+_0x56e779(0x1ae)):console[_0x56e779(0x1d1)]('❌\x20服务器错误:',_0x177fa8),process[_0x56e779(0x1c5)](0x1);});}function runWebBuild(){const _0x2b2c4b=_0x22761e;console['log']('🚀\x20开始\x20Web\x20构建...');const _0x277c99=spawnSync(_0x2b2c4b(0x1ba),[_0x2b2c4b(0x1c7),_0x2b2c4b(0x1bc)],{'stdio':_0x2b2c4b(0x1c9),'shell':!![],'cwd':path[_0x2b2c4b(0x1a0)](__dirname,'..')});_0x277c99['status']!==0x0&&(console[_0x2b2c4b(0x1d1)](_0x2b2c4b(0x1bd)),process[_0x2b2c4b(0x1c5)](0x1)),console['log'](_0x2b2c4b(0x1bf));}function _0x5bbd(_0x1700fb,_0x4103ca){const _0x7ae444=_0x7ae4();return _0x5bbd=function(_0x5bbde9,_0x8cc648){_0x5bbde9=_0x5bbde9-0x198;let _0x460048=_0x7ae444[_0x5bbde9];return _0x460048;},_0x5bbd(_0x1700fb,_0x4103ca);}function checkWebBuildExists(){return fs['existsSync'](webDistDir);}async function main(){const _0x1002da=_0x22761e;if(isElectron)runBuild(),startElectron();else{if(isWeb)runWebBuild(),createHttpServer();else{if(isStartElectron)!checkBuildExists()&&runBuild(),startElectron();else isStartWeb?(!checkWebBuildExists()&&runWebBuild(),createHttpServer()):(console[_0x1002da(0x1d1)](_0x1002da(0x1cd)),process[_0x1002da(0x1c5)](0x1));}}}function _0x7ae4(){const _0x143604=['.html','scripts/build.js','🚀\x20启动\x20Electron...','inherit','9360396zkdLHJ','--electron','/:page','❌\x20请指定运行模式:\x20--electron,\x20--web,\x20--start-electron\x20或\x20--start-web','page','--port=','28822opChxv','error','code','✅\x20HTTP\x20服务已启动:\x20http://localhost:','❌\x20指定的版本\x20','1729724UgOMiO','split','6046890lwphVE','4AZxnIb','✅\x20构建完成','get','version','express','❌\x20切换目录失败','find','--start-web','index.html','❌\x20Electron\x20启动失败','❌\x20端口\x20','web','existsSync','startsWith','join','3936024rAQFMg','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<head><title>可用页面列表</title></head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>可用页面列表:</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>','2495454ZbSpvV','listen','页面不存在','slice','filter','catch','--build','includes','11928PHzhsr','</a></li>','42nGrsiM','\x20已被占用','📂\x20请检查目录:\x20','📂\x20静态文件目录:','send','use','dist','out','</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</html>\x0a\x20\x20\x20\x20\x20\x20','utf-8','🚀\x20开始构建...','static','child_process','node','--start-electron','--web','❌\x20Web\x20构建失败','endsWith','✅\x20Web\x20构建完成','windows','status','params','readdirSync','log','exit'];_0x7ae4=function(){return _0x143604;};return _0x7ae4();}main()[_0x22761e(0x1a8)](_0x1748fd=>{console['error']('❌\x20运行错误:',_0x1748fd),process['exit'](0x1);});