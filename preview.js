const _0x52d404=_0x33f2;(function(_0x219668,_0xfcb5fe){const _0x435393=_0x33f2,_0x2993e8=_0x219668();while(!![]){try{const _0x39854e=parseInt(_0x435393(0x1cd))/0x1+parseInt(_0x435393(0x1bf))/0x2+parseInt(_0x435393(0x1c1))/0x3+parseInt(_0x435393(0x1ba))/0x4*(-parseInt(_0x435393(0x1de))/0x5)+-parseInt(_0x435393(0x1b8))/0x6*(-parseInt(_0x435393(0x1b7))/0x7)+-parseInt(_0x435393(0x1a3))/0x8*(-parseInt(_0x435393(0x1c8))/0x9)+-parseInt(_0x435393(0x1c4))/0xa;if(_0x39854e===_0xfcb5fe)break;else _0x2993e8['push'](_0x2993e8['shift']());}catch(_0x4c43a8){_0x2993e8['push'](_0x2993e8['shift']());}}}(_0x4ac3,0x9886d));const {spawnSync}=require(_0x52d404(0x1cb)),path=require('path'),fs=require('fs'),{exec}=require(_0x52d404(0x1cb)),express=require(_0x52d404(0x1d9)),outDir=path[_0x52d404(0x1d7)](__dirname,'..','out'),distDir=path[_0x52d404(0x1d7)](outDir,'windows','dist'),packageJson=JSON[_0x52d404(0x1af)](fs[_0x52d404(0x1b4)](path['join'](__dirname,'..',_0x52d404(0x1ab)),_0x52d404(0x1bc))),args=process[_0x52d404(0x1df)][_0x52d404(0x19f)](0x2),isElectron=args[_0x52d404(0x1be)](_0x52d404(0x19d)),isWeb=args[_0x52d404(0x1be)]('--web'),isStartElectron=args[_0x52d404(0x1be)](_0x52d404(0x1b5)),isStartWeb=args[_0x52d404(0x1be)](_0x52d404(0x1cc)),portArg=args[_0x52d404(0x1c3)](_0x2b2b78=>_0x2b2b78['startsWith'](_0x52d404(0x1d5))),port=portArg?parseInt(portArg['split']('=')[0x1]):0x1496,versionArg=args[_0x52d404(0x1c3)](_0x525467=>_0x525467['startsWith'](_0x52d404(0x1c7))),versionName=versionArg?'v'+versionArg[_0x52d404(0x19e)]('=')[0x1]:'v'+packageJson[_0x52d404(0x1dd)],webDistDir=path[_0x52d404(0x1d7)](__dirname,'..','dist',_0x52d404(0x199),versionName);versionArg&&!fs[_0x52d404(0x1b6)](webDistDir)&&(console[_0x52d404(0x1a5)](_0x52d404(0x1c5)+versionName+_0x52d404(0x1a0)),console[_0x52d404(0x1ae)](_0x52d404(0x1dc)+webDistDir),process[_0x52d404(0x1ca)](0x1));function runBuild(){const _0x586f86=_0x52d404;console[_0x586f86(0x1ae)](_0x586f86(0x19b));const _0x302ae7=spawnSync(_0x586f86(0x1ad),['scripts/build.js',_0x586f86(0x1bb)],{'stdio':_0x586f86(0x1d8),'shell':!![],'cwd':path[_0x586f86(0x1d7)](__dirname,'..')});_0x302ae7[_0x586f86(0x1d2)]!==0x0&&(console['error'](_0x586f86(0x1b0)),process['exit'](0x1)),console['log']('✅\x20构建完成');}function checkBuildExists(){const _0x5a4306=_0x52d404;return fs[_0x5a4306(0x1b6)](distDir);}function startElectron(){const _0xc2085d=_0x52d404;console['log'](_0xc2085d(0x1b1));const _0x5d5941=spawnSync('cd',[outDir],{'stdio':_0xc2085d(0x1d8),'shell':!![]});_0x5d5941['status']!==0x0&&(console[_0xc2085d(0x1a5)](_0xc2085d(0x198)),process['exit'](0x1));const _0x4d462d=spawnSync(_0xc2085d(0x1d1),['.'],{'stdio':_0xc2085d(0x1d8),'shell':!![],'cwd':outDir});_0x4d462d[_0xc2085d(0x1d2)]!==0x0&&(console['error']('❌\x20Electron\x20启动失败'),process['exit'](0x1));}function createHttpServer(){const _0x1a0352=_0x52d404,_0x52d3c9=express();console[_0x1a0352(0x1ae)](_0x1a0352(0x1a9),webDistDir),_0x52d3c9['use'](express['static'](webDistDir)),_0x52d3c9[_0x1a0352(0x1d3)]('/',(_0x447233,_0x331067)=>{const _0x2e5d1d=_0x1a0352,_0x4ec0ff=path[_0x2e5d1d(0x1d7)](webDistDir,_0x2e5d1d(0x1da));if(fs[_0x2e5d1d(0x1b6)](_0x4ec0ff))_0x331067[_0x2e5d1d(0x1a1)](_0x4ec0ff);else{const _0x654b97=fs[_0x2e5d1d(0x1cf)](webDistDir)[_0x2e5d1d(0x1d6)](_0x3d198d=>_0x3d198d[_0x2e5d1d(0x1a4)](_0x2e5d1d(0x1b3)))[_0x2e5d1d(0x19c)](_0x20492b=>_0x2e5d1d(0x1b9)+_0x20492b+'\x22>'+_0x20492b+_0x2e5d1d(0x1aa))[_0x2e5d1d(0x1d7)]('\x0a');_0x331067['send'](_0x2e5d1d(0x19a)+_0x654b97+_0x2e5d1d(0x1a8));}}),_0x52d3c9['get'](_0x1a0352(0x1c0),(_0x46a79c,_0x2d29b4,_0x22f166)=>{const _0x511199=_0x1a0352,_0x23adf4=_0x46a79c[_0x511199(0x197)]['page'];if(!_0x23adf4[_0x511199(0x1a4)](_0x511199(0x1b3))){_0x22f166();return;}const _0x263284=path[_0x511199(0x1d7)](webDistDir,_0x23adf4);fs[_0x511199(0x1b6)](_0x263284)?_0x2d29b4[_0x511199(0x1a1)](_0x263284):_0x2d29b4[_0x511199(0x1d2)](0x194)[_0x511199(0x1db)]('页面不存在');});const _0x3791bd=_0x52d3c9[_0x1a0352(0x1d0)](port,()=>{const _0x21225c=_0x1a0352;console[_0x21225c(0x1ae)]('✅\x20HTTP\x20服务已启动:\x20http://localhost:'+port),exec(_0x21225c(0x1a6)+port);});_0x3791bd['on'](_0x1a0352(0x1a5),_0x4e0b13=>{const _0x8e2cf0=_0x1a0352;_0x4e0b13[_0x8e2cf0(0x1b2)]===_0x8e2cf0(0x1ce)?console[_0x8e2cf0(0x1a5)](_0x8e2cf0(0x1c9)+port+_0x8e2cf0(0x1a2)):console[_0x8e2cf0(0x1a5)](_0x8e2cf0(0x1ac),_0x4e0b13),process[_0x8e2cf0(0x1ca)](0x1);});}function runWebBuild(){const _0x1785e6=_0x52d404;console[_0x1785e6(0x1ae)]('🚀\x20开始\x20Web\x20构建...');const _0xc1a65e=spawnSync(_0x1785e6(0x1ad),[_0x1785e6(0x1c6),_0x1785e6(0x1c2)],{'stdio':_0x1785e6(0x1d8),'shell':!![],'cwd':path[_0x1785e6(0x1d7)](__dirname,'..')});_0xc1a65e[_0x1785e6(0x1d2)]!==0x0&&(console[_0x1785e6(0x1a5)](_0x1785e6(0x1a7)),process[_0x1785e6(0x1ca)](0x1)),console[_0x1785e6(0x1ae)]('✅\x20Web\x20构建完成');}function _0x4ac3(){const _0x3d6cf5=['electron','status','get','❌\x20请指定运行模式:\x20--electron,\x20--web,\x20--start-electron\x20或\x20--start-web','--port=','filter','join','inherit','express','index.html','send','📂\x20请检查目录:\x20','version','5dZCZtT','argv','params','❌\x20切换目录失败','web','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<head><title>可用页面列表</title></head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>可用页面列表:</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>','🚀\x20开始构建...','map','--electron','split','slice','\x20不存在','sendFile','\x20已被占用','9152296gRGuva','endsWith','error','start\x20http://localhost:','❌\x20Web\x20构建失败','</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</html>\x0a\x20\x20\x20\x20\x20\x20','📂\x20静态文件目录:','</a></li>','package.json','❌\x20服务器错误:','node','log','parse','❌\x20构建失败','🚀\x20启动\x20Electron...','code','.html','readFileSync','--start-electron','existsSync','1351xvFwvF','7254ZrxfQq','<li><a\x20href=\x22/','1557020xseBvm','--build','utf-8','❌\x20运行错误:','includes','2210228TqRJYi','/:page','809664TBYTRa','--web','find','22623970YQayRW','❌\x20指定的版本\x20','scripts/build.js','--v=','9DTEIxG','❌\x20端口\x20','exit','child_process','--start-web','524025RIIwpR','EADDRINUSE','readdirSync','listen'];_0x4ac3=function(){return _0x3d6cf5;};return _0x4ac3();}function checkWebBuildExists(){return fs['existsSync'](webDistDir);}function _0x33f2(_0xcfea11,_0x5e7ded){const _0x4ac3e5=_0x4ac3();return _0x33f2=function(_0x33f257,_0x2b8ad0){_0x33f257=_0x33f257-0x197;let _0x42e910=_0x4ac3e5[_0x33f257];return _0x42e910;},_0x33f2(_0xcfea11,_0x5e7ded);}async function main(){const _0x296030=_0x52d404;if(isElectron)runBuild(),startElectron();else{if(isWeb)runWebBuild(),createHttpServer();else{if(isStartElectron)!checkBuildExists()&&runBuild(),startElectron();else isStartWeb?(!checkWebBuildExists()&&runWebBuild(),createHttpServer()):(console['error'](_0x296030(0x1d4)),process[_0x296030(0x1ca)](0x1));}}}main()['catch'](_0x40da8a=>{const _0xc31349=_0x52d404;console[_0xc31349(0x1a5)](_0xc31349(0x1bd),_0x40da8a),process[_0xc31349(0x1ca)](0x1);});