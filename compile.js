const _0x22dc87=_0x2676;(function(_0x3f3e72,_0x507904){const _0x4f02ef=_0x2676,_0x291a58=_0x3f3e72();while(!![]){try{const _0x1da3ea=parseInt(_0x4f02ef(0x169))/0x1*(parseInt(_0x4f02ef(0x25a))/0x2)+parseInt(_0x4f02ef(0x1c9))/0x3*(-parseInt(_0x4f02ef(0x222))/0x4)+-parseInt(_0x4f02ef(0x25f))/0x5*(parseInt(_0x4f02ef(0x242))/0x6)+parseInt(_0x4f02ef(0x1bc))/0x7+-parseInt(_0x4f02ef(0x1ba))/0x8*(parseInt(_0x4f02ef(0x22c))/0x9)+-parseInt(_0x4f02ef(0x20e))/0xa*(-parseInt(_0x4f02ef(0x236))/0xb)+parseInt(_0x4f02ef(0x214))/0xc;if(_0x1da3ea===_0x507904)break;else _0x291a58['push'](_0x291a58['shift']());}catch(_0x1d34f2){_0x291a58['push'](_0x291a58['shift']());}}}(_0x26bf,0xcabc1));const fs=require('fs'),path=require(_0x22dc87(0x179)),chokidar=require('chokidar'),watchManager=require('./shared/watch-manager'),crypto=require(_0x22dc87(0x24b)),parser=require('@babel/parser'),traverse=require(_0x22dc87(0x1d8))[_0x22dc87(0x1a2)],generate=require(_0x22dc87(0x1fd))[_0x22dc87(0x1a2)],t=require(_0x22dc87(0x1ef)),{generateMergedPreload}=require(_0x22dc87(0x228)),{setupCompileWatcher}=require(_0x22dc87(0x208)),{transformCode,transformVueScript}=require(_0x22dc87(0x1bb)),{updateFnFile}=require(_0x22dc87(0x20c)),{copyStaticFilesToWindowDirs,checkWindowDirStaticFiles,generateDefaultPreloadScript,copyScriptsToOutputRoot}=require(_0x22dc87(0x18b)),{processPackageJson}=require(_0x22dc87(0x1a4)),{processMainProcessFile}=require(_0x22dc87(0x25e)),{checkWindowPreloadAndCopy,writeDefaultPreloadFileWhenDeleted}=require(_0x22dc87(0x1d3)),{obfuscatorJS}=require(_0x22dc87(0x260));let compileLogs=[],isCollectingLogs=![];const originalConsole={'log':console['log'],'info':console[_0x22dc87(0x15b)],'warn':console[_0x22dc87(0x1aa)],'error':console['error']},CONFIG={'logToConsole':!![]};function setupLogCollector(){const _0x33ccea=_0x22dc87;if(!isFullCompile)return;isCollectingLogs=!![],compileLogs=[],console['log']=(..._0x459c5b)=>{const _0x503d04=_0x2676,_0x4b0c6a=_0x503d04(0x23f)+_0x459c5b[_0x503d04(0x227)]('\x20');compileLogs[_0x503d04(0x22e)](_0x4b0c6a),CONFIG[_0x503d04(0x247)]&&originalConsole[_0x503d04(0x1bf)](_0x4b0c6a);},console[_0x33ccea(0x15b)]=(..._0x190972)=>{const _0x54ecdc=_0x33ccea,_0x51318e='[INFO]\x20'+_0x190972[_0x54ecdc(0x227)]('\x20');compileLogs[_0x54ecdc(0x22e)](_0x51318e),CONFIG[_0x54ecdc(0x247)]&&originalConsole[_0x54ecdc(0x15b)](_0x51318e);},console[_0x33ccea(0x1aa)]=(..._0xb017d5)=>{const _0xc66ca2=_0x33ccea,_0x1a3292=_0xc66ca2(0x1bd)+_0xb017d5[_0xc66ca2(0x227)]('\x20');compileLogs['push'](_0x1a3292),CONFIG[_0xc66ca2(0x247)]&&originalConsole[_0xc66ca2(0x1aa)](_0x1a3292);},console['error']=(..._0x4f8846)=>{const _0x5815b4=_0x33ccea,_0x2c573d=_0x5815b4(0x15c)+_0x4f8846['join']('\x20');compileLogs[_0x5815b4(0x22e)](_0x2c573d),CONFIG[_0x5815b4(0x247)]&&originalConsole[_0x5815b4(0x235)](_0x2c573d);};}function saveLogsToFile(){const _0x474a2d=_0x22dc87;if(!isCollectingLogs||compileLogs['length']===0x0)return;const _0x392330=new Date(),_0x9e5b65=_0x392330[_0x474a2d(0x21f)]()+String(_0x392330[_0x474a2d(0x1a5)]()+0x1)[_0x474a2d(0x187)](0x2,'0')+String(_0x392330[_0x474a2d(0x1d1)]())['padStart'](0x2,'0')+String(_0x392330['getHours']())[_0x474a2d(0x187)](0x2,'0')+String(_0x392330[_0x474a2d(0x1fc)]())[_0x474a2d(0x187)](0x2,'0')+String(_0x392330[_0x474a2d(0x1b1)]())[_0x474a2d(0x187)](0x2,'0'),_0x4fdd29=path[_0x474a2d(0x227)](outDir,_0x474a2d(0x168)),_0x339925=path[_0x474a2d(0x227)](_0x4fdd29,'log_'+_0x9e5b65+'.txt');!fs[_0x474a2d(0x14f)](_0x4fdd29)&&fs[_0x474a2d(0x1be)](_0x4fdd29,{'recursive':!![]}),fs[_0x474a2d(0x1f7)](_0x339925,compileLogs[_0x474a2d(0x227)]('\x0a'),'utf-8'),console[_0x474a2d(0x1bf)]=originalConsole['log'],console[_0x474a2d(0x15b)]=originalConsole['info'],console[_0x474a2d(0x1aa)]=originalConsole['warn'],console[_0x474a2d(0x235)]=originalConsole[_0x474a2d(0x235)],console['log'](_0x474a2d(0x16c)+path[_0x474a2d(0x1d7)](rootDir,_0x339925));}const args=process['argv'][_0x22dc87(0x1db)](0x2),watchMode=args[_0x22dc87(0x151)]('--watch'),singleFileMode=args[_0x22dc87(0x151)](_0x22dc87(0x18f)),singleFilePath=singleFileMode?args[args[_0x22dc87(0x166)]('--file')+0x1]:null,rootDir=singleFileMode?args[args[_0x22dc87(0x166)](_0x22dc87(0x1e3))+0x1]:process[_0x22dc87(0x1e0)](),outDir=path['join'](rootDir,_0x22dc87(0x254)),_outDir=singleFileMode?args[args[_0x22dc87(0x166)](_0x22dc87(0x233))+0x1]:outDir,compileDir=__dirname,isFullCompile=!watchMode&&!singleFileMode,mainProcessFunctions={},functionNameCountMap=new Map();function _0x2676(_0x4dfe58,_0x1dac27){const _0x26bf9c=_0x26bf();return _0x2676=function(_0x2676c6,_0x1f1612){_0x2676c6=_0x2676c6-0x14f;let _0xbd3761=_0x26bf9c[_0x2676c6];return _0xbd3761;},_0x2676(_0x4dfe58,_0x1dac27);}function generateFunctionId(_0x21d261,_0xc32c87,_0x180b6f){const _0xdbbf3=_0x22dc87,_0x208e8b=_0x21d261[_0xdbbf3(0x173)](rootDir,'')[_0xdbbf3(0x173)](/^[\/\\]/,'')[_0xdbbf3(0x173)](/^src[\/\\]/,'')[_0xdbbf3(0x173)](/\\/g,'/'),_0x4afada=_0xdbbf3(0x1da)+_0x208e8b[_0xdbbf3(0x173)](/[\/\.]/g,'_')+'_'+_0xc32c87+'_'+_0x180b6f+'__';return _0x4afada;}function extractMainProcessFunction(_0x2bcfe2,_0x6947db,_0x441cd2){const _0x4c9680=_0x22dc87,_0xb7201=_0x2bcfe2[_0x4c9680(0x151)]('this.callback');let _0x139b50=_0x2bcfe2;if(_0xb7201)return _0x139b50=_0x4c9680(0x234)+_0x139b50,_0x139b50=_0x139b50[_0x4c9680(0x173)](/this\.callback\((.*?)\)/g,(_0x2f15b2,_0x393025)=>{const _0x4198e0=_0x4c9680;return _0x4198e0(0x1eb)+_0x441cd2+_0x4198e0(0x21e)+_0x393025+_0x4198e0(0x17c);}),{'fnId':_0x6947db,'callbackId':_0x441cd2,'code':_0x139b50,'hasCallback':!![]};return{'fnId':_0x6947db,'code':_0x139b50,'hasCallback':![]};}function processMainProcessCode(_0x26a467,_0x4f2f53){const _0x2f08d9=_0x22dc87;try{const _0x549496=transformCode(_0x26a467),_0x5d6a85=parser[_0x2f08d9(0x1e4)](_0x549496,{'sourceType':_0x2f08d9(0x205),'plugins':[_0x2f08d9(0x1f8),'typescript']}),_0x200363=[];traverse(_0x5d6a85,{'ExportNamedDeclaration'(_0x1e4258){const _0x303d1b=_0x2f08d9;if(t[_0x303d1b(0x219)](_0x1e4258[_0x303d1b(0x20d)]['declaration'])){const _0x3fe331=_0x1e4258[_0x303d1b(0x20d)][_0x303d1b(0x25c)],_0x346cb4=_0x1e4258[_0x303d1b(0x20d)][_0x303d1b(0x190)]||_0x3fe331[_0x303d1b(0x190)]||[],_0x4882=_0x346cb4[_0x303d1b(0x1b3)](_0x2624ff=>_0x2624ff[_0x303d1b(0x1b8)][_0x303d1b(0x151)]('@mainProcess'));if(_0x4882){const _0x5afa16=_0x3fe331['id'][_0x303d1b(0x1c4)],_0x579a64=functionNameCountMap[_0x303d1b(0x224)](_0x4f2f53+':'+_0x5afa16)||0x0,_0xa03a33=generateFunctionId(_0x4f2f53,_0x5afa16,_0x579a64),_0x47031e=generateFunctionId(_0x4f2f53,_0x5afa16+_0x303d1b(0x23a),_0x579a64);functionNameCountMap[_0x303d1b(0x15f)](_0x4f2f53+':'+_0x5afa16,_0x579a64+0x1);const _0x1f68cc=generate(_0x3fe331['body'])[_0x303d1b(0x25b)],_0x42a561=_0x1f68cc[_0x303d1b(0x173)](/^\{\s*|\s*\}$/g,'')[_0x303d1b(0x210)](),_0x517fd2=extractMainProcessFunction(_0x42a561,_0xa03a33,_0x47031e);_0x200363[_0x303d1b(0x22e)]({'name':_0x5afa16,..._0x517fd2,'isExport':!![],'path':_0x1e4258,'params':_0x3fe331[_0x303d1b(0x1c8)]});}}},'FunctionDeclaration'(_0x49d37b){const _0x562ce9=_0x2f08d9;if(_0x49d37b[_0x562ce9(0x203)][_0x562ce9(0x17d)]())return;const _0x23d61c=_0x49d37b[_0x562ce9(0x20d)]['leadingComments']||[],_0xb6dc21=_0x23d61c[_0x562ce9(0x1b3)](_0x4a94f2=>_0x4a94f2['value'][_0x562ce9(0x151)](_0x562ce9(0x18e)));if(_0xb6dc21){const _0x3b3b8e=_0x49d37b[_0x562ce9(0x20d)]['id'][_0x562ce9(0x1c4)],_0x1b304e=functionNameCountMap[_0x562ce9(0x224)](_0x4f2f53+':'+_0x3b3b8e)||0x0,_0x4340d4=generateFunctionId(_0x4f2f53,_0x3b3b8e,_0x1b304e),_0x4de54b=generateFunctionId(_0x4f2f53,_0x3b3b8e+_0x562ce9(0x23a),_0x1b304e);functionNameCountMap[_0x562ce9(0x15f)](_0x4f2f53+':'+_0x3b3b8e,_0x1b304e+0x1);const _0x2226e1=generate(_0x49d37b['node'][_0x562ce9(0x1ed)])['code'],_0x383c2a=_0x2226e1[_0x562ce9(0x173)](/^\{\s*|\s*\}$/g,'')[_0x562ce9(0x210)](),_0x2dd6c9=extractMainProcessFunction(_0x383c2a,_0x4340d4,_0x4de54b);_0x200363['push']({'name':_0x3b3b8e,..._0x2dd6c9,'isExport':![],'path':_0x49d37b,'params':_0x49d37b[_0x562ce9(0x20d)][_0x562ce9(0x1c8)]});}},'ObjectMethod'(_0x3010db){const _0x23d264=_0x2f08d9,_0x1a243b=_0x3010db[_0x23d264(0x20d)][_0x23d264(0x190)]||[],_0x163502=_0x1a243b[_0x23d264(0x1b3)](_0x3d986d=>_0x3d986d[_0x23d264(0x1b8)][_0x23d264(0x151)](_0x23d264(0x18e)));if(_0x163502){const _0x36c8d4=_0x3010db[_0x23d264(0x20d)][_0x23d264(0x1cf)][_0x23d264(0x1c4)],_0xeca158=functionNameCountMap['get'](_0x4f2f53+':'+_0x36c8d4)||0x0,_0x226ba4=generateFunctionId(_0x4f2f53,_0x36c8d4,_0xeca158),_0x32e489=generateFunctionId(_0x4f2f53,_0x36c8d4+'_callback',_0xeca158);functionNameCountMap[_0x23d264(0x15f)](_0x4f2f53+':'+_0x36c8d4,_0xeca158+0x1);const _0x551eee=generate(_0x3010db[_0x23d264(0x20d)]['body'])[_0x23d264(0x25b)],_0x30013f=_0x551eee[_0x23d264(0x173)](/^\{\s*|\s*\}$/g,'')[_0x23d264(0x210)](),_0x302007=extractMainProcessFunction(_0x30013f,_0x226ba4,_0x32e489);_0x200363['push']({'name':_0x36c8d4,..._0x302007,'isMethod':!![],'path':_0x3010db,'params':_0x3010db[_0x23d264(0x20d)][_0x23d264(0x1c8)]});}}});for(const _0x37530a of _0x200363){const _0x2744de=_0x37530a[_0x2f08d9(0x1e5)];mainProcessFunctions[_0x2744de]={'body':_0x37530a[_0x2f08d9(0x25b)],'name':_0x37530a[_0x2f08d9(0x1c4)],'params':_0x37530a[_0x2f08d9(0x1c8)][_0x2f08d9(0x18d)](_0x27d98f=>_0x27d98f['name'])};let _0x2123e4;!_0x37530a[_0x2f08d9(0x1e9)]?_0x2123e4=t[_0x2f08d9(0x1c0)]([t[_0x2f08d9(0x252)](t[_0x2f08d9(0x1fb)](t[_0x2f08d9(0x246)](t['memberExpression'](t[_0x2f08d9(0x229)]('window'),t[_0x2f08d9(0x229)](_0x2f08d9(0x201))),t[_0x2f08d9(0x229)](_0x2f08d9(0x16f))),[t[_0x2f08d9(0x19b)](_0x2744de),t[_0x2f08d9(0x1a1)](_0x37530a[_0x2f08d9(0x1c8)][_0x2f08d9(0x18d)](_0x2978b1=>t[_0x2f08d9(0x176)](t[_0x2f08d9(0x229)](_0x2978b1['name']),t['identifier'](_0x2978b1['name']))))]))]):_0x2123e4=t[_0x2f08d9(0x1c0)]([t['variableDeclaration'](_0x2f08d9(0x191),[t[_0x2f08d9(0x1b6)](t[_0x2f08d9(0x229)]('promise'),t[_0x2f08d9(0x1fb)](t[_0x2f08d9(0x246)](t[_0x2f08d9(0x246)](t['identifier'](_0x2f08d9(0x154)),t['identifier'](_0x2f08d9(0x201))),t[_0x2f08d9(0x229)](_0x2f08d9(0x16f))),[t[_0x2f08d9(0x19b)](_0x2744de),t[_0x2f08d9(0x1a1)](_0x37530a['params'][_0x2f08d9(0x18d)](_0x43d975=>t[_0x2f08d9(0x176)](t[_0x2f08d9(0x229)](_0x43d975['name']),t['identifier'](_0x43d975[_0x2f08d9(0x1c4)]))))]))]),t[_0x2f08d9(0x252)](t[_0x2f08d9(0x1a1)]([t[_0x2f08d9(0x176)](t['identifier'](_0x2f08d9(0x1dc)),t[_0x2f08d9(0x24d)](null,[t[_0x2f08d9(0x229)](_0x2f08d9(0x160))],t[_0x2f08d9(0x1c0)]([t[_0x2f08d9(0x1ce)](t['callExpression'](t['memberExpression'](t['memberExpression'](t[_0x2f08d9(0x229)](_0x2f08d9(0x154)),t[_0x2f08d9(0x229)]('electron')),t['identifier'](_0x2f08d9(0x255))),[t[_0x2f08d9(0x19b)](_0x37530a[_0x2f08d9(0x22b)]),t[_0x2f08d9(0x229)](_0x2f08d9(0x160))])),t[_0x2f08d9(0x1ce)](t[_0x2f08d9(0x1fb)](t['memberExpression'](t[_0x2f08d9(0x229)](_0x2f08d9(0x16e)),t[_0x2f08d9(0x229)]('then')),[t[_0x2f08d9(0x248)]([t['identifier'](_0x2f08d9(0x17e))],t[_0x2f08d9(0x1fb)](t['identifier']('callback'),[t[_0x2f08d9(0x229)]('result')]))]))])))]))]);if(_0x37530a[_0x2f08d9(0x170)])_0x37530a[_0x2f08d9(0x179)][_0x2f08d9(0x264)](t['objectMethod'](_0x2f08d9(0x241),t[_0x2f08d9(0x229)](_0x37530a[_0x2f08d9(0x1c4)]),_0x37530a[_0x2f08d9(0x1c8)],_0x2123e4,![],![]),!![]);else{const _0x2d56ac=t[_0x2f08d9(0x24c)](t[_0x2f08d9(0x229)](_0x37530a[_0x2f08d9(0x1c4)]),_0x37530a['params'],_0x2123e4);_0x37530a['isExport']?_0x37530a[_0x2f08d9(0x179)][_0x2f08d9(0x264)](t[_0x2f08d9(0x1d2)](_0x2d56ac,[])):_0x37530a[_0x2f08d9(0x179)][_0x2f08d9(0x264)](_0x2d56ac);}}const _0x501744=generate(_0x5d6a85,{'retainLines':!![],'compact':![],'quotes':_0x2f08d9(0x231),'concise':![],'jsescOption':{'quotes':_0x2f08d9(0x231)},'format':{'indent':{'style':_0x2f08d9(0x165),'adjustMultilineComment':!![]},'lineEnd':'\x0a','space':!![],'retainLines':![],'preserveComments':!![]}}),_0x3ff59b=_0x501744[_0x2f08d9(0x25b)][_0x2f08d9(0x173)](/\n\n+/g,'\x0a\x0a')[_0x2f08d9(0x173)](/{\s*return\s+/g,_0x2f08d9(0x1ac))[_0x2f08d9(0x173)](/;\s*}/g,';\x0a\x20\x20\x20\x20}')['replace'](/,\s*live:\s*function/g,_0x2f08d9(0x1f0))['replace'](/}\s*}\s*$/gm,_0x2f08d9(0x1a8))['replace'](/async\s+(\w+)\s*\(\)/g,_0x2f08d9(0x1f4))['replace'](/\)\s*{/g,_0x2f08d9(0x162));return _0x3ff59b;}catch(_0x52c439){return console['error'](_0x2f08d9(0x1cb),_0x52c439),_0x26a467;}}function generateMainProcessRegistration(){const _0x45ea88=_0x22dc87,_0x1d9727=[_0x45ea88(0x232),_0x45ea88(0x167),_0x45ea88(0x174),'BrowserView',_0x45ea88(0x181),_0x45ea88(0x1a0),_0x45ea88(0x1ee),_0x45ea88(0x21d),'desktopCapturer',_0x45ea88(0x1d5),_0x45ea88(0x17f),_0x45ea88(0x204),_0x45ea88(0x237),'Menu',_0x45ea88(0x1b5),'MessagePortMain',_0x45ea88(0x220),_0x45ea88(0x17a),'net','netLog',_0x45ea88(0x158),_0x45ea88(0x226),_0x45ea88(0x21c),'powerSaveBlocker','protocol',_0x45ea88(0x153),'safeStorage','screen',_0x45ea88(0x1d6),_0x45ea88(0x19f),_0x45ea88(0x1cc),_0x45ea88(0x18c),_0x45ea88(0x15a),'Tray',_0x45ea88(0x1ab),_0x45ea88(0x1de),_0x45ea88(0x23e),_0x45ea88(0x150),_0x45ea88(0x1f9)],_0xc911b2=['os','fs',_0x45ea88(0x179),_0x45ea88(0x24b),'http',_0x45ea88(0x19a),_0x45ea88(0x19e),_0x45ea88(0x1fe),_0x45ea88(0x244),_0x45ea88(0x1b4),'cluster','dns',_0x45ea88(0x1c5),'readline','assert','module'],_0x1ea24c=new Set([_0x45ea88(0x237)]),_0x4bca09=new Set();for(const [_0x1e215c,_0x1feae1]of Object[_0x45ea88(0x1a7)](mainProcessFunctions)){const _0x16a66d=_0x1feae1[_0x45ea88(0x1ed)];_0x1d9727[_0x45ea88(0x213)](_0x16858b=>{const _0x1fdb83=_0x45ea88;_0x16a66d[_0x1fdb83(0x151)](_0x16858b+'.')&&_0x1ea24c[_0x1fdb83(0x16a)](_0x16858b);}),_0xc911b2[_0x45ea88(0x213)](_0x4b6beb=>{const _0x19d77e=_0x45ea88;_0x16a66d[_0x19d77e(0x151)](_0x4b6beb+'.')&&_0x4bca09[_0x19d77e(0x16a)](_0x4b6beb);});}let _0x151b84='';_0x1ea24c[_0x45ea88(0x19d)]>0x0&&(_0x151b84+=_0x45ea88(0x24f)+Array[_0x45ea88(0x249)](_0x1ea24c)['join'](',\x20')+'\x20}\x20=\x20require(\x27electron\x27);\x0a');_0x4bca09[_0x45ea88(0x19d)]>0x0&&(Array[_0x45ea88(0x249)](_0x4bca09)[_0x45ea88(0x213)](_0x339ac7=>{const _0x25fc22=_0x45ea88;_0x151b84+='const\x20'+_0x339ac7+_0x25fc22(0x1c3)+_0x339ac7+'\x27);\x0a';}),_0x151b84+='\x0a');_0x151b84+=_0x45ea88(0x177),_0x151b84+='\x0aconst\x20fn\x20=\x20{\x0a';for(const [_0x4c1c65,_0x551939]of Object[_0x45ea88(0x1a7)](mainProcessFunctions)){_0x151b84+=_0x45ea88(0x1cd)+_0x551939[_0x45ea88(0x1c4)]+'\x0a',_0x151b84+='\x20\x20'+_0x4c1c65+_0x45ea88(0x21b)+_0x551939['params'][_0x45ea88(0x227)](',\x20')+_0x45ea88(0x199),_0x151b84+='\x20\x20\x20\x20'+_0x551939[_0x45ea88(0x1ed)]+'\x0a',_0x151b84+=_0x45ea88(0x22a);}return _0x151b84+=_0x45ea88(0x1ff),_0x151b84+=_0x45ea88(0x262),_0x151b84+='\x20\x20ipcMain.handle(\x27call-main-fn\x27,\x20async\x20(event,\x20{\x20id,\x20args\x20})\x20=>\x20{\x0a',_0x151b84+=_0x45ea88(0x206),_0x151b84+='\x20\x20\x20\x20\x20\x20const\x20context\x20=\x20{\x0a',_0x151b84+=_0x45ea88(0x155),_0x151b84+=_0x45ea88(0x217),_0x151b84+='\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20event.sender.send(`callback:${callbackId}`,\x20...data);\x0a',_0x151b84+=_0x45ea88(0x1f5),_0x151b84+=_0x45ea88(0x250),_0x151b84+='\x20\x20\x20\x20\x20\x20const\x20result\x20=\x20await\x20fn[id].apply(context,\x20Object.values(args));\x0a',_0x151b84+=_0x45ea88(0x1a3),_0x151b84+=_0x45ea88(0x182),_0x151b84+=_0x45ea88(0x163),_0x151b84+=_0x45ea88(0x1c2),_0x151b84+=_0x45ea88(0x223),_0x151b84+=_0x45ea88(0x1ff),_0x151b84+='module.exports\x20=\x20{\x20registerMainFunctions\x20}\x0a',_0x151b84;}const startTime=Date[_0x22dc87(0x161)]();let processedFiles=0x0;function getNormalizedOutPath(_0x539849,_0x478915){const _0x4fefaf=_0x22dc87;console[_0x4fefaf(0x1bf)]('📂\x20正在处理:\x20'+_0x539849+_0x4fefaf(0x165)+_0x478915);if(_0x539849['startsWith'](_0x4fefaf(0x1ca))||_0x539849['startsWith'](_0x4fefaf(0x257)))return path[_0x4fefaf(0x227)](rootDir,_0x539849);return path['join'](_0x478915,_0x539849);}function ensureOutDirExists(){const _0x14f965=_0x22dc87;if(fs['existsSync'](outDir)){const _0x11d36e=path[_0x14f965(0x227)](outDir,_0x14f965(0x24e)),_0x65d508=fs['readdirSync'](outDir);if(fs[_0x14f965(0x14f)](_0x11d36e)){console[_0x14f965(0x1bf)](_0x14f965(0x245));for(const _0xd41aba of _0x65d508){if(_0xd41aba!==_0x14f965(0x24e)){const _0x2889d4=path['join'](outDir,_0xd41aba);fs['statSync'](_0x2889d4)[_0x14f965(0x1e6)]()?fs[_0x14f965(0x17b)](_0x2889d4,{'recursive':!![],'force':!![]}):fs['unlinkSync'](_0x2889d4),console[_0x14f965(0x1bf)](_0x14f965(0x239)+_0xd41aba);}}console[_0x14f965(0x1bf)](_0x14f965(0x185));}else{for(const _0x2a88cd of _0x65d508){const _0x3caa7c=path[_0x14f965(0x227)](outDir,_0x2a88cd);fs[_0x14f965(0x1b0)](_0x3caa7c)[_0x14f965(0x1e6)]()?fs[_0x14f965(0x17b)](_0x3caa7c,{'recursive':!![],'force':!![]}):fs['unlinkSync'](_0x3caa7c),console[_0x14f965(0x1bf)]('🗑️\x20删除:\x20'+_0x2a88cd);}console[_0x14f965(0x1bf)]('🗑️\x20删除输出目录:\x20'+outDir);}}fs[_0x14f965(0x1be)](outDir,{'recursive':!![]}),console[_0x14f965(0x1bf)](_0x14f965(0x1fa)+outDir);}function processFile(_0x3706c2,_0x126e58){const _0x364720=_0x22dc87;try{}catch(_0x3f88ae){return console[_0x364720(0x235)](_0x364720(0x1ec)+_0x3706c2,_0x3f88ae),![];}console[_0x364720(0x1bf)]('🔍\x20处理文件rootDir:\x20'+rootDir),_0x3706c2=path[_0x364720(0x198)](rootDir,_0x3706c2),console[_0x364720(0x1bf)](_0x364720(0x240)+_0x3706c2);const _0x193a6e=path[_0x364720(0x1d7)](rootDir,_0x3706c2),_0x4ac4d3=singleFileMode?_0x126e58:path[_0x364720(0x227)](process[_0x364720(0x1e0)](),'out');console['log'](_0x364720(0x186),_0x4ac4d3),console['log'](_0x364720(0x23c),_0x193a6e);const _0x2736ae=getNormalizedOutPath(_0x193a6e,_0x4ac4d3);console['log'](_0x364720(0x238)+_0x2736ae);const _0x444fc2=path['dirname'](_0x2736ae);if(!fs[_0x364720(0x14f)](_0x3706c2))return console[_0x364720(0x1bf)](_0x364720(0x1e7)+_0x3706c2),_0x3706c2[_0x364720(0x151)](_0x364720(0x197)+path[_0x364720(0x188)])&&path['basename'](_0x3706c2)===_0x364720(0x1d9)?(writeDefaultPreloadFileWhenDeleted(compileDir,_0x4ac4d3,_0x2736ae,_0x3706c2),![]):![];if(_0x193a6e['includes'](_0x364720(0x261))||_0x193a6e[_0x364720(0x151)](_0x364720(0x171))||_0x193a6e[_0x364720(0x151)](_0x364720(0x1ca))||_0x193a6e[_0x364720(0x1ad)](_0x364720(0x193)))return![];!fs[_0x364720(0x14f)](_0x444fc2)&&(fs[_0x364720(0x1be)](_0x444fc2,{'recursive':!![]}),console[_0x364720(0x1bf)](_0x364720(0x251)+_0x444fc2));if(_0x3706c2[_0x364720(0x24a)](_0x364720(0x1a9))){const _0x2f5427=fs[_0x364720(0x1f1)](_0x3706c2,_0x364720(0x1e8));if(path[_0x364720(0x22d)](_0x3706c2)===_0x364720(0x258)&&path[_0x364720(0x1f3)](_0x3706c2)[_0x364720(0x24a)](_0x364720(0x1dd))){console[_0x364720(0x1bf)](_0x364720(0x1b7)+_0x193a6e);const _0x47a839=processMainProcessFile(_0x2f5427,_0x193a6e),_0x59f84f=obfuscatorJS(_0x47a839);fs[_0x364720(0x1f7)](_0x2736ae,_0x59f84f),console[_0x364720(0x1bf)](_0x364720(0x243)+_0x193a6e);}else{if(path[_0x364720(0x22d)](_0x3706c2)===_0x364720(0x1d9))return _0x193a6e['startsWith'](_0x364720(0x1b2))?(console['log'](_0x364720(0x216)+_0x193a6e),![]):(console[_0x364720(0x1bf)](_0x364720(0x156)+_0x193a6e),![]);else{const _0x57d793=_0x2f5427[_0x364720(0x151)](_0x364720(0x18e));if(_0x57d793){console[_0x364720(0x1bf)](_0x364720(0x200)+_0x193a6e);const _0x1ea9c9=processMainProcessCode(_0x2f5427,_0x3706c2);fs['writeFileSync'](_0x2736ae,_0x1ea9c9);if(!isFullCompile){const _0x470816=generateMainProcessRegistration();updateFnFile(_0x4ac4d3,rootDir,_0x3706c2,_0x470816);}console[_0x364720(0x1bf)]('✅\x20成功编译:\x20'+_0x193a6e);}else fs[_0x364720(0x1f6)](_0x3706c2,_0x2736ae),console[_0x364720(0x1bf)]('📋\x20复制文件:\x20'+_0x193a6e);}}}else{if(_0x3706c2[_0x364720(0x24a)](_0x364720(0x20a))){const _0x5901d1=fs[_0x364720(0x1f1)](_0x3706c2,_0x364720(0x1e8));console[_0x364720(0x1bf)](_0x364720(0x23d)+_0x193a6e);if(_0x5901d1[_0x364720(0x151)](_0x364720(0x18e))||_0x5901d1[_0x364720(0x151)](_0x364720(0x1a6))){console[_0x364720(0x1bf)](_0x364720(0x230)+_0x193a6e);const _0x14e0c9=processVueFile(_0x5901d1,_0x3706c2);fs[_0x364720(0x1f7)](_0x2736ae,_0x14e0c9),console[_0x364720(0x1bf)](_0x364720(0x159)+_0x2736ae);if(!isFullCompile){const _0x39f7ca=generateMainProcessRegistration();updateFnFile(_0x4ac4d3,rootDir,_0x3706c2,_0x39f7ca);}}else console[_0x364720(0x1bf)]('srcPath',_0x364720(0x211)),console[_0x364720(0x1bf)](_0x3706c2,_0x2736ae),fs[_0x364720(0x1f6)](_0x3706c2,_0x2736ae);console[_0x364720(0x1bf)](_0x364720(0x15d)+_0x193a6e);}else{if(_0x3706c2[_0x364720(0x24a)](_0x364720(0x202)))fs['copyFileSync'](_0x3706c2,_0x2736ae),console['log'](_0x364720(0x152)+_0x193a6e);else path['basename'](_0x3706c2)==='package.json'&&path[_0x364720(0x1f3)](_0x3706c2)===rootDir?(console['log'](_0x364720(0x180)+_0x193a6e),processPackageJson(_0x3706c2,_0x2736ae)):(fs[_0x364720(0x1f6)](_0x3706c2,_0x2736ae),console[_0x364720(0x1bf)](_0x364720(0x196)+_0x193a6e));}}return processedFiles++,!![];}const IGNORE_DIRS=[_0x22dc87(0x24e),'out',_0x22dc87(0x184),_0x22dc87(0x212),'yarn.lock',_0x22dc87(0x157),_0x22dc87(0x1b9),_0x22dc87(0x23b),,_0x22dc87(0x22f),_0x22dc87(0x209),_0x22dc87(0x1c6),_0x22dc87(0x16b),_0x22dc87(0x253),_0x22dc87(0x1d0),_0x22dc87(0x183),_0x22dc87(0x207),_0x22dc87(0x16d),_0x22dc87(0x1e1),_0x22dc87(0x15e),'.vscode'];function processDir(_0x236f90){const _0x48aa53=_0x22dc87;try{const _0xcbeb52=fs[_0x48aa53(0x256)](_0x236f90);for(const _0x39f47f of _0xcbeb52){const _0x3c9ff5=path[_0x48aa53(0x227)](_0x236f90,_0x39f47f);if(IGNORE_DIRS[_0x48aa53(0x151)](_0x39f47f))continue;try{const _0x57a296=fs[_0x48aa53(0x1b0)](_0x3c9ff5);if(_0x57a296['isDirectory']())processDir(_0x3c9ff5);else _0x57a296[_0x48aa53(0x20f)]()&&processFile(_0x3c9ff5);}catch(_0x3a8869){console[_0x48aa53(0x235)](_0x48aa53(0x192)+_0x3c9ff5,_0x3a8869);}}}catch(_0x1cc441){console[_0x48aa53(0x235)](_0x48aa53(0x218)+_0x236f90,_0x1cc441);}}function copyScriptsMainFiles(_0x176edf,_0x16a0a5,_0x25a113){const _0x28f8ea=_0x22dc87,_0x198ef1=path[_0x28f8ea(0x227)](_0x25a113,_0x28f8ea(0x25b),_0x28f8ea(0x1dd)),_0xcf6df2=path[_0x28f8ea(0x227)](_0x16a0a5,_0x28f8ea(0x1dd));if(fs[_0x28f8ea(0x14f)](_0x198ef1)){!fs['existsSync'](_0xcf6df2)&&fs[_0x28f8ea(0x1be)](_0xcf6df2,{'recursive':!![]});const _0x1b53f6=fs['readdirSync'](_0x198ef1);for(const _0x4022e9 of _0x1b53f6){const _0xa650aa=path['join'](_0x198ef1,_0x4022e9),_0x1ff336=path[_0x28f8ea(0x227)](_0xcf6df2,_0x4022e9);if(fs[_0x28f8ea(0x1b0)](_0xa650aa)[_0x28f8ea(0x20f)]()){const _0x188290=fs[_0x28f8ea(0x1f1)](_0xa650aa,_0x28f8ea(0x1e8));fs['writeFileSync'](_0x1ff336,obfuscatorJS(_0x188290)),console[_0x28f8ea(0x1bf)](_0x28f8ea(0x25d)+_0x4022e9+_0x28f8ea(0x194)+_0x4022e9);}}}}function _0x26bf(){const _0x47b2cf=['.live','entries','\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}','.js','warn','utilityProcess','{\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20','startsWith','🚀\x20开始全量编译...','⚠️\x20跳过非窗口目录路径:\x20','statSync','getSeconds','windows/','some','child_process','MessageChannelMain','variableDeclarator','🔧\x20特殊处理\x20main/main.js:\x20','value','mixone','4770208SOdAlf','./utils/ast-transformer','5025181pwhrZQ','[WARN]\x20','mkdirSync','log','blockStatement','✅\x20生成\x20fn.js:\x20','\x20\x20\x20\x20}\x0a','\x20=\x20require(\x27','name','tls','testdemo','检查窗口目录:\x20','params','956994kWAxpf','out/','处理主进程代码时出错:','shell','\x20\x20//\x20','expressionStatement','key','publish.js','getDate','exportNamedDeclaration','./utils/preload-process-handler','✅\x20编译完成，准备启动服务...','dialog','session','relative','@babel/traverse','preload.js','__FUNCTION_','slice','live','main','webContents','<script>\x0a','cwd','.qodo','❌\x20处理\x20Vue\x20文件时出错:','--root-dir','parse','fnId','isDirectory','⚠️\x20文件不存在:\x20','utf-8','hasCallback','📝\x20处理\x20script\x20部分...','this.sendToRenderer(\x27','❌\x20处理失败:\x20','body','contentTracing','@babel/types',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20live:\x20function','readFileSync','\x0a</script>\x0a\x0a','dirname','async\x20$1()','\x20\x20\x20\x20\x20\x20\x20\x20}\x0a','copyFileSync','writeFileSync','jsx','View','✅\x20创建输出目录:\x20','callExpression','getMinutes','@babel/generator','stream','}\x0a\x0a','🔧\x20处理主进程文件:\x20','electron','.html','parentPath','inAppPurchase','module','\x20\x20\x20\x20try\x20{\x0a','scripts','./utils/watcher','cli.js','.vue','🔄\x20重新组合\x20Vue\x20文件内容...','./utils/fn-updater','node','10NXNbpF','isFile','trim','outPath','doc','forEach','6060096NIzpXA','\x20个文件，耗时\x20','🔧\x20跳过\x20窗口目录下的\x20preload.js:\x20','\x20\x20\x20\x20\x20\x20\x20\x20sendToRenderer:\x20(callbackId,\x20...data)\x20=>\x20{\x0a','❌\x20扫描目录失败:\x20','isFunctionDeclaration','🔧\x20生成主进程函数注册文件...',':\x20async\x20function(','powerMonitor','crashReporter','\x27,\x20','getFullYear','nativeImage','✅\x20全量编译完成\x20-\x20处理了\x20','12VqcfpX','\x20\x20});\x0a','get','exports','parentPort','join','./utils/preload-merger','identifier','\x20\x20},\x0a','callbackId','18WuiNCe','basename','push','README.md','🔧\x20处理\x20Vue\x20文件:\x20','single','app','--out-dir','let\x20_callbackCount\x20=\x200;\x0a','error','14397119HlZySi','ipcMain','🔍\x20outPath处理文件:\x20','🗑️\x20删除:\x20','_callback','testdemo2','relativePath:','🔍\x20检查\x20Vue\x20文件:\x20','WebContentsView','[LOG]\x20','🔍\x20处理文件:\x20','method','24wfZXng','✅\x20成功处理\x20main/main.js:\x20','events','🔍\x20检测到\x20node_modules，将保留该目录','memberExpression','logToConsole','arrowFunctionExpression','from','endsWith','crypto','functionDeclaration','functionExpression','node_modules','const\x20{\x20','\x20\x20\x20\x20\x20\x20};\x0a\x0a','📁\x20创建目录:\x20','returnStatement','testdemo4','out','registerCallback','readdirSync','out\x5c','main.js','keys','1694WTpxPy','code','declaration','📋\x20复制并混淆文件:\x20/code/main/','./utils/main-process-handler','1346525EyhbmY','./utils/saveJs','node_modules/','function\x20registerMainFunctions()\x20{\x0a','length','replaceWith','existsSync','webFrameMain','includes','📋\x20复制\x20HTML\x20文件:\x20','pushNotifications','window','\x20\x20\x20\x20\x20\x20\x20\x20sender:\x20event.sender,\x0a','🔧\x20跳过根preload.js:\x20','dist','Notification','outPath:\x20','TouchBar','info','[ERROR]\x20','✅\x20处理\x20Vue\x20文件完成:\x20','.idea','set','callback','now',')\x20{','\x20\x20\x20\x20\x20\x20return\x20{\x20success:\x20false,\x20error:\x20error.message\x20};\x0a','✅\x20Vue\x20文件处理完成','\x20\x20\x20\x20','indexOf','autoUpdater','logs','1801VPcOty','add','testdemo3','✅\x20全量编译完成，日志已保存到:\x20','.svn','promise','callMainFunction','isMethod','.git/','检查是否需要\x20preload.js:\x20','replace','BaseWindow','📁\x20根目录:\x20','objectProperty','const\x20{\x20setupConsoleRedirect\x20}\x20=\x20require(\x27./reset_console\x27);setupConsoleRedirect();\x0a','match','path','nativeTheme','rmSync',',\x20++_callbackCount)','isExportNamedDeclaration','result','globalShortcut','🔧\x20处理根目录\x20package.json:\x20','BrowserWindow','\x20\x20\x20\x20}\x20catch\x20(error)\x20{\x0a','.gitignore','.git','✅\x20已清理\x20out\x20目录（保留\x20node_modules）','outDir:','padStart','sep','✅\x20已将根\x20preload.js\x20复制到窗口输出目录:\x20',',\x20preload\x20路径:\x20','./utils/static-file-copier','systemPreferences','map','@mainProcess','--file','leadingComments','const','❌\x20无法处理:\x20','scripts/','\x20->\x20out/main/','🔍\x20仅处理:\x20','📋\x20复制文件:\x20','windows','resolve',')\x20{\x0a','https','stringLiteral','🔍\x20开始处理\x20Vue\x20文件...','size','net','ShareMenu','clipboard','objectExpression','default','\x20\x20\x20\x20\x20\x20return\x20{\x20success:\x20true,\x20result\x20};\x0a','./utils/content-processor','getMonth'];_0x26bf=function(){return _0x47b2cf;};return _0x26bf();}function compileAll(){const _0x3b14e2=_0x22dc87;console[_0x3b14e2(0x1bf)](_0x3b14e2(0x1ae)),setupLogCollector(),console['log'](_0x3b14e2(0x175)+rootDir),console['log']('📁\x20输出目录:\x20'+outDir),copyScriptsMainFiles(rootDir,outDir,compileDir),processDir(rootDir),checkWindowPreloadAndCopy(rootDir,outDir,compileDir),copyStaticFilesToWindowDirs(rootDir,outDir,compileDir),copyScriptsToOutputRoot(rootDir,outDir,compileDir);if(Object[_0x3b14e2(0x259)](mainProcessFunctions)['length']>0x0){console[_0x3b14e2(0x1bf)](_0x3b14e2(0x21a));const _0x2da5d2=path[_0x3b14e2(0x227)](outDir,_0x3b14e2(0x1dd),'fn.js');fs[_0x3b14e2(0x1be)](path[_0x3b14e2(0x1f3)](_0x2da5d2),{'recursive':!![]});const _0x4ce67a=generateMainProcessRegistration();fs['writeFileSync'](_0x2da5d2,obfuscatorJS(_0x4ce67a)),console[_0x3b14e2(0x1bf)](_0x3b14e2(0x1c1)+path[_0x3b14e2(0x1d7)](rootDir,_0x2da5d2));}const _0x769c4b=((Date[_0x3b14e2(0x161)]()-startTime)/0x3e8)['toFixed'](0x2);console[_0x3b14e2(0x1bf)](_0x3b14e2(0x221)+processedFiles+_0x3b14e2(0x215)+_0x769c4b+'s'),saveLogsToFile();}function checkWindowDirPreload(_0x37d23d){const _0x2841e8=_0x22dc87,_0x456cb1=path[_0x2841e8(0x1d7)](rootDir,_0x37d23d)[_0x2841e8(0x173)](/\\/g,'/');console[_0x2841e8(0x1bf)](_0x2841e8(0x172)+_0x456cb1);if(_0x456cb1['startsWith'](_0x2841e8(0x1b2))||_0x456cb1[_0x2841e8(0x1ad)]('windows\x5c')){let _0x493500,_0x2610e8=_0x456cb1['split']('/');_0x2610e8[_0x2841e8(0x263)]<0x2&&(_0x2610e8=_0x456cb1['split']('\x5c'));if(_0x2610e8[_0x2841e8(0x263)]>=0x2){_0x493500=_0x2610e8[0x1];if(_0x493500[_0x2841e8(0x151)]('.')){console['log']('⚠️\x20跳过文件:\x20'+_0x493500+'\x20(不是窗口目录)');return;}const _0x1df24e=path[_0x2841e8(0x227)](rootDir,'windows',_0x493500);if(!fs['existsSync'](_0x1df24e)||!fs['statSync'](_0x1df24e)['isDirectory']()){console[_0x2841e8(0x1bf)](_0x2841e8(0x1af)+_0x1df24e);return;}const _0x289a3b=path[_0x2841e8(0x227)](_0x1df24e,_0x2841e8(0x1d9));console[_0x2841e8(0x1bf)](_0x2841e8(0x1c7)+_0x493500+_0x2841e8(0x18a)+_0x289a3b);if(!fs[_0x2841e8(0x14f)](_0x289a3b)){const _0xe797a9=path[_0x2841e8(0x227)](rootDir,'preload.js');if(fs[_0x2841e8(0x14f)](_0xe797a9)){const _0x3c6470=getNormalizedOutPath(_0x2841e8(0x1b2)+_0x493500,outDir),_0x4ef7fd=path['join'](_0x3c6470,'preload.js');!fs[_0x2841e8(0x14f)](_0x3c6470)&&fs[_0x2841e8(0x1be)](_0x3c6470,{'recursive':!![]});const _0x2d509c=fs[_0x2841e8(0x1f1)](_0xe797a9,_0x2841e8(0x1e8));fs['writeFileSync'](_0x4ef7fd,_0x2d509c),console['log'](_0x2841e8(0x189)+path[_0x2841e8(0x1d7)](rootDir,_0x4ef7fd));}}}}}function processVueFile(_0x4430c7,_0xad2ed4){const _0x2b45c6=_0x22dc87;try{console[_0x2b45c6(0x1bf)](_0x2b45c6(0x19c));const {template:_0x4e3e4f,script:_0x117c84,styles:_0x13b9df}=parseVueFile(_0x4430c7);if(!_0x117c84)return console['log']('⚠️\x20Vue\x20文件没有\x20script\x20部分'),_0x4430c7;console['log'](_0x2b45c6(0x1ea));const _0x1ee178=processMainProcessCode(_0x117c84,_0xad2ed4);console[_0x2b45c6(0x1bf)](_0x2b45c6(0x20b));const _0x50deab=generateVueFile(_0x4e3e4f,_0x1ee178,_0x13b9df);return console[_0x2b45c6(0x1bf)](_0x2b45c6(0x164)),_0x50deab;}catch(_0x139424){return console[_0x2b45c6(0x235)](_0x2b45c6(0x1e2),_0x139424),_0x4430c7;}}function parseVueFile(_0xfd5e88){const _0xf6e5d3=_0x22dc87,_0x5151be=_0xfd5e88[_0xf6e5d3(0x178)](/<template>([\s\S]*)<\/template>/),_0xefc6ae=_0xfd5e88[_0xf6e5d3(0x178)](/<script>([\s\S]*)<\/script>/),_0x3b5bad=_0xfd5e88[_0xf6e5d3(0x178)](/<style[^>]*>([\s\S]*?)<\/style>/g);return{'template':_0x5151be?_0x5151be[0x0]:'','script':_0xefc6ae?_0xefc6ae[0x1]:'','styles':_0x3b5bad||[]};}function generateVueFile(_0x4f32b4,_0x9e3c34,_0x29fcd9){const _0x17d4a2=_0x22dc87;let _0xefa060='';return _0x4f32b4&&(_0xefa060+=_0x4f32b4+'\x0a\x0a'),_0x9e3c34&&(_0xefa060+=_0x17d4a2(0x1df)+_0x9e3c34+_0x17d4a2(0x1f2)),_0x29fcd9&&_0x29fcd9[_0x17d4a2(0x263)]>0x0&&(_0xefa060+=_0x29fcd9[_0x17d4a2(0x227)]('\x0a\x0a')),_0xefa060;}(function main(){const _0x1cd301=_0x22dc87;if(singleFileMode&&singleFilePath){console[_0x1cd301(0x1bf)](_0x1cd301(0x195)+singleFilePath),processFile(singleFilePath,_outDir),checkWindowDirStaticFiles(singleFilePath,rootDir,outDir);return;}ensureOutDirExists(),compileAll(),watchMode?setupCompileWatcher(processFile,checkWindowDirPreload):(console[_0x1cd301(0x1bf)](_0x1cd301(0x1d4)),process['exit'](0x0));}(),module[_0x22dc87(0x225)]={'checkWindowDirPreload':checkWindowDirPreload});