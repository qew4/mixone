const _0x5ed923=_0x3ca6;(function(_0x7d83f7,_0xa0b73a){const _0x3c323e=_0x3ca6,_0xa92436=_0x7d83f7();while(!![]){try{const _0x1488c8=parseInt(_0x3c323e(0xe1))/0x1+-parseInt(_0x3c323e(0xdf))/0x2+parseInt(_0x3c323e(0xc2))/0x3+-parseInt(_0x3c323e(0xef))/0x4+-parseInt(_0x3c323e(0xc9))/0x5*(-parseInt(_0x3c323e(0xd6))/0x6)+-parseInt(_0x3c323e(0xc0))/0x7*(parseInt(_0x3c323e(0xf6))/0x8)+parseInt(_0x3c323e(0xcc))/0x9;if(_0x1488c8===_0xa0b73a)break;else _0xa92436['push'](_0xa92436['shift']());}catch(_0x24354d){_0xa92436['push'](_0xa92436['shift']());}}}(_0x488a,0x2d65d));const {spawnSync}=require(_0x5ed923(0xe2)),fs=require('fs'),path=require(_0x5ed923(0xeb));function findWindowDirs(_0x57c833){const _0x46c819=[];function _0x5eb9c7(_0x2b82b2){const _0x2b45b4=_0x3ca6;(_0x2b82b2[_0x2b45b4(0xf3)]('-window')||path[_0x2b45b4(0xe4)](_0x2b82b2)==='windows')&&_0x46c819['push'](_0x2b82b2);const _0x7ff5bb=fs[_0x2b45b4(0xf4)](_0x2b82b2);_0x7ff5bb['forEach'](_0x3af397=>{const _0x66d427=_0x2b45b4,_0x5c00c=path['join'](_0x2b82b2,_0x3af397);fs[_0x66d427(0xc7)](_0x5c00c)[_0x66d427(0xf5)]()&&_0x5eb9c7(_0x5c00c);});}return _0x5eb9c7(_0x57c833),_0x46c819;}function processStaticFiles(_0x4e438f){const _0x325c3f=_0x5ed923,_0x470036=fs[_0x325c3f(0xcb)](path[_0x325c3f(0xfc)](__dirname,_0x325c3f(0xe8)),_0x325c3f(0xdb)),_0x5b7501=fs[_0x325c3f(0xcb)](path[_0x325c3f(0xfc)](__dirname,_0x325c3f(0xdd)),_0x325c3f(0xdb)),_0xb503d4=JSON[_0x325c3f(0xe9)](fs[_0x325c3f(0xcb)](path[_0x325c3f(0xfc)](process[_0x325c3f(0xe5)](),_0x325c3f(0xed)),_0x325c3f(0xdb))),_0xe278e1=path[_0x325c3f(0xe4)](_0x4e438f),_0x1e452f=_0x470036[_0x325c3f(0xf7)](/____name____/g,_0xe278e1)['replace'](/____version____/g,_0xb503d4[_0x325c3f(0xf1)]),_0x27fcd3=_0x5b7501['replace'](/____outputDir____/g,path['join'](process['cwd'](),_0x325c3f(0xd7))['replace'](/\\/g,'/'));return{'packageJson':_0x1e452f,'viteConfig':_0x27fcd3};}function _0x488a(){const _0x13bf5f=['length','endsWith','readdirSync','isDirectory','8PmHPfH','replace','✨\x20所有窗口构建完成','build','dist','🏗️\x20开始构建窗口web:\x20','join','📂\x20找到\x20','--web','viteConfig','web','642873OtJEYE','exit','819831qGZRVm','slice','🏗️\x20开始构建窗口:\x20','🔄\x20处理窗口:\x20','run','statSync','catch','5kVULrt','🚀\x20开始\x20Web\x20构建...','readFileSync','4374954IkYsSG','windows','-window','relative','existsSync','error','mkdirSync','copyFileSync','log','构建失败:\x20','380526EasAfp','out','npm','📂\x20创建\x20Web\x20构建目录:\x20','writeFileSync','utf-8','vite.config.js','code/static_file/vite.config.js','🔍\x20开始扫描窗口目录...','553272bYXyPX','✅\x20已复制窗口构建产物:\x20','98485EbaVNN','child_process','status','basename','cwd','❌\x20构建失败:','includes','code/static_file/package.json','parse','inherit','path','--build','package.json','\x20个窗口目录','1467460ASLCkp','web-dist','version'];_0x488a=function(){return _0x13bf5f;};return _0x488a();}function generateFiles(_0x22654c,_0x80eda2){const _0x1a5755=_0x5ed923,_0x33e4d0=path[_0x1a5755(0xcf)](path[_0x1a5755(0xfc)](process['cwd'](),_0x1a5755(0xcd)),_0x22654c),_0x4ad819=path[_0x1a5755(0xfc)](process['cwd'](),_0x1a5755(0xd7),_0x1a5755(0xcd),_0x33e4d0);!fs[_0x1a5755(0xd0)](_0x4ad819)&&fs[_0x1a5755(0xd2)](_0x4ad819,{'recursive':!![]}),fs['writeFileSync'](path['join'](_0x4ad819,_0x1a5755(0xed)),_0x80eda2['packageJson']),fs[_0x1a5755(0xda)](path[_0x1a5755(0xfc)](_0x4ad819,_0x1a5755(0xdc)),_0x80eda2[_0x1a5755(0xff)]),console[_0x1a5755(0xd4)]('✅\x20已生成文件到:\x20'+_0x4ad819);}async function buildWindow(_0x710d10){const _0x46525f=_0x5ed923;console[_0x46525f(0xd4)](_0x46525f(0xc4)+path[_0x46525f(0xe4)](_0x710d10));const _0x3066af=spawnSync(_0x46525f(0xd8),[_0x46525f(0xc6),_0x46525f(0xf9)],{'cwd':_0x710d10,'stdio':_0x46525f(0xea),'shell':!![]});if(_0x3066af[_0x46525f(0xe3)]!==0x0)throw new Error('构建失败:\x20'+path[_0x46525f(0xe4)](_0x710d10));}async function buildWindowWeb(_0x1049b3){const _0x22f98a=_0x5ed923;console[_0x22f98a(0xd4)](_0x22f98a(0xfb)+path[_0x22f98a(0xe4)](_0x1049b3));const _0x2f4c7d=spawnSync(_0x22f98a(0xd8),[_0x22f98a(0xc6),'build:web'],{'cwd':_0x1049b3,'stdio':_0x22f98a(0xea),'shell':!![]});if(_0x2f4c7d['status']!==0x0)throw new Error(_0x22f98a(0xd5)+path[_0x22f98a(0xe4)](_0x1049b3));}function buildWeb(){const _0x4dafb8=_0x5ed923;console[_0x4dafb8(0xd4)](_0x4dafb8(0xca));const _0x1685b9=JSON[_0x4dafb8(0xe9)](fs[_0x4dafb8(0xcb)](path[_0x4dafb8(0xfc)](__dirname,'..',_0x4dafb8(0xed)),'utf-8')),_0x4b7214='v'+_0x1685b9['version'],_0xcf5fbf=path[_0x4dafb8(0xfc)](__dirname,'..',_0x4dafb8(0xfa),_0x4dafb8(0x100),_0x4b7214);console[_0x4dafb8(0xd4)](_0x4dafb8(0xd9)+_0xcf5fbf);!fs[_0x4dafb8(0xd0)](_0xcf5fbf)&&fs[_0x4dafb8(0xd2)](_0xcf5fbf,{'recursive':!![]});const _0x1caefc=path[_0x4dafb8(0xfc)](__dirname,'..',_0x4dafb8(0xd7),_0x4dafb8(0xcd)),_0x4a9d3a=path[_0x4dafb8(0xfc)](_0x1caefc,_0x4dafb8(0xf0));fs[_0x4dafb8(0xd0)](_0x4a9d3a)&&(!fs[_0x4dafb8(0xd0)](_0xcf5fbf)&&fs[_0x4dafb8(0xd2)](_0xcf5fbf,{'recursive':!![]}),_0x216ded(_0x4a9d3a,_0xcf5fbf),console[_0x4dafb8(0xd4)](_0x4dafb8(0xe0)+_0xcf5fbf));function _0x359af7(_0x1470db,_0x194ee8){const _0x1f462f=_0x4dafb8,_0x383f3d=fs['readdirSync'](_0x1470db);for(const _0x4b74c9 of _0x383f3d){const _0x4b17fb=path[_0x1f462f(0xfc)](_0x1470db,_0x4b74c9),_0x5b95ec=fs['statSync'](_0x4b17fb);if(_0x5b95ec[_0x1f462f(0xf5)]()){if(_0x4b74c9[_0x1f462f(0xf3)](_0x1f462f(0xce))){const _0x5c59f8=path[_0x1f462f(0xfc)](_0x4b17fb,_0x1f462f(0xf0));if(fs[_0x1f462f(0xd0)](_0x5c59f8)){const _0x41155a=path['join'](_0x194ee8,_0x4b74c9);!fs[_0x1f462f(0xd0)](_0x41155a)&&fs[_0x1f462f(0xd2)](_0x41155a,{'recursive':!![]}),_0x216ded(_0x5c59f8,_0x41155a),console[_0x1f462f(0xd4)]('✅\x20已复制窗口构建产物:\x20'+_0x4b74c9);}}_0x359af7(_0x4b17fb,path[_0x1f462f(0xfc)](_0x194ee8,_0x4b74c9));}}}function _0x216ded(_0xf3013b,_0x295fa5){const _0x137bfc=_0x4dafb8,_0x580d99=fs[_0x137bfc(0xf4)](_0xf3013b);for(const _0x38958e of _0x580d99){const _0x4c5ec6=path['join'](_0xf3013b,_0x38958e),_0x572182=path[_0x137bfc(0xfc)](_0x295fa5,_0x38958e),_0x44c608=fs[_0x137bfc(0xc7)](_0x4c5ec6);_0x44c608[_0x137bfc(0xf5)]()?(fs[_0x137bfc(0xd2)](_0x572182,{'recursive':!![]}),_0x216ded(_0x4c5ec6,_0x572182)):fs[_0x137bfc(0xd3)](_0x4c5ec6,_0x572182);}}_0x359af7(_0x1caefc,_0xcf5fbf),console['log']('✅\x20Web\x20构建完成，输出目录:\x20'+_0xcf5fbf);}async function main(){const _0x411419=_0x5ed923,_0x2b0b4f=process['argv'][_0x411419(0xc3)](0x2),_0x391924=_0x2b0b4f[_0x411419(0xe7)](_0x411419(0xec)),_0x5f316b=_0x2b0b4f[_0x411419(0xe7)](_0x411419(0xfe));if(_0x391924)try{console[_0x411419(0xd4)]('🔍\x20开始扫描窗口目录...');const _0x1aab35=path[_0x411419(0xfc)](process[_0x411419(0xe5)](),_0x411419(0xcd)),_0x292446=findWindowDirs(_0x1aab35);console[_0x411419(0xd4)](_0x411419(0xfd)+_0x292446[_0x411419(0xf2)]+'\x20个窗口目录');for(const _0x3b5437 of _0x292446){console['log'](_0x411419(0xc5)+path['basename'](_0x3b5437));const _0xa2cc5=processStaticFiles(_0x3b5437),_0x1a0661=path[_0x411419(0xfc)](process[_0x411419(0xe5)](),'out',path[_0x411419(0xcf)](process[_0x411419(0xe5)](),_0x3b5437));generateFiles(_0x3b5437,_0xa2cc5),await buildWindow(_0x1a0661);}console['log'](_0x411419(0xf8));}catch(_0x4b31b5){console[_0x411419(0xd1)]('❌\x20错误:',_0x4b31b5),process[_0x411419(0xc1)](0x1);}if(_0x5f316b){try{console[_0x411419(0xd4)](_0x411419(0xde));const _0x5bcaf5=path[_0x411419(0xfc)](process['cwd'](),_0x411419(0xcd)),_0xd6431e=findWindowDirs(_0x5bcaf5);console[_0x411419(0xd4)](_0x411419(0xfd)+_0xd6431e[_0x411419(0xf2)]+_0x411419(0xee));for(const _0x2eec1d of _0xd6431e){console['log'](_0x411419(0xc5)+path[_0x411419(0xe4)](_0x2eec1d));const _0xc1b230=processStaticFiles(_0x2eec1d),_0x2c641b=path[_0x411419(0xfc)](process[_0x411419(0xe5)](),'out',path['relative'](process[_0x411419(0xe5)](),_0x2eec1d));generateFiles(_0x2eec1d,_0xc1b230),await buildWindowWeb(_0x2c641b);}console[_0x411419(0xd4)](_0x411419(0xf8));}catch(_0x3b9e41){console[_0x411419(0xd1)]('❌\x20错误:',_0x3b9e41),process[_0x411419(0xc1)](0x1);}buildWeb();}!_0x391924&&!_0x5f316b&&(console[_0x411419(0xd1)]('❌\x20请指定构建模式'),process[_0x411419(0xc1)](0x1));}function _0x3ca6(_0x39583b,_0x356ee2){const _0x488a5d=_0x488a();return _0x3ca6=function(_0x3ca6bf,_0x4eb467){_0x3ca6bf=_0x3ca6bf-0xc0;let _0x66a9ef=_0x488a5d[_0x3ca6bf];return _0x66a9ef;},_0x3ca6(_0x39583b,_0x356ee2);}main()[_0x5ed923(0xc8)](_0x3dfb23=>{const _0x4355c6=_0x5ed923;console[_0x4355c6(0xd1)](_0x4355c6(0xe6),_0x3dfb23),process['exit'](0x1);});