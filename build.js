const _0x29ba41=_0x3f1f;(function(_0x2774d9,_0x2f2c51){const _0x39a4bb=_0x3f1f,_0x46ea7f=_0x2774d9();while(!![]){try{const _0x4b585b=parseInt(_0x39a4bb(0x8f))/0x1*(-parseInt(_0x39a4bb(0xae))/0x2)+-parseInt(_0x39a4bb(0xca))/0x3+parseInt(_0x39a4bb(0xc2))/0x4*(-parseInt(_0x39a4bb(0xbd))/0x5)+-parseInt(_0x39a4bb(0xc9))/0x6*(-parseInt(_0x39a4bb(0x90))/0x7)+parseInt(_0x39a4bb(0x99))/0x8*(-parseInt(_0x39a4bb(0xb1))/0x9)+parseInt(_0x39a4bb(0xac))/0xa+parseInt(_0x39a4bb(0xa1))/0xb;if(_0x4b585b===_0x2f2c51)break;else _0x46ea7f['push'](_0x46ea7f['shift']());}catch(_0x5bbe96){_0x46ea7f['push'](_0x46ea7f['shift']());}}}(_0x1f4c,0xb22b6));const {spawnSync}=require(_0x29ba41(0xb0)),fs=require('fs'),path=require('path');function findWindowDirs(_0x5291b2){const _0xae6a87=[];function _0x5a3c93(_0x42a007){const _0x49ad92=_0x3f1f;(_0x42a007[_0x49ad92(0xa7)](_0x49ad92(0x8b))||path[_0x49ad92(0xb8)](_0x42a007)==='windows')&&_0xae6a87[_0x49ad92(0x9f)](_0x42a007);const _0x4867f2=fs['readdirSync'](_0x42a007);_0x4867f2[_0x49ad92(0xc0)](_0x4a5baa=>{const _0x423338=_0x49ad92,_0xf88ec1=path[_0x423338(0x8c)](_0x42a007,_0x4a5baa);fs['statSync'](_0xf88ec1)[_0x423338(0x8e)]()&&_0x5a3c93(_0xf88ec1);});}return _0x5a3c93(_0x5291b2),_0xae6a87;}function processStaticFiles(_0x9695ba){const _0x3ace11=_0x29ba41,_0x9a103a=fs['readFileSync'](path[_0x3ace11(0x8c)](__dirname,_0x3ace11(0x9e)),_0x3ace11(0xa8)),_0x570382=fs['readFileSync'](path[_0x3ace11(0x8c)](__dirname,_0x3ace11(0xa3)),_0x3ace11(0xa8)),_0x921d53=JSON[_0x3ace11(0xa5)](fs[_0x3ace11(0xb5)](path['join'](process[_0x3ace11(0x92)](),_0x3ace11(0x88)),_0x3ace11(0xa8))),_0x11c274=path[_0x3ace11(0xb8)](_0x9695ba),_0x57061a=_0x9a103a[_0x3ace11(0x97)](/____name____/g,_0x11c274)[_0x3ace11(0x97)](/____version____/g,_0x921d53['version']),_0x511e38=_0x570382[_0x3ace11(0x97)](/____outputDir____/g,path[_0x3ace11(0x8c)](process['cwd'](),_0x3ace11(0xc1))[_0x3ace11(0x97)](/\\/g,'/'));return{'packageJson':_0x57061a,'viteConfig':_0x511e38};}function generateFiles(_0x5b6f05,_0x4103d9){const _0x5265ae=_0x29ba41,_0x4e6b6e=path[_0x5265ae(0xb7)](path[_0x5265ae(0x8c)](process[_0x5265ae(0x92)](),_0x5265ae(0xa4)),_0x5b6f05),_0x1d8252=path['join'](process[_0x5265ae(0x92)](),_0x5265ae(0xc1),_0x5265ae(0xa4),_0x4e6b6e);!fs[_0x5265ae(0x89)](_0x1d8252)&&fs[_0x5265ae(0xc4)](_0x1d8252,{'recursive':!![]}),fs[_0x5265ae(0xcb)](path[_0x5265ae(0x8c)](_0x1d8252,_0x5265ae(0x88)),_0x4103d9[_0x5265ae(0xab)]),fs[_0x5265ae(0xcb)](path['join'](_0x1d8252,_0x5265ae(0x98)),_0x4103d9[_0x5265ae(0xc3)]),console[_0x5265ae(0x9a)](_0x5265ae(0xa0)+_0x1d8252);}function _0x1f4c(){const _0x36b03d=['✅\x20已复制窗口构建产物:\x20','-window','join','✅\x20Web\x20构建完成，输出目录:\x20','isDirectory','16223UOdEPa','5362PXPsaZ','slice','cwd','📂\x20找到\x20','❌\x20构建失败:','🏗️\x20开始构建窗口:\x20','web-dist','replace','vite.config.js','1544BNMabc','log','statSync','❌\x20错误:','🔄\x20处理窗口:\x20','code/static_file/package.json','push','✅\x20已生成文件到:\x20','34972355ksFmkH','argv','code/static_file/vite.config.js','windows','parse','status','endsWith','utf-8','catch','run','packageJson','290320cuJaOL','--web','122Szbwar','readdirSync','child_process','24588uyhfTz','build','length','error','readFileSync','inherit','relative','basename','includes','version','exit','❌\x20请指定构建模式','638940RmpAPW','copyFileSync','✨\x20所有窗口构建完成','forEach','out','4VQeGxM','viteConfig','mkdirSync','构建失败:\x20','\x20个窗口目录','🏗️\x20开始构建窗口web:\x20','🔍\x20开始扫描窗口目录...','4056miVTnk','4055112QpWfoU','writeFileSync','🚀\x20开始\x20Web\x20构建...','package.json','existsSync'];_0x1f4c=function(){return _0x36b03d;};return _0x1f4c();}async function buildWindow(_0x184dbe){const _0x36efae=_0x29ba41;console[_0x36efae(0x9a)](_0x36efae(0x95)+path[_0x36efae(0xb8)](_0x184dbe));const _0x36361e=spawnSync('npm',[_0x36efae(0xaa),_0x36efae(0xb2)],{'cwd':_0x184dbe,'stdio':_0x36efae(0xb6),'shell':!![]});if(_0x36361e[_0x36efae(0xa6)]!==0x0)throw new Error(_0x36efae(0xc5)+path[_0x36efae(0xb8)](_0x184dbe));}async function buildWindowWeb(_0x197193){const _0x222c58=_0x29ba41;console[_0x222c58(0x9a)](_0x222c58(0xc7)+path[_0x222c58(0xb8)](_0x197193));const _0x2cce9b=spawnSync('npm',[_0x222c58(0xaa),'build:web'],{'cwd':_0x197193,'stdio':_0x222c58(0xb6),'shell':!![]});if(_0x2cce9b['status']!==0x0)throw new Error('构建失败:\x20'+path[_0x222c58(0xb8)](_0x197193));}function _0x3f1f(_0x4a852d,_0x54ddb8){const _0x1f4cac=_0x1f4c();return _0x3f1f=function(_0x3f1f3a,_0x4e7bfe){_0x3f1f3a=_0x3f1f3a-0x87;let _0x3074a5=_0x1f4cac[_0x3f1f3a];return _0x3074a5;},_0x3f1f(_0x4a852d,_0x54ddb8);}function buildWeb(){const _0x2e8e94=_0x29ba41;console[_0x2e8e94(0x9a)](_0x2e8e94(0x87));const _0x3b58fa=JSON[_0x2e8e94(0xa5)](fs[_0x2e8e94(0xb5)](path[_0x2e8e94(0x8c)](__dirname,'..','package.json'),_0x2e8e94(0xa8))),_0xe52968='v'+_0x3b58fa[_0x2e8e94(0xba)],_0x36f586=path[_0x2e8e94(0x8c)](__dirname,'..','dist','web',_0xe52968);console[_0x2e8e94(0x9a)]('📂\x20创建\x20Web\x20构建目录:\x20'+_0x36f586);!fs[_0x2e8e94(0x89)](_0x36f586)&&fs[_0x2e8e94(0xc4)](_0x36f586,{'recursive':!![]});const _0x52b1fa=path[_0x2e8e94(0x8c)](__dirname,'..','out',_0x2e8e94(0xa4)),_0x2252c9=path['join'](_0x52b1fa,_0x2e8e94(0x96));fs[_0x2e8e94(0x89)](_0x2252c9)&&(!fs['existsSync'](_0x36f586)&&fs[_0x2e8e94(0xc4)](_0x36f586,{'recursive':!![]}),_0xe22ce4(_0x2252c9,_0x36f586),console['log'](_0x2e8e94(0x8a)+_0x36f586));function _0x37ea81(_0x4473b7,_0x563f60){const _0xe7c3c5=_0x2e8e94,_0x23e828=fs[_0xe7c3c5(0xaf)](_0x4473b7);for(const _0x5d778d of _0x23e828){const _0x52dd78=path[_0xe7c3c5(0x8c)](_0x4473b7,_0x5d778d),_0x34dea9=fs[_0xe7c3c5(0x9b)](_0x52dd78);if(_0x34dea9[_0xe7c3c5(0x8e)]()){if(_0x5d778d[_0xe7c3c5(0xa7)](_0xe7c3c5(0x8b))){const _0xc8eaf8=path[_0xe7c3c5(0x8c)](_0x52dd78,_0xe7c3c5(0x96));if(fs[_0xe7c3c5(0x89)](_0xc8eaf8)){const _0x22d0d1=path[_0xe7c3c5(0x8c)](_0x563f60,_0x5d778d);!fs[_0xe7c3c5(0x89)](_0x22d0d1)&&fs[_0xe7c3c5(0xc4)](_0x22d0d1,{'recursive':!![]}),_0xe22ce4(_0xc8eaf8,_0x22d0d1),console[_0xe7c3c5(0x9a)](_0xe7c3c5(0x8a)+_0x5d778d);}}_0x37ea81(_0x52dd78,path[_0xe7c3c5(0x8c)](_0x563f60,_0x5d778d));}}}function _0xe22ce4(_0xfbc7dd,_0x40bb6f){const _0x1d2a85=_0x2e8e94,_0xbfa166=fs[_0x1d2a85(0xaf)](_0xfbc7dd);for(const _0x4ad5c3 of _0xbfa166){const _0x2c2276=path['join'](_0xfbc7dd,_0x4ad5c3),_0x36d00d=path[_0x1d2a85(0x8c)](_0x40bb6f,_0x4ad5c3),_0xd100a7=fs[_0x1d2a85(0x9b)](_0x2c2276);_0xd100a7[_0x1d2a85(0x8e)]()?(fs[_0x1d2a85(0xc4)](_0x36d00d,{'recursive':!![]}),_0xe22ce4(_0x2c2276,_0x36d00d)):fs[_0x1d2a85(0xbe)](_0x2c2276,_0x36d00d);}}_0x37ea81(_0x52b1fa,_0x36f586),console[_0x2e8e94(0x9a)](_0x2e8e94(0x8d)+_0x36f586);}async function main(){const _0x18f58f=_0x29ba41,_0xc6b925=process[_0x18f58f(0xa2)][_0x18f58f(0x91)](0x2),_0x1eb81d=_0xc6b925[_0x18f58f(0xb9)]('--build'),_0x23b24e=_0xc6b925[_0x18f58f(0xb9)](_0x18f58f(0xad));if(_0x1eb81d)try{console[_0x18f58f(0x9a)](_0x18f58f(0xc8));const _0x1fb7b4=path['join'](process[_0x18f58f(0x92)](),'windows'),_0xf01446=findWindowDirs(_0x1fb7b4);console['log'](_0x18f58f(0x93)+_0xf01446[_0x18f58f(0xb3)]+_0x18f58f(0xc6));for(const _0x1c1316 of _0xf01446){console[_0x18f58f(0x9a)](_0x18f58f(0x9d)+path['basename'](_0x1c1316));const _0x52efb9=processStaticFiles(_0x1c1316),_0xcee36d=path[_0x18f58f(0x8c)](process[_0x18f58f(0x92)](),_0x18f58f(0xc1),path[_0x18f58f(0xb7)](process[_0x18f58f(0x92)](),_0x1c1316));generateFiles(_0x1c1316,_0x52efb9),await buildWindow(_0xcee36d);}console['log'](_0x18f58f(0xbf));}catch(_0x31499e){console['error'](_0x18f58f(0x9c),_0x31499e),process[_0x18f58f(0xbb)](0x1);}if(_0x23b24e){try{console[_0x18f58f(0x9a)](_0x18f58f(0xc8));const _0x1c3b6a=path[_0x18f58f(0x8c)](process[_0x18f58f(0x92)](),'windows'),_0x477672=findWindowDirs(_0x1c3b6a);console[_0x18f58f(0x9a)](_0x18f58f(0x93)+_0x477672[_0x18f58f(0xb3)]+'\x20个窗口目录');for(const _0x33ac00 of _0x477672){console[_0x18f58f(0x9a)](_0x18f58f(0x9d)+path[_0x18f58f(0xb8)](_0x33ac00));const _0x4628a8=processStaticFiles(_0x33ac00),_0x21593c=path[_0x18f58f(0x8c)](process[_0x18f58f(0x92)](),_0x18f58f(0xc1),path[_0x18f58f(0xb7)](process[_0x18f58f(0x92)](),_0x33ac00));generateFiles(_0x33ac00,_0x4628a8),await buildWindowWeb(_0x21593c);}console['log']('✨\x20所有窗口构建完成');}catch(_0x59187b){console[_0x18f58f(0xb4)](_0x18f58f(0x9c),_0x59187b),process[_0x18f58f(0xbb)](0x1);}buildWeb();}!_0x1eb81d&&!_0x23b24e&&(console[_0x18f58f(0xb4)](_0x18f58f(0xbc)),process[_0x18f58f(0xbb)](0x1));}main()[_0x29ba41(0xa9)](_0x3662af=>{const _0x23751c=_0x29ba41;console[_0x23751c(0xb4)](_0x23751c(0x94),_0x3662af),process['exit'](0x1);});